{"version":3,"sources":["webpack:///./app/src/living.js","webpack:///./app/src/module/tools/url.js?f017","webpack:///./app/src/module/util/alertify.js?d9f5*","webpack:///./app/src/module/share/share.view.js?975a","webpack:///./app/link/ZerpClipboard/clipboard.js?cdc8","webpack:///./app/src/module/share/template/shareLink.html?3450","webpack:///./app/src/module/tools/modelBefore.js?1a15","webpack:///./app/stylesheets/living.scss","webpack:///./app/src/views/living/main.view.js","webpack:///./app/src/views/living/detail.view.js","webpack:///./app/src/models/living/detail.model.js","webpack:///./app/src/module/util/FlashApi.js","webpack:///./app/src/views/living/chat.view.js","webpack:///./app/src/module/webIM/IMServer.js","webpack:///./app/src/module/IMModel/index.js","webpack:///./app/src/module/webIM/dealChat.js","webpack:///./app/src/views/living/template/chat.html","webpack:///./app/src/module/pay/pay.view.js","webpack:///./app/src/module/PayModel/userPay.js","webpack:///./app/src/module/PayModel/paySuggest.js","webpack:///./app/src/module/PayModel/fList.js","webpack:///./app/src/module/PayModel/PayF.js","webpack:///./app/src/module/pay/template/download.html","webpack:///./app/src/module/pay/template/fCdKeyItem.html","webpack:///./app/src/module/pay/template/payinfo.html","webpack:///./app/images/pay/er.png","webpack:///./app/src/views/living/template/videoDetail.html","webpack:///./app/src/views/living/template/downloadTips.html","webpack:///./app/src/views/living/template/tipsMultiCamera.html","webpack:///./app/images/living/live-ico2.png","webpack:///./app/src/views/living/history.view.js","webpack:///./app/src/models/living/history.model.js","webpack:///./app/src/views/living/template/history.html"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTD;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ,UAAU;AAClB;AACA;AACA;AACA,wDAAuD,oBAAoB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACxBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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FAAsF,qFAAqF,EAAE,yCAAyC,qBAAqB,yCAAyC,oBAAoB,0CAA0C,uCAAuC,mBAAmB,kCAAkC,yGAAyG,GAAG,YAAY,YAAY,EAAE,EAAE,0DAA0D,EAAE,GAAG,SAAS,E;;;;;;ACA73T,yEAAwE,SAAS,OAAO,KAAK,qCAAqC,SAAS,8JAA8J,MAAM,WAAW,SAAS,iBAAiB,KAAK,SAAS,OAAO,OAAO,KAAK,qCAAqC,SAAS,wJAAwJ,KAAK,QAAQ,SAAS,SAAS,OAAO,QAAQ,KAAK,uCAAuC,SAAS,0JAA0J,KAAK,SAAS,SAAS,sBAAsB,KAAK,4DAA4D,SAAS,yGAAyG,oCAAoC,SAAS,8LAA8L,KAAK,MAAM,gB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA9wC;AACA;AACA;AACA;AACA,gCAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA,0C;;;;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,EAAC;;AAED;;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B,kCAAiC;AACjC;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA,0BAAyB;AACzB;;AAEA,kBAAiB;AACjB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,sBAAqB;AACrB;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA,cAAa;AACb;;AAEA,MAAK;AACL;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;;AAET,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;;;;;;ACvWA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACzBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB,MAAM,WAAW,OAAO,uBAAuB,GAAG;AACvE,qBAAoB,IAAI;AACxB,qBAAoB,OAAO;AAC3B,qBAAoB,WAAW;AAC/B,qBAAoB,QAAQ;AAC5B,qBAAoB,UAAU;AAC9B,qBAAoB,MAAM;AAC1B,qBAAoB,MAAM,WAAW,OAAO,UAAU,GAAG,6CAA6C,IAAI,sBAAsB,OAAO,oBAAoB,WAAW,YAAY,QAAQ,WAAW,MAAM,cAAc,UAAU;AACnO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,OAAO;AACrC;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ,kCAAkC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnJA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,kB,6CAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;;;;;;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,cAAc;AAC7D;AACA;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAwD;;AAExD;AACA;AACA;AACA;AACA,kBAAiB;AACjB,2DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,SAAS;AACrB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,aAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,SAAS;AACrB,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA;AACA;;;;;;;ACtPA;AACA,WAAU;AACV,aAAY;AACZ,WAAU;AACV;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,qCAAoC;AACpC,gCAA+B;AAC/B;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,2BAA0B,iBAAiB;AAC3C;AACA;AACA,MAAK;AACL;AACA;AACA,2BAA0B,iBAAiB;AAC3C;AACA,MAAK;AACL;AACA;AACA,iBAAgB,SAAS;AACzB,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC,iCAAgC;AAChC,sBAAqB;AACrB,6CAA4C;AAC5C,iCAAgC;AAChC,2DAA0D;AAC1D,uDAAsD;AACtD,6CAA4C;AAC5C,wDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,6BAA6B;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,6BAA6B;AAChD;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,6BAA6B;AAChD;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,6BAA6B;AAChD;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjQA,oEAAmE,MAAM,sBAAsB,aAAa,uFAAuF,UAAU,kBAAkB,SAAS,8B;;;;;;ACAxO;;AAEA;AACA;AACA,qCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,oDAAmD,sBAAsB;AACzE;AACA;AACA;AACA;AACA,uEAAsE,wCAAwC;AAC9G;AACA;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAgD,iCAAiC;AACjF;AACA;AACA;AACA;AACA,uEAAsE,wCAAwC;AAC9G;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,yBAAwB;AACxB,kBAAiB;AACjB;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,kBAAiB;AACjB;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA,aAAY;AACZ;AACA,aAAY;AACZ,MAAK;AACL,EAAC;AACD;;AAEA;;;;;;;ACvSA;AACA,WAAU;AACV,aAAY;AACZ,WAAU;AACV;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,qCAAoC;AACpC,gCAA+B;AAC/B;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA,MAAK;AACL,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrCA;AACA,WAAU;AACV,aAAY;AACZ,WAAU;AACV;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,qCAAoC;AACpC,gCAA+B;AAC/B;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC/CA;AACA,WAAU;AACV,aAAY;AACZ,WAAU;AACV;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,qCAAoC;AACpC,gCAA+B;AAC/B;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA,MAAK;AACL,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrCA;AACA,WAAU;AACV,aAAY;AACZ,WAAU;AACV;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,qCAAoC;AACpC,gCAA+B;AAC/B;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA,MAAK;AACL,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrCA,yGAAwG,MAAM,sGAAsG,MAAM,2B;;;;;;ACA1N,qBAAoB,mBAAmB,kCAAkC,6BAA6B,uCAAuC,qBAAqB,wFAAwF,MAAM,uCAAuC,qBAAqB,8EAA8E,KAAK,eAAe,OAAO,K;;;;;;ACAra,0HAAyH,+BAA+B,6YAA6Y,SAAS,iPAAiP,mCAAmC,qDAAqD,iCAAiC,KAAK,8BAA8B,4BAA4B,+BAA+B,8BAA8B,8BAA8B,qDAAqD,cAAc,KAAK,WAAW,4BAA4B,YAAY,8BAA8B,oCAAoC,qDAAqD,cAAc,KAAK,WAAW,4BAA4B,YAAY,kEAAkE,iCAAiC,KAAK,8BAA8B,4BAA4B,+BAA+B,8BAA8B,KAAK,2LAA2L,sBAAsB,kCAAkC,cAAc,yCAAyC,MAAM,kCAAkC,iCAAiC,yCAAyC,KAAK,oEAAoE,SAAS,8rB;;;;;;ACA5jE,kCAAiC,ohB;;;;;;ACAjC,mJAAkJ,oBAAoB,+HAA+H,WAAW,mBAAmB,yBAAyB,yBAAyB,SAAS,4CAA4C,KAAK,wDAAwD,qBAAqB,wCAAwC,+BAA+B,sDAAsD,MAAM,uDAAuD,KAAK,qEAAqE,YAAY,4CAA4C,WAAW,kJ;;;;;;ACAn0B,yGAAwG,MAAM,sGAAsG,MAAM,2B;;;;;;ACA1N,iM;;;;;;ACAA,kCAAiC,o2H;;;;;;ACAjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,EAAC;;AAED;;;;;;;AC/GA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA,MAAK;AACL;AACA;AACA;AACA,4BAA2B,0BAA0B;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC7DA,qBAAoB,mBAAmB,gEAAgE,cAAc,aAAa,wBAAwB,gDAAgD,gBAAgB,gGAAgG,gCAAgC,6CAA6C,iBAAiB,qBAAqB,KAAK,oFAAoF,gBAAgB,0CAA0C,uBAAuB,gGAAgG,iBAAiB,gDAAgD,gBAAgB,oDAAoD,OAAO,K","file":"living.js","sourcesContent":["/**\r\n * Created by caoxifeng on 16/4/11.\r\n */\r\nvar $ = require('jquery');\r\nrequire('../stylesheets/living.scss');\r\nvar MainView = require('./views/living/main.view');\r\n$(function () {\r\n    // 入口视图\r\n    new MainView();\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/living.js\n ** module id = 0\n ** module chunks = 4\n **/","module.exports = {\r\n\t/**\r\n\t * [parseSearch 将search参数转换为obj]\r\n\t * @param  {[type]} query [description]\r\n\t * @return {[type]}       [description]\r\n\t */\r\n\tparseSearch:function(query){\r\n\t\tvar _query = {};\r\n\t\tvar seg = query.replace(/^\\?/, '').split('&'),\r\n\t\t\tleng = seg.length,\r\n\t\t\ti = 0,\r\n\t\t\tvalue,\r\n\t\t\ttarget;\r\n\t\tfor (; i < leng; i++) {\r\n\t\t\tif (!seg[i]) continue;\r\n\t\t\ttarget = seg[i].split('=');\r\n\t\t\tvalue = target[1];\r\n\t\t\tif ((/^\\[/.test(value) && /\\]$/.test(value)) || (/^{/.test(value) || /\\}$/.test(value))) {\r\n\t\t\t\tvalue = JSON.parse(value);\r\n\t\t\t};\r\n\t\t\t_query[target[0]] = value;\r\n\t\t}\r\n\t\treturn _query;\r\n\t}\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/tools/url.js\n ** module id = 83\n ** module chunks = 1 4 5 6 8\n **/","/**\r\n *如果使用zepto，fadeIn,fadeOut,innerHeight等函数不被支持\r\n */\r\n\r\nvar prober = require(\"prober\");\r\nvar _ = require('underscore');\r\n\r\nvar isIE = prober.browser.name == \"ie\",\r\n    isIE6 = isIE && prober.browser.version < \"7\";\r\n\r\nfunction Alertify() {\r\n    this.iframe = $(\"<iframe></iframe>\").addClass(\"alertify-wrapper-iframe\");\r\n    this.el = $(\"<div/>\").addClass(\"alertify-wrapper clearfix\");\r\n    this.ctn = $(\"<div/>\").addClass(\"alertify-wrapper-ctn\");\r\n    this.ctnInner = $(\"<div/>\").addClass(\"alertify-wrapper-ctn-inner\");\r\n    this.ctnInnerContWrapper = $(\"<div/>\");\r\n    this.contElStr = \"<i></i>\";\r\n    this.body = $(\"body\");\r\n    this.init();\r\n}\r\n\r\nAlertify.prototype = {\r\n    constructor: Alertify,\r\n    init: function() {\r\n        this.runningTime = 400;\r\n        this.stayTime = 1000;\r\n        this.timeId = null;\r\n        this.ctn.appendTo(this.el);\r\n        this.ctnInner.appendTo(this.ctn);\r\n        if (isIE) {\r\n            this.iframe.appendTo(this.ctnInner);\r\n        }\r\n        this.ctnInnerContWrapper.appendTo(this.ctnInner);\r\n        this.el.appendTo(this.body);\r\n    },\r\n    showInfo: function(css, mess, callback, delay) {\r\n        var self = this;\r\n        var stayTime = delay ? delay : self.stayTime;\r\n\r\n        if (typeof mess !== \"undefined\" && $.trim(mess) !== \"\") {\r\n            clearTimeout(self.timeId);\r\n            if (this.running) {\r\n                try {\r\n                    this.el.stop().hide();\r\n                } catch (e) {}\r\n                this.ctnInnerContWrapper.removeClass();\r\n                clearTimeout(this.timeId);\r\n                typeof self.callback === \"function\" && self.callback();\r\n            }\r\n            this.callback = callback;\r\n            //标示alertify是否为显示状态\r\n            this.running = true;\r\n\r\n            this.ctnInnerContWrapper.addClass(css).html(this.contElStr + mess);\r\n\r\n            this.setPosition();\r\n\r\n            try {\r\n                this.el.fadeIn(this.runningTime, function() {\r\n                    if (_.indexOf(Alertify.manualType, self.currentType) === -1) {\r\n                        self.timeId = setTimeout(function() {\r\n                            self.hideInfo();\r\n                        }, stayTime);\r\n                    }\r\n                });\r\n            } catch (e) {\r\n                this.el.css({\r\n                    \"opacity\": 1,\r\n                    \"display\": \"block\"\r\n                });\r\n                self.timeId = setTimeout(function() {\r\n                    self.hideInfo();\r\n                }, stayTime);\r\n            }\r\n\r\n        }\r\n    },\r\n    hideInfo: function() {\r\n        var self = this;\r\n        try {\r\n            this.el.fadeOut(this.runningTime, function() {\r\n                typeof self.callback === \"function\" && self.callback();\r\n                self.ctnInnerContWrapper.removeClass();\r\n                self.running = false;\r\n            });\r\n        } catch (e) {\r\n            this.el.css({\r\n                \"opacity\": 0,\r\n                \"display\": \"none\"\r\n            });\r\n            typeof self.callback === \"function\" && self.callback();\r\n            self.ctnInnerContWrapper.removeClass();\r\n            self.running = false;\r\n        }\r\n\r\n    },\r\n    setPosition: function() {\r\n        var clientHeight = document.documentElement.clientHeight;\r\n        try {\r\n            var alertifyHeight = this.el.innerHeight();\r\n        } catch (e) {\r\n            var alertifyHeight = this.el.height();\r\n        }\r\n\r\n        var alertifyTop = (clientHeight - alertifyHeight) / 2;\r\n\r\n        this.iframe.css(\"height\", alertifyHeight + \"px\");\r\n\r\n        if (isIE6) {\r\n            var stylesInIE = {\r\n                position: \"absolute\",\r\n                top: alertifyTop + $(window).scrollTop() + \"px\"\r\n            };\r\n            this.el.css(stylesInIE);\r\n        } else {\r\n            this.el.css(\"top\", alertifyTop + \"px\");\r\n        }\r\n    },\r\n    hide: function(time, callback) {\r\n        var time = typeof time === \"number\" ? time : this.runningTime,\r\n            self = this;\r\n        if (!this.running) {\r\n            return;\r\n        }\r\n\r\n        if (this.el.fadeOut) {\r\n            this.el.fadeOut(time, function() {\r\n                typeof callback === \"function\" && callback();\r\n                self.ctnInnerContWrapper.removeClass();\r\n                self.running = false;\r\n            });\r\n        } else {\r\n            this.el.hide();\r\n            self.ctnInnerContWrapper.removeClass();\r\n            self.running = false;\r\n        }\r\n    }\r\n};\r\n\r\n//alertify控件支持的类型，{如需要新增类型，直接在此属性加入即可}\r\nAlertify.automaticType = [\"log\", \"error\", \"success\"];\r\nAlertify.manualType = [\"loading\"];\r\n\r\nvar alertify = new Alertify(),\r\n    exportsObj = {\r\n        hide: function(time, callback) {\r\n            var time = time,\r\n                callback = callback;\r\n            if (arguments.length === 1 && typeof arguments[0] === \"function\") {\r\n                callback = time;\r\n                time = null;\r\n            }\r\n            alertify.hide(time, callback);\r\n        }\r\n    };\r\n\r\n_.each(Alertify.automaticType.concat(Alertify.manualType), function(type, index) {\r\n    exportsObj[type] = function() {\r\n        var message = arguments[0];\r\n        if (type === \"loading\") {\r\n            message || (message = \"加载中，请稍后...\");\r\n        }\r\n        alertify.currentType = type;\r\n        alertify.showInfo(\"alertify-\" + type, message, arguments[1], arguments[2]);\r\n    }\r\n});\r\n\r\n/**\r\n * interface 对外的接口\r\n * @return {\r\n *      log: function() {},         常态输出\r\n *      loading: function() {},     loading状态\r\n *      error: function() {},       错误输出\r\n *      success: function() {}      成功输出\r\n *      hide: function() {}         关闭提示组件,可传入回调\r\n * }\r\n * 每个方法都接受二个参数message和callback回调,callback不是必须的。(hide接受的是time和callback参数,可直接单独传入callback)\r\n */\r\n\r\nmodule.exports = exportsObj;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/util/alertify.js\n ** module id = 90\n ** module chunks = 1 3 4 5 6 8\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar ClipBoard = require('../../../link/ZerpClipboard/clipboard.js');\r\nvar alertify = require('alertify');\r\nvar View = BaseView.extend({\r\n    el: '',\r\n    events: {\r\n        'click .J_sharelink': 'windowOpen'\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        this.clipBoard = ClipBoard;\r\n    },\r\n    onEvents: function() {\r\n        this.on('events:initAttr', function(options) {\r\n            this.renderShare(options);\r\n        });\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n        this.shareItem = require('./template/shareLink.html');\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        this.onEvents();\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    },\r\n    renderShare: function(opts) {\r\n        var _opts = {};\r\n        for (var v in opts) {\r\n            _opts[v] = encodeURIComponent(opts[v]);\r\n        }\r\n        this.options = _opts;\r\n        this.options.href = window.location.href;\r\n        var html = this.compileHTML(this.shareItem,  this.options);\r\n        this.$el.append(html);\r\n        this.clipBoardInit();\r\n    },\r\n    windowOpen: function(e) {\r\n        e.preventDefault();\r\n        var windowWidth = $(window).width();\r\n        var windowHeight = $(window).height();\r\n        var offsetX, offsetY;\r\n        var width = 800;\r\n        var height = 700;\r\n        var url = $(e.target).attr('href');\r\n\r\n        if (width >= windowWidth) {\r\n            offsetX = 0;\r\n            width = windowWidth;\r\n        } else {\r\n            offsetX = (windowWidth - width) / 2;\r\n        }\r\n        if (height >= windowWidth) {\r\n            offsetY = 0;\r\n            height = windowHeight;\r\n        } else {\r\n            offsetY = (windowHeight - height) / 2;\r\n        }\r\n        window.open(url, 'newwindow',\r\n            'height=' + height + ',width=' + width +\r\n            ',left=' + offsetX + ',top=' + offsetY +\r\n            ',toolbar=no,menubar=no,scrollbars=no,resizable=no,location=no,status=no');\r\n    },\r\n    clipBoardInit: function() {\r\n        var clipboard = new this.clipBoard(copyUrlBtn);\r\n        clipboard.on('success', function(e) {\r\n            alertify.success('复制成功');\r\n            e.clearSelection();\r\n        });\r\n\r\n        clipboard.on('error', function(e) {\r\n            alertify.error('复制失败，请重试');\r\n        });\r\n    }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/share/share.view.js\n ** module id = 91\n ** module chunks = 1 4\n **/","/*!\r * clipboard.js v1.5.12\r * https://zenorocha.github.io/clipboard.js\r *\r * Licensed MIT © Zeno Rocha\r */\r!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var e;e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t,e,n;return function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var s=\"function\"==typeof require&&require;if(!c&&s)return s(a,!0);if(r)return r(a,!0);var l=new Error(\"Cannot find module '\"+a+\"'\");throw l.code=\"MODULE_NOT_FOUND\",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n?n:t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r=\"function\"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){var o=t(\"matches-selector\");e.exports=function(t,e,n){for(var i=n?t:t.parentNode;i&&i!==document;){if(o(i,e))return i;i=i.parentNode}}},{\"matches-selector\":5}],2:[function(t,e,n){function o(t,e,n,o,r){var a=i.apply(this,arguments);return t.addEventListener(n,a,r),{destroy:function(){t.removeEventListener(n,a,r)}}}function i(t,e,n,o){return function(n){n.delegateTarget=r(n.target,e,!0),n.delegateTarget&&o.call(t,n)}}var r=t(\"closest\");e.exports=o},{closest:1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&(\"[object NodeList]\"===e||\"[object HTMLCollection]\"===e)&&\"length\"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return\"string\"==typeof t||t instanceof String},n.fn=function(t){var e=Object.prototype.toString.call(t);return\"[object Function]\"===e}},{}],4:[function(t,e,n){function o(t,e,n){if(!t&&!e&&!n)throw new Error(\"Missing required arguments\");if(!c.string(e))throw new TypeError(\"Second argument must be a String\");if(!c.fn(n))throw new TypeError(\"Third argument must be a Function\");if(c.node(t))return i(t,e,n);if(c.nodeList(t))return r(t,e,n);if(c.string(t))return a(t,e,n);throw new TypeError(\"First argument must be a String, HTMLElement, HTMLCollection, or NodeList\")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function r(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return s(document.body,t,e,n)}var c=t(\"./is\"),s=t(\"delegate\");e.exports=o},{\"./is\":3,delegate:2}],5:[function(t,e,n){function o(t,e){if(r)return r.call(t,e);for(var n=t.parentNode.querySelectorAll(e),o=0;o<n.length;++o)if(n[o]==t)return!0;return!1}var i=Element.prototype,r=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=o},{}],6:[function(t,e,n){function o(t){var e;if(\"INPUT\"===t.nodeName||\"TEXTAREA\"===t.nodeName)t.focus(),t.setSelectionRange(0,t.value.length),e=t.value;else{t.hasAttribute(\"contenteditable\")&&t.focus();var n=window.getSelection(),o=document.createRange();o.selectNodeContents(t),n.removeAllRanges(),n.addRange(o),e=n.toString()}return e}e.exports=o},{}],7:[function(t,e,n){function o(){}o.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){i.off(t,o),e.apply(n,arguments)}var i=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;for(o;i>o;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,a=o.length;a>r;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}},e.exports=o},{}],8:[function(e,n,o){!function(i,r){if(\"function\"==typeof t&&t.amd)t([\"module\",\"select\"],r);else if(\"undefined\"!=typeof o)r(n,e(\"select\"));else{var a={exports:{}};r(a,i.select),i.clipboardAction=a.exports}}(this,function(t,e){\"use strict\";function n(t){return t&&t.__esModule?t:{\"default\":t}}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var i=n(e),r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol?\"symbol\":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(){function t(e){o(this,t),this.resolveOptions(e),this.initSelection()}return t.prototype.resolveOptions=function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=\"\"},t.prototype.initSelection=function t(){this.text?this.selectFake():this.target&&this.selectTarget()},t.prototype.selectFake=function t(){var e=this,n=\"rtl\"==document.documentElement.getAttribute(\"dir\");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener(\"click\",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement(\"textarea\"),this.fakeElem.style.fontSize=\"12pt\",this.fakeElem.style.border=\"0\",this.fakeElem.style.padding=\"0\",this.fakeElem.style.margin=\"0\",this.fakeElem.style.position=\"absolute\",this.fakeElem.style[n?\"right\":\"left\"]=\"-9999px\",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+\"px\",this.fakeElem.setAttribute(\"readonly\",\"\"),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()},t.prototype.removeFake=function t(){this.fakeHandler&&(document.body.removeEventListener(\"click\",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},t.prototype.selectTarget=function t(){this.selectedText=(0,i.default)(this.target),this.copyText()},t.prototype.copyText=function t(){var e=void 0;try{e=document.execCommand(this.action)}catch(n){e=!1}this.handleResult(e)},t.prototype.handleResult=function t(e){e?this.emitter.emit(\"success\",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit(\"error\",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},t.prototype.clearSelection=function t(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},t.prototype.destroy=function t(){this.removeFake()},a(t,[{key:\"action\",set:function t(){var e=arguments.length<=0||void 0===arguments[0]?\"copy\":arguments[0];if(this._action=e,\"copy\"!==this._action&&\"cut\"!==this._action)throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"')},get:function t(){return this._action}},{key:\"target\",set:function t(e){if(void 0!==e){if(!e||\"object\"!==(\"undefined\"==typeof e?\"undefined\":r(e))||1!==e.nodeType)throw new Error('Invalid \"target\" value, use a valid Element');if(\"copy\"===this.action&&e.hasAttribute(\"disabled\"))throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');if(\"cut\"===this.action&&(e.hasAttribute(\"readonly\")||e.hasAttribute(\"disabled\")))throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');this._target=e}},get:function t(){return this._target}}]),t}();t.exports=c})},{select:6}],9:[function(e,n,o){!function(i,r){if(\"function\"==typeof t&&t.amd)t([\"module\",\"./clipboard-action\",\"tiny-emitter\",\"good-listener\"],r);else if(\"undefined\"!=typeof o)r(n,e(\"./clipboard-action\"),e(\"tiny-emitter\"),e(\"good-listener\"));else{var a={exports:{}};r(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,function(t,e,n,o){\"use strict\";function i(t){return t&&t.__esModule?t:{\"default\":t}}function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function a(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function c(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){var n=\"data-clipboard-\"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var l=i(e),u=i(n),f=i(o),d=function(t){function e(n,o){r(this,e);var i=a(this,t.call(this));return i.resolveOptions(o),i.listenClick(n),i}return c(e,t),e.prototype.resolveOptions=function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=\"function\"==typeof e.action?e.action:this.defaultAction,this.target=\"function\"==typeof e.target?e.target:this.defaultTarget,this.text=\"function\"==typeof e.text?e.text:this.defaultText},e.prototype.listenClick=function t(e){var n=this;this.listener=(0,f.default)(e,\"click\",function(t){return n.onClick(t)})},e.prototype.onClick=function t(e){var n=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l.default({action:this.action(n),target:this.target(n),text:this.text(n),trigger:n,emitter:this})},e.prototype.defaultAction=function t(e){return s(\"action\",e)},e.prototype.defaultTarget=function t(e){var n=s(\"target\",e);return n?document.querySelector(n):void 0},e.prototype.defaultText=function t(e){return s(\"text\",e)},e.prototype.destroy=function t(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},e}(u.default);t.exports=d})},{\"./clipboard-action\":8,\"good-listener\":4,\"tiny-emitter\":7}]},{},[9])(9)});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/link/ZerpClipboard/clipboard.js\n ** module id = 92\n ** module chunks = 1 4\n **/","module.exports = \"<a href=\\\"http://v.yinyuetai.com/share/weixin?title={{content}}&url={{url}}\\\" title=\\\"分享到微信\\\" data-video-id=\\\"{{videoId}}\\\" data-tongji-id=\\\"520\\\" class=\\\"weixin J_sharelink\\\" target=\\\"_blank\\\"></a>\\r\\n<a href=\\\"http://connect.qq.com/widget/shareqq/index.html?showcount=1&desc={{desc}}&summary={{summary}}&site=音悦台&pics={{pic}}&title={{title}}&url={{url}}\\\" title=\\\"分享到QQ\\\" data-video-id=\\\"{{videoId}}\\\" data-tongji-id=\\\"518\\\" class=\\\"qq J_sharelink\\\" target=\\\"_blank\\\"></a>\\r\\n<a href=\\\"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{url}}&desc={{content}}&title={{title}}&pics={{pic}}\\\" title=\\\"分享到QQ空间\\\" data-video-id=\\\"{{videoId}}\\\" data-tongji-id=\\\"519\\\" class=\\\"qqzone J_sharelink\\\" target=\\\"_blank\\\"></a>\\r\\n<a href=\\\"http://v.t.sina.com.cn/share/share.php?appkey=1033972380&url={{url}}&title={{content}}&content=gb2312&pic={{pic}}&ralateUid=1698229264\\\" title=\\\"分享到新浪微博\\\" data-video-id=\\\"{{videoId}}\\\" data-tongji-id=\\\"517\\\" class=\\\"weibo J_sharelink\\\" target=\\\"_blank\\\"></a>\\r\\n<span href=\\\"javascript:;\\\" title=\\\"复制地址\\\" data-video-id=\\\"{{videoId}}\\\" data-tongji-id=\\\"517\\\" class=\\\"jia \\\" target=\\\"_blank\\\" id=\\\"copyUrlBtn\\\"  data-clipboard-action=\\\"copy\\\" data-clipboard-target=\\\"#bar\\\"></span>\\r\\n<textarea id=\\\"bar\\\" style=\\\"opacity:0;\\\">{{href}}</textarea>\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/share/template/shareLink.html\n ** module id = 93\n ** module chunks = 1 4\n **/","var user = require('user');\r\nmodule.exports = {\r\n    dealParamsJsonP: function(model, params, useToken) {\r\n        var _params = params || {};\r\n        _params.deviceinfo = '{\"aid\":\"30001001\"}';\r\n        if (!!useToken && user.isLogined()) {\r\n            _params.access_token = 'web-' + user.getToken();\r\n        }\r\n        var promise = model.executeJSONP(_params);\r\n        return promise;\r\n    }\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/tools/modelBefore.js\n ** module id = 117\n ** module chunks = 3 4 5 6 7 8\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/stylesheets/living.scss\n ** module id = 118\n ** module chunks = 4\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar topbar = require('../../module/topbar/topbar.js');\r\nvar DetailView = require('./detail.view.js');\r\nvar HistoryView = require('./history.view.js');\r\nvar View = BaseView.extend({\r\n    el: '',\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        this.topbar = new topbar();\r\n        this.detailView = new DetailView();\r\n        this.historyView = new HistoryView();\r\n\r\n        this.renderPage();\r\n    },\r\n    renderPage: function() {\r\n        //解决游客问题\r\n        $('body').on('click', '.J_close', function() {\r\n            window.location.reload();\r\n        });\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/living/main.view.js\n ** module id = 123\n ** module chunks = 4\n **/","'use strict';\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar DetailModel = require('../../models/living/detail.model.js');\r\nvar url = require('url');\r\nvar FlashApi = require('FlashApi');\r\nvar alertify = require('alertify');\r\nvar gobal = require('gobal');\r\nvar user = require('user');\r\nvar loginBox = require('loginBox');\r\nvar dealModel = require('modelBefore').dealParamsJsonP;\r\nvar ChatView = require('./chat.view.js');\r\nvar Share = require('../../module/share/share.view.js');\r\nvar pay = require('../../module/pay/pay.view.js');\r\nvar View = BaseView.extend({\r\n    el: '.videoWin',\r\n    events: {\r\n        'click .meetable': 'subscribe', //channelId\r\n        'click .disabled': 'unsubscribe', //channelId\r\n        'click .loveBtn': 'like',\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        var urlHASH = url.parseSearch(location.search);\r\n        this.videoId = urlHASH.videoId;\r\n        this.channelId = urlHASH.channelId;\r\n        this.loginBox = loginBox();\r\n        this._dialog = this.loginBox.dialog;\r\n        this.now = 5;\r\n        this.count = 5;\r\n        this.max = 5;\r\n        this.bInitVideo = true;\r\n        this.bStartUp = false;\r\n        this.powerSection = ['13%', '28%', '43%', '58%', '73%', '88%'];\r\n        this.playState = false; //是否开始播放视频;\r\n        this.bFetchVideo = false; //是否阻止更新更新视频信息;\r\n        this.detailModel = new DetailModel();\r\n        this.chatView = new ChatView();\r\n        this.pay = new pay();\r\n        this.renderVideo();\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n        this.videoWin = require('./template/videoDetail.html');\r\n        this.downloadTips = require('./template/downloadTips.html');\r\n        this.tipsTpl = require('./template/tipsMultiCamera.html');\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        if(this.videoId==848){\r\n            this.$el.after(this.tipsTpl);\r\n            var _TipsWin = $('.tipsWin');\r\n            var _close = _TipsWin.find('.close');\r\n            _close.click(function () {\r\n                _TipsWin.remove();\r\n            });\r\n        }\r\n\r\n        var self = this;\r\n        this.DetailPromise = dealModel(this.detailModel, {\r\n            videoId: this.videoId\r\n        }, true);\r\n        window.flashApi = new FlashApi({\r\n            el: 'flashBox',\r\n            props: {\r\n                src: '../../../flash/RTMPInplayer.swf',\r\n                width: 807,\r\n                height: 454\r\n            }\r\n        });\r\n\r\n        this.DetailPromise.done(function(res) {\r\n            //没有找到资源的情况下\r\n            if (res.code == 10027) {\r\n                alert(res.msg);\r\n                window.location.href = 'http://startv.yinyuetai.com/';\r\n                return;\r\n            }\r\n            if (res.msg === \"SUCCESS\") {\r\n\r\n                var rq_db = res.data;\r\n                self.renderVideoMsg(rq_db);\r\n                self.renderShare(rq_db);\r\n                var status = self._dialog.status();\r\n                self.chatView.trigger('events:setChatroomId', rq_db);\r\n                if (!user.isLogined()) {\r\n                    if (status == 'hide') {\r\n                        self._dialog.trigger('show');\r\n                    } else {\r\n                        self._dialog.trigger('hide');\r\n                    }\r\n                    return false;\r\n                }\r\n                self.longPolling();\r\n            } else {\r\n                throw new Error(res.msg)\r\n            }\r\n        });\r\n    },\r\n    renderVideo: function() {\r\n        var self = this;\r\n        this.listenTo(this.detailModel, 'change', function() {\r\n            if (!user.isLogined()) return;\r\n            var rq_db = this.detailModel.get('data');\r\n            var rq_status = this.detailModel.get('msg');\r\n            if (rq_status !== 'SUCCESS') return;\r\n            if (rq_db.failureType === 'NONE') {\r\n                //有播放的权限\r\n                if (rq_db.encryptionType == 'NONE') {\r\n                    if(!rq_db.multiSeats){\r\n                        self.loadVideo();\r\n                    }else{\r\n                        var html = this.compileHTML(this.downloadTips, {\r\n                            name: rq_db.videoName,\r\n                            erwm: require('../../../images/pay/er.png')\r\n                        });\r\n                        $('.payDialog').html(html).show();\r\n                        $('.payDialog').on('click', '.closeErm', function() {\r\n                            window.location.href = './';\r\n                        });\r\n                    }\r\n\r\n                } else {\r\n                    var html = this.compileHTML(this.downloadTips, {\r\n                        name: rq_db.videoName,\r\n                        erwm: require('../../../images/pay/er.png')\r\n                    });\r\n                    $('.payDialog').html(html).show();\r\n                    $('.payDialog').on('click', '.closeErm', function() {\r\n                        window.location.href = './';\r\n                    });\r\n                }\r\n            } else if (rq_db.failureType === 'NOTLOGIN') {\r\n                //涉及登陆的问题\r\n                this.bFetchVideo = true;\r\n            } else if (rq_db.failureType === 'CHARGE') {\r\n                //收费\r\n                this.bFetchVideo = true;\r\n                this.pay.judgeRight(rq_db);\r\n            } else {\r\n                //需要引导到app\r\n                this.bFetchVideo = true;\r\n                console.log('引导');\r\n            }\r\n        });\r\n    },\r\n    //长轮询视频信息\r\n    longPolling: function() {\r\n        var self = this;\r\n        long();\r\n\r\n        function long() {\r\n            gobal.jsonp('/video/longpolling.json', {\r\n                videoId: self.videoId\r\n            }, function(res) {\r\n                if(20010===~~res.code){\r\n                    alert(res.msg);\r\n                    window.location.href = 'http://login.yinyuetai.com/logout';\r\n                }\r\n                if (res.msg === 'SUCCESS') {\r\n                    var rq_db = res.data;\r\n                    $('.usersCount').html(rq_db.visitCount);\r\n                    $('.lovesCount').html(rq_db.likeCount);\r\n                    $('.com_name i').html(rq_db.bulletCurtain);\r\n                    //判断是否开始\r\n                    if (rq_db.playStart) {\r\n                        if (!self.playState && !self.bFetchVideo) {\r\n                            self.playState = true;\r\n                            var promise = dealModel(self.detailModel, {\r\n                                videoId: self.videoId\r\n                            }, true);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        setInterval(long, 15000);\r\n    },\r\n    //加载视频到播放器\r\n    loadVideo: function() {\r\n        this.playState = true;\r\n        var videoObj, videoBoo, rq_db, flashApi;\r\n        flashApi = window.flashApi;\r\n        rq_db = this.detailModel.get('data');\r\n        if (rq_db.videoType === 'LIVE') {\r\n            videoObj = rq_db.liveStream;\r\n            // videoObj.key = rq_db.channel.channelId+'-'+urlHASH.videoId+'-'+rq_db.videoType;\r\n            $('.flash_shadow').hide();\r\n            videoBoo = true;\r\n            flashApi.onReady(function() {\r\n                try {\r\n                    flashApi.init(videoObj, videoBoo);\r\n                } catch (e) {\r\n\r\n                }\r\n            });\r\n        } else {\r\n            videoObj = rq_db.vodStream;\r\n            videoBoo = false;\r\n            flashApi.onReady(function() {\r\n                try {\r\n                    $('.flash_shadow').hide();\r\n                    flashApi.init(videoObj, videoBoo);\r\n                } catch (e) {\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n    },\r\n    renderVideoMsg: function(rq_db) {\r\n        rq_db.liveLog = require('../../../images/living/live-ico2.png');\r\n        var html = this.compileHTML(this.videoWin, rq_db);\r\n        this.$el.append(html);\r\n\r\n    },\r\n    renderShare: function(rq_db) {\r\n        // var rq_db = this.bannerModel.get('data');\r\n        var opts = {\r\n            title: '【' + rq_db.videoName + '】的直播太精彩了！',\r\n            url: window.location.href,\r\n            summary: '【' + rq_db.videoName + '】的直播太精彩了！',\r\n            content: '【' + rq_db.videoName + '】的直播太精彩了！',\r\n            pic: rq_db.posterPic,\r\n            channelId: rq_db.channelId,\r\n            desc: ''\r\n        };\r\n        this.share = new Share({\r\n            el : '.share',\r\n        });\r\n        this.share.trigger('events:initAttr',opts);\r\n    },\r\n    like: function(e) {\r\n        var self = this;\r\n        var self = this;\r\n        var status = self._dialog.status();\r\n        if (!user.isLogined()) {\r\n            if (status == 'hide') {\r\n                self._dialog.trigger('show');\r\n            } else {\r\n                self._dialog.trigger('hide');\r\n            }\r\n            return false;\r\n        }\r\n        var $power = $(e.currentTarget).find('.power');\r\n        if (this.count === 0) {\r\n            return;\r\n        }\r\n         window.flashApi.like();\r\n        if(!self.bStartUp){\r\n            self.upPower();\r\n        }\r\n        self.bStartUp = true;\r\n        updataCount_like();\r\n        self.now--;\r\n        self.count = self.now;\r\n        if (self.now < 0) {\r\n            self.now = 0;\r\n        }\r\n        gobal.jsonp('/video/count.json', {\r\n            videoId: self.videoId,\r\n            type: 4,\r\n            count: 1\r\n        }, function(res) {\r\n            if (res.msg === 'SUCCESS') {\r\n                // window.flashApi.like();\r\n                // if(!self.bStartUp){\r\n                //     self.upPower();\r\n                // }\r\n                // self.bStartUp = true;\r\n                // updataCount_like();\r\n                // self.now--;\r\n                // console.log(self.now--);\r\n                // self.count = self.now;\r\n                // if (self.now < 0) {\r\n                //     self.now = 0;\r\n                // }\r\n            }\r\n        }, function(res) {\r\n            console.log(res);\r\n        }, true);\r\n\r\n    },\r\n    upPower: function() {\r\n        var self = this;\r\n        setInterval(upP, 1000);\r\n        var $power = $('.loveBtn .power');\r\n        function upP() {\r\n            if (self.now >= (self.max+1)) {\r\n                self.now = self.max;\r\n                self.count = self.now;\r\n                return;\r\n            }\r\n            $power.css({\r\n                height :  self.powerSection[self.now]\r\n            });\r\n            self.now++;\r\n            self.count = self.now;\r\n\r\n        }\r\n    },\r\n    subscribe: function(e) {\r\n        var self = this;\r\n        var $this = $(e.currentTarget);\r\n        var status = this._dialog.status();\r\n        if (!user.isLogined()) {\r\n            if (status == 'hide') {\r\n                this._dialog.trigger('show');\r\n            } else {\r\n                this._dialog.trigger('hide');\r\n            }\r\n            return false;\r\n        }\r\n        var subscribe_params = {\r\n            channelId: this.channelId\r\n        };\r\n        gobal.jsonp('/channel/subscribe.json', subscribe_params, function(res) {\r\n            if (res.msg === \"SUCCESS\") {\r\n                alertify.success('订阅成功');\r\n                $this.removeClass('meetable').addClass('disabled').html('已订阅');\r\n            }\r\n            console.log(\"success\");\r\n        }, this.error, true);\r\n    },\r\n    unsubscribe: function(e) {\r\n        var self = this;\r\n        var $this = $(e.currentTarget);\r\n        var subscribe_params = {\r\n            channelId: this.channelId\r\n        };\r\n        gobal.jsonp('/channel/unsubscribe.json', subscribe_params, function(res) {\r\n            if (res.msg === \"SUCCESS\") {\r\n                alertify.error('取消订阅成功');\r\n                $this.removeClass('disabled').addClass('meetable').html('订阅频道');\r\n            }\r\n        }, this.error, true);\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    }\r\n});\r\n\r\nfunction updataCount_like(argument) {\r\n    var $like_count = $('.lovesCount');\r\n    var num = $like_count.html().replace(/\\d+/, function(d) {\r\n        d++;\r\n        return d;\r\n    });\r\n    $like_count.html(num);\r\n}\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/living/detail.view.js\n ** module id = 124\n ** module chunks = 4\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/video/detail.json',\r\n    beforeEmit: function beforeEmit() {\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n    }\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceModel = function sharedInstanceModel() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\n\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/models/living/detail.model.js\n ** module id = 125\n ** module chunks = 4\n **/","/**\r\n * @time 2016年3月18日\r\n * @author icepy\r\n * @info 封装Flash接口\r\n */\r\n\r\n'use strict';\r\n// exports.FlashAPI = function () {\r\nvar flashTemp =\r\n    '<object width=\"{width}\" height=\"{height}\"  align=\"middle\" id=\"{id}\" type=\"application/x-shockwave-flash\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\">' +\r\n    '<param value=\"{src}\" name=\"movie\">' +\r\n    '<param value=\"{always}\" name=\"allowscriptaccess\">' +\r\n    '<param value=\"{fullscreen}\" name=\"allowfullscreen\">' +\r\n    '<param value=\"{quality}\" name=\"quality\">' +\r\n    '<param value=\"{flashvars}\" name=\"flashvars\">' +\r\n    '<param value=\"{wmode}\" name=\"wmode\" />' +\r\n    '<embed width=\"{width}\" height=\"{height}\"  name=\"{id}\" type=\"application/x-shockwave-flash\" src=\"{src}\" allowscriptaccess=\"{always}\" allowfullscreen=\"{fullscreen}\" quality=\"{quality}\"  wmode=\"{wmode}\" flashvars=\"{flashvars}\" />' +\r\n    '</object>';\r\nvar win = window;\r\nvar origin = win.location.origin;\r\nvar isWindows = win.navigator.appName.indexOf(\"Microsoft\") != -1;\r\nvar uid = 999;\r\nwin.YYTPCFlashReadyState = false;\r\n/**\r\n    {\r\n        \"props\":{\r\n            构建页面所依赖的数据源\r\n        },\r\n        \"methods\":{\r\n\r\n        },\r\n        el\r\n    }\r\n */\r\nvar getSwfDOM = function(id) {\r\n    var swf, embed, el = document.getElementById(id) || null;\r\n    if (el && el.nodeName.toUpperCase() == 'OBJECT') {\r\n        if (typeof el.SetVariable != 'undefined') {\r\n            swf = el;\r\n        } else {\r\n            embed = el.getElementsByTagName('embed')[0];\r\n            if (embed) {\r\n                swf = embed;\r\n            }\r\n        }\r\n    }\r\n    return swf;\r\n};\r\nvar render = function(tpl, data) {\r\n    if (data) {\r\n        return tpl.replace(/\\{(.*?)\\}/ig, function() {\r\n            return data[arguments[1]] || \"\";\r\n        });\r\n    }\r\n    return tpl;\r\n};\r\nvar FlashAPI = function(options) {\r\n    this.$el = typeof options.el === 'string' ? document.getElementById(options.el) : options.el;\r\n    this._options = options;\r\n    this._props = options.props || {};\r\n    this.$attrs = {\r\n        'id': 'YYTFlash' + (uid++), //配置id\r\n        'src': this._props.src || origin + '/flash/RTMPInplayer.swf?t=20160407.6', //引入swf文件\r\n        'width': this._props.width || 808,\r\n        'height': this._props.height || 428,\r\n        'wmode': this._props.wmode || 'transparent', //控制显示模型\r\n        'flashvar': this._props.flashvar || '', //初始化参数\r\n        'always': this._props.always || 'always', //控制是否交互\r\n        'fullscreen': this._props.fullscreen || true, //控制是否全屏\r\n        'quality': this._props.quality || 'high'\r\n    };\r\n    this._html = render(flashTemp, this.$attrs);\r\n    this._methods = options.methods || {};\r\n    this._ready = false;\r\n    this._init();\r\n};\r\nFlashAPI.prototype._init = function() {\r\n    this.$el.innerHTML = this._html;\r\n    this.$swf = getSwfDOM(this.$attrs.id);\r\n    window.$swf = this.$swf;\r\n};\r\nFlashAPI.prototype.onReady = function(callback) {\r\n    var self = this;\r\n    if (win.YYTPCFlashReadyState || this._ready) {\r\n        callback.call(this);\r\n    } else {\r\n        this.$timer = setInterval(function() {\r\n            if (win.YYTPCFlashReadyState) {\r\n                self._ready = true;\r\n                win.YYTPCFlashReadyState = false;\r\n                clearInterval(self.$timer);\r\n                self.$timer = null;\r\n                callback.call(self);\r\n            }\r\n        }, 0)\r\n    };\r\n};\r\nFlashAPI.prototype.init = function(data, boo) {\r\n    this.$swf.initData(data, boo);\r\n};\r\nFlashAPI.prototype.isReady = function() {\r\n    return this._ready;\r\n};\r\nFlashAPI.prototype.addUrl = function(url, name) {\r\n    this.$swf.setvedioUrl(url, name);\r\n};\r\nFlashAPI.prototype.setName = function(arr) {\r\n    this.$swf.set_name(arr);\r\n    //[{left:boo,url:avatorUrl,name:'sam'}]\r\n};\r\nFlashAPI.prototype.bubble = function(index, txt) {\r\n    this.$swf.set_say(index, txt);\r\n    //索引值从0开始,与set_name对应\r\n};\r\nFlashAPI.prototype.width = function(value) {\r\n    if (typeof value === 'string') {\r\n        value = ~~value;\r\n    };\r\n    this.$swf.setPlayerWidth(value);\r\n};\r\nFlashAPI.prototype.height = function(value) {\r\n    if (typeof value === 'string') {\r\n        value = ~~value;\r\n    };\r\n    this.$swf.setPlayerHeight(value);\r\n};\r\nFlashAPI.prototype.notifying = function(obj) {\r\n    this.$swf.setOneMessageInchat(JSON.stringify(obj));\r\n};\r\nFlashAPI.prototype.clear = function() {\r\n    this.$swf.cleanAllMessage();\r\n};\r\nFlashAPI.prototype.like = function() {\r\n    this.$swf.clickHurt();\r\n}\r\n\r\nvar shared = null;\r\nFlashAPI.sharedInstanceFlashAPI = function(options) {\r\n    if (!shared) {\r\n        shared = new FlashAPI(options)\r\n    }\r\n    return shared;\r\n};\r\nwin.YYTPCFlashOnReady = function() {\r\n    //flash init success\r\n    win.YYTPCFlashReadyState = true;\r\n};\r\nmodule.exports = FlashAPI;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/util/FlashApi.js\n ** module id = 126\n ** module chunks = 4 6 8\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar imServer = require('imServer');\r\nvar chat = require('../../module/webIM/dealChat');\r\nvar user = require('user');\r\nvar alertify = require('alertify');\r\nvar Backbone = window.Backbone;\r\nvar ChatModel = Backbone.Model.extend({});\r\nvar chatModel = new ChatModel();\r\nvar View = BaseView.extend({\r\n    el: '.commentWin',\r\n    model: chatModel,\r\n    events: {\r\n        'click .inputBox .button': 'clickSendMsg',\r\n        'keydown .input_comment': 'clockSendMsg',\r\n        'click .closeScroll': 'closeScroll',\r\n        'click .clearScroll': 'clearScroll',\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        this.bSend = true;\r\n        this.bScroll = true;\r\n        this.bStopHistory = false;\r\n        this.chatroomIds = [];\r\n        this._MsgCount = $('.com_name i');\r\n        this.bInit = false;\r\n        this.bOne = true;\r\n        this._txt = this.$el.find('.input_comment');\r\n        this.commentList = this.$el.find('.nowList');\r\n        this.historyList = this.$el.find('.historyList');\r\n        this._con = this.$el.find('.comment_con');\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n        this.chatItemTpl = require('./template/chat.html');\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        this.initCountChat = parseInt(this._MsgCount.html());\r\n        var self = this;\r\n        this.onEvents();\r\n        this.listenTo(this.model, 'change', this.renderChat);\r\n        this.countInit = 0;\r\n    },\r\n    onEvents: function() {\r\n        var self = this;\r\n        this.on('events:setChatroomId', function(attr, isTranslator) {\r\n            var chatroomId = attr.chatroomId;\r\n            this.videoId = attr.videoId;\r\n\r\n            if (/\\]/i.test(chatroomId)) {\r\n                this.chatroomIds = eval(chatroomId);\r\n            } else {\r\n                this.chatroomIds.push(chatroomId);\r\n            }\r\n            this.isTranslator = isTranslator || false;\r\n            chat.init({\r\n                chatroomIds: this.chatroomIds,\r\n                videoId: this.videoId,\r\n                view: this,\r\n                userMsg: user\r\n            }, function(res) {\r\n                self.bInit = res;\r\n            })\r\n            var timer = setInterval(function() {\r\n                if (self.bInit) {\r\n                    // self.applyGround();\r\n                    clearInterval(timer);\r\n                }\r\n            }, 1000);\r\n        });\r\n        this.on('events:normal', function() {\r\n            this.syncMsg();\r\n        });\r\n        this.on('events:loadHistory',function () {\r\n            this.renderHistory();\r\n        });\r\n        this.on('events:initHistory',function () {\r\n            this.renderHistory();\r\n            this._con.scrollTop(10000);\r\n            function scroll() {\r\n                if(self._con.scrollTop()<15){\r\n                    chat.getSyncGroupMsgs();\r\n                }\r\n            }\r\n            var delay = _.throttle(scroll,500);\r\n            this._con.scroll(delay);\r\n        });\r\n    },\r\n    renderChat: function() {\r\n        if(this.bOne){\r\n            this.bOne = false;\r\n            this.countInit = parseInt(this._MsgCount.html());\r\n        }\r\n        var self = this;\r\n        var html = '';\r\n        var countChat = 0;\r\n        $.each(chatModel.attributes, function(index, el) {\r\n            html += self.compileHTML(self.chatItemTpl, el);\r\n            countChat ++;\r\n        });\r\n\r\n        this.commentList.html(html);\r\n        this._MsgCount.html(this.countInit+countChat);\r\n        if (this.bScroll) {\r\n            this._con.scrollTop(10000000);\r\n        }\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    },\r\n    syncMsg: function() {\r\n        chatModel.set(chat.msgCon.normal);\r\n    },\r\n    renderHistory : function () {\r\n        var len = chat.msgCon.historyList.length;\r\n        if(this.bStopHistory)return;\r\n        if(len<20){\r\n            this.bStopHistory = true;\r\n        }\r\n        for (var i = 0; i < len; i++) {\r\n            var pop = chat.msgCon.historyList.pop();\r\n            var html = this.compileHTML(this.chatItemTpl,pop);\r\n            this.historyList.prepend(html);\r\n        }\r\n        this._con.scrollTop(500);\r\n    },\r\n    clickSendMsg: function() {\r\n        this.sendMsg();\r\n    },\r\n    //回车发送消息\r\n    clockSendMsg: function(e) {\r\n        if (e.keyCode == 13) {\r\n            if (!user.isLogined()) {\r\n                require(['loginBox'], function(loginBox) {\r\n                    if (loginBox.status() == 'hide') {\r\n                        loginBox.trigger('show');\r\n                    } else {\r\n                        loginBox.trigger('hide');\r\n                    }\r\n                });\r\n                return false;\r\n            }\r\n            this.sendMsg();\r\n            return false;\r\n        }\r\n    },\r\n    //关闭滚屏\r\n    closeScroll: function(e) {\r\n        var $this = $(e.currentTarget);\r\n        if (this.bScroll === true) {\r\n            this.bScroll = false;\r\n            $this.html('开启滚屏');\r\n            $this.addClass('on');\r\n        } else {\r\n            this.bScroll = true;\r\n            $this.html('关闭滚屏');\r\n            $this.removeClass('on');\r\n            this._con.scrollTop(10000000);\r\n        }\r\n    },\r\n    //清理消息\r\n    clearScroll: function() {\r\n        chat.chatItems = [];\r\n        this.countInit = parseInt(this._MsgCount.html());\r\n        if(chat.msgCon.normal){\r\n            chat.msgCon.normal.length = 0;\r\n        }\r\n\r\n        chatModel.clear();\r\n        this.historyList.html('');\r\n        this.renderHistory = function(){};\r\n        // window.flashApi.clear();\r\n    },\r\n    sendMsg: function() {\r\n        var self = this;\r\n        if (!this.bSend) {\r\n            alertify.error('亲，不能发送太频繁了!');\r\n            return;\r\n        }\r\n        if(this.bOne){\r\n            this.bOne = false;\r\n            this.countInit = parseInt(this._MsgCount.html())\r\n        }\r\n        this.bSend = false;\r\n        setTimeout(function() {\r\n            self.bSend = true;\r\n        }, 30);\r\n        var txt = this._txt.val();\r\n        if (txt === '') {\r\n            alertify.error('亲~消息不能为空');\r\n            return;\r\n        }\r\n        var c = parseInt(this._MsgCount.html());\r\n        this._MsgCount.html(c+1);\r\n        this._txt.val('');\r\n        chat.sendMsg(txt);\r\n    }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/living/chat.view.js\n ** module id = 127\n ** module chunks = 4\n **/","/*\r\n *author liminshen 2016/08/04\r\n *腾讯云\r\n *功能 1.初始化im 2.发送普通消息 3.发送红包消息 4.加入群组 5.退出群组 6.获取群组列表 7.获取漫游消息列表\r\n */\r\n'use strict';\r\nvar base = require('base-extend-backbone');\r\nvar IMModel = require('IMModel');\r\nvar imModel = IMModel.sharedInstanceIMModel();\r\nvar store = base.storage;\r\nvar webim = window.webim;\r\nvar _ = require('underscore');\r\nvar $ = require('jquery');\r\n\r\nvar imServer = {\r\n    groupIdList: [],\r\n    setting: {\r\n        listeners: {\r\n            onMsgNotify: null,\r\n            onGroupInfoChangeNotify: null,\r\n            groupSystemNotifys: null\r\n        }\r\n    },\r\n    NextMsgSeq : -1,\r\n    canJoin : false,//是否允许加入群，当所有以前的群退出后变成true\r\n};\r\n\r\nimServer.init = function(listeners) {\r\n    var self = this;\r\n    var defer = $.Deferred();\r\n    var promise = imModel.fetchIMUserSig();\r\n    promise.then(function(imSig) {\r\n        var loginInfo = {\r\n            sdkAppID: imSig.imAppid, // 用户所属应用id\r\n            appIDAt3rd: imSig.imAppid, // 用户所属应用id\r\n            accountType: imSig.imAccountType, // 用户所属应用帐号类型\r\n            identifier: imSig.imIdentifier, // 当前用户ID\r\n            userSig: imSig.userSig // 当前用户身份凭证\r\n        };\r\n        self.im = loginInfo;\r\n        if (imSig && listeners) {\r\n            // 腾讯IM初始化\r\n            // webim.init(loginInfo, listeners, null);\r\n            webim.login(loginInfo, listeners, {isLogOn:false}, function(res) {\r\n                self.getJoinedGroupListHigh();\r\n                defer.resolve(res);\r\n            }, function(err) {\r\n                console.log(err);\r\n                defer.reject();\r\n            });\r\n        } else {\r\n            defer.reject();\r\n        }\r\n    }, function(err) {\r\n        console.log(err);\r\n        defer.reject();\r\n    });\r\n    return defer.promise();\r\n};\r\n/**\r\n * 发送普通消息\r\n *\r\n */\r\nimServer.sendMessage = function(attrs) {\r\n    var defer = $.Deferred();\r\n    var currentSession = webim.MsgStore.sessByTypeId('GROUP', attrs.groupId);\r\n    var random = Math.floor(Math.random() * 10000);\r\n    var sendMsg;\r\n    var msg;\r\n    if (!currentSession) {\r\n        // var currentSession = new webim.Session('GROUP', attrs.groupId, attrs.groupId, '', random);\r\n        currentSession = new webim.Session('GROUP', attrs.groupId, attrs.groupId, '', random);\r\n    }\r\n    if (currentSession) {\r\n        sendMsg = new webim.Msg(currentSession, true);\r\n        msg = new webim.Msg.Elem('TIMCustomElem', {\r\n            data: JSON.stringify(attrs.msg)\r\n        });\r\n        sendMsg.elems.push(msg);\r\n        sendMsg.fromAccount = this.im.imIdentifier;\r\n        webim.sendMsg(sendMsg, function(resp) {\r\n            defer.resolve(resp);\r\n        }, function(err) {\r\n            defer.reject(err);\r\n        });\r\n    }\r\n    return defer.promise();\r\n};\r\n/**\r\n * 红包消息\r\n *  attrs.subType\r\n *  attrs.msg.fromAccount\r\n */\r\nimServer.sendMsg = function(attrs) {\r\n    var defer = $.Deferred();\r\n    var currentSession = webim.MsgStore.sessByTypeId('GROUP', attrs.groupId);\r\n    var random = Math.round(Math.random() * 4294967296); // 消息随机数，用于去重\r\n\r\n    if (!currentSession) {\r\n        currentSession = new webim.Session(\r\n            webim.SESSION_TYPE.GROUP, attrs.groupId, attrs.groupId, '', random);\r\n    }\r\n    var seq = -1; // 消息序列，-1表示sdk自动生成，用于去重\r\n    var msgTime = Math.round(new Date().getTime() / 1000); // 消息时间戳\r\n    var subType = attrs.subType || webim.GROUP_MSG_SUB_TYPE.REDPACKET;\r\n    var msg = new webim.Msg(\r\n        currentSession,\r\n        true, seq, random, msgTime, attrs.msg.fromAccount, subType, '');\r\n    var textObj = new webim.Msg.Elem('TIMCustomElem', {\r\n        data: JSON.stringify(attrs.msg)\r\n    });\r\n    msg.fromAccount = this.im.imIdentifier;\r\n    msg.elems.push(textObj);\r\n    webim.sendMsg(msg, function(resp) {\r\n        defer.resolve(resp);\r\n    }, function(err) {\r\n        defer.reject(err);\r\n    });\r\n    return defer.promise();\r\n};\r\n/*\r\n *退出群组\r\n */\r\nimServer.quitGroup = function(chatroomId, cb) {\r\n    var self = this;\r\n    webim.quitGroup({\r\n        'GroupId': chatroomId\r\n    }, function(res) {\r\n        cb && cb(res)\r\n    }, function(res) {\r\n        cb && cb(res)\r\n    });\r\n};\r\n/**\r\n * 加入群组\r\n * @param  {[type]}   chatroomId 房间号\r\n * @param  {Function} cb         申请结果回到函数\r\n * @return {[type]}              [description]\r\n */\r\nimServer.applyJoinGroup = function(chatroomId, cb) {\r\n    var self = this;\r\n    this.chatroomId = chatroomId;\r\n    function callback(res) {\r\n        self.getGroupInfo(function (res) {\r\n            self.NextMsgSeq = res.GroupInfo[0].NextMsgSeq;\r\n        });\r\n        cb && cb(res);\r\n    }\r\n    webim.applyJoinGroup({\r\n        GroupId: chatroomId\r\n    }, callback, callback);\r\n};\r\n/**\r\n * 获取群组列表\r\n * @param  {Function}   cbOk\r\n * @return [Function]   cbFail\r\n */\r\nimServer.getGroupInfo = function(cbOk, cbFail) {\r\n    var opts = {\r\n        'GroupIdList': [\r\n            this.chatroomId\r\n        ],\r\n        'GroupBaseInfoFilter': [\r\n            'Type',\r\n            'Name',\r\n            'Introduction',\r\n            'Notification',\r\n            'FaceUrl',\r\n            'CreateTime',\r\n            'Owner_Account',\r\n            'LastInfoTime',\r\n            'LastMsgTime',\r\n            'NextMsgSeq',\r\n            'MemberNum',\r\n            'MaxMemberNum',\r\n            'ApplyJoinOption'\r\n        ],\r\n        'MemberInfoFilter': [\r\n            'Account',\r\n            'Role',\r\n            'JoinTime',\r\n            'LastSendMsgTime',\r\n            'ShutUpUntil'\r\n        ]\r\n    };\r\n    webim.getGroupInfo(opts, cbOk, cbFail);\r\n};\r\n/**\r\n * 获取群组历史消息\r\n * @param  {[type]} cbOk   [description]\r\n * @param  {[type]} cbFail [description]\r\n * @return {[type]}        [description]\r\n */\r\nimServer.getSyncGroupMsgs = function(ReqMsgSeq,cbOk) {\r\n    var self = this;\r\n    var ReqMsgSeq = this.NextMsgSeq-1-ReqMsgSeq;\r\n    var opts = {\r\n        'GroupId': self.chatroomId,\r\n        'ReqMsgSeq': ReqMsgSeq,\r\n        'ReqMsgNumber': 20\r\n    };\r\n    if (opts.ReqMsgSeq === null || opts.ReqMsgSeq === undefined || opts.ReqMsgSeq <0) {\r\n        console.log('群消息序列号非法');\r\n        return;\r\n    }\r\n    webim.syncGroupMsgs(opts,function(res) {\r\n        res.NextMsgSeq = self.NextMsgSeq - 20;\r\n        self.NextMsgSeq = res.NextMsgSeq;\r\n        if(self.NextMsgSeq<=0){\r\n            self.NextMsgSeq = 0;\r\n        }\r\n        cbOk&&cbOk(res);\r\n    });\r\n};\r\n/**\r\n *\r\n * @param  {[type]}   inputMsg 输入的消息字符串\r\n * @param  {Function} done     成功回调函数,包含结果，消息对象\r\n * @param  {[type]}   fail     失败回调函数,包含错误信息\r\n * @return {[type]}            [description]\r\n */\r\nimServer.getJoinedGroupListHigh = function() {\r\n    var self = this;\r\n    var option = {\r\n        'Member_Account': self.im.identifier,\r\n        'Limit': 20,\r\n        'Offset': 0,\r\n    };\r\n    function callback(res) {\r\n        self.groupIdList = res.GroupIdList;\r\n        if(self.groupIdList.length==0){\r\n            self.canJoin = true;\r\n        }\r\n        for (var i = 0; i < self.groupIdList.length; i++) {\r\n            (function (index) {\r\n                self.quitGroup(self.groupIdList[index].GroupId,function () {\r\n                    if(index==self.groupIdList.length-1){\r\n                        self.canJoin = true;\r\n                    }\r\n                });\r\n            })(i)\r\n\r\n        }\r\n    }\r\n    webim.getJoinedGroupListHigh(option, callback, callback);\r\n};\r\nmodule.exports = imServer;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/webIM/IMServer.js\n ** module id = 128\n ** module chunks = 4 6 8\n **/","/**\r\n * @time {时间}\r\n * @author {编写者}\r\n * @info {实现的功能}\r\n */\r\n\r\n'use strict';\r\n\r\nvar $ = require('jquery');\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\nvar storage = base.storage;\r\nvar UserModel = require('UserModel');\r\nvar user = UserModel.sharedInstanceUserModel();\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/user/sig_get.json',\r\n    beforeEmit: function() {\r\n        // 如果需要开启对请求数据的本地缓存，可将下列两行注释去掉\r\n        // this.storageCache = true; //开启本地缓存\r\n        // this.expiration = 1; //设置缓存过期时间（1表示60*60*1000 一小时）\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n        this.notTokenURL = this.url;\r\n        this.imData = null;\r\n    },\r\n    /**\r\n     * [isAnchor 判断是否为主播]\r\n     * @return {Boolean} [description]\r\n     */\r\n    isAnchor: function() {\r\n        return !!this.get('data').anchor;\r\n    },\r\n    setTokenUrl: function(token) {\r\n        this.imData = {\r\n            deviceinfo: '{\"aid\":\"30001001\"}',\r\n            access_token: 'web-' + token\r\n        };\r\n    },\r\n    setNoTokenUrl: function() {\r\n        this.imData = {\r\n            deviceinfo: '{\"aid\":\"30001001\"}'\r\n        };\r\n    },\r\n    /**\r\n     * [fetchIMUserSig 获取IM签名]\r\n     * @param  {Function} callback [description]\r\n     * @param  {[type]}   error    [description]\r\n     * @return {[type]}            [description]\r\n     */\r\n    fetchIMUserSig: function() {\r\n        //  先获取本地签名\r\n        var defer = $.Deferred();\r\n        var token;\r\n        var imSig;\r\n        imSig = storage.get('imSig');\r\n        if (imSig) {\r\n            this.set({\r\n                data: imSig\r\n            });\r\n            defer.resolve(imSig);\r\n            return defer.promise();\r\n        }\r\n        token = user.getToken();\r\n        if (token) {\r\n            this.setTokenUrl(token);\r\n        }\r\n        var sigModelPromise = this.executeJSONP(this.imData);\r\n        sigModelPromise.done(function(response) {\r\n            var data = response.data;\r\n            storage.set('imSig', data);\r\n            defer.resolve(data);\r\n        });\r\n        sigModelPromise.fail(function(e) {\r\n            defer.reject(e);\r\n        });\r\n        return defer.promise();\r\n    },\r\n    //  更新缓存\r\n    updateIMUserSig: function() {\r\n        var defer = $.Deferred();\r\n        var token;\r\n        storage.remove('imSig');\r\n        token = user.getToken();\r\n        if (token) {\r\n            this.setTokenUrl(token);\r\n        }\r\n        var sigModelPromise = this.executeJSONP();\r\n        sigModelPromise.done(function(response) {\r\n            var data = response.data;\r\n            storage.set('imSig', data);\r\n            defer.resolve(data);\r\n        });\r\n        sigModelPromise.fail(function(e) {\r\n            defer.reject(e);\r\n        });\r\n        return defer.promise();\r\n    },\r\n    remove: function() {\r\n        storage.remove('imSig');\r\n    }\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceIMModel = function() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/IMModel/index.js\n ** module id = 129\n ** module chunks = 4 6 8\n **/","/*\r\n*   time 2016/08/10\r\n*   author liminshen\r\n*   传入对应的view来实现IM和view的通讯\r\n*   兼容了翻译者加入多群组的聊天室，发送多聊天室功能\r\n*   添加先退所有群后加当前房间的IM群功能,保持性能最优化\r\n*/\r\n/*\r\n*   time 2016/08/13\r\n*   author liminshen\r\n*   添加了消息缓存机制,增加了消息结构的拓展性，和为上传消息内容做一个准备\r\n*   优化事件触发机制，启用订阅发布模式  pushChatItem\r\n*   添加了限制消息长度的设置\r\n*/\r\n'use strict';\r\nvar imServer = require('imServer');\r\n\r\nfunction jsonpCallback(rspData) {\r\n    //设置jsonp返回的\r\n    webim.setJsonpLastRspData(rspData);\r\n}\r\n//初始化信息\r\n//attr需要的属性，初始化成功的回调\r\nfunction init(attr,cb) {\r\n    var self = this;\r\n    this.view = attr.view||null;//传入聊天对应的view\r\n    this.userMsg = attr.userMsg;//用户的信息\r\n    this.msgCon = {};//消息的容器，缓存所有当前的消息\r\n    this.chatroomIds = attr.chatroomIds||[];//房间列表\r\n    this.videoId = attr.videoId;//当前房间的videoId\r\n    this.isLimitMsgLength = attr.isLimitMsgLength || true;//默认限制\r\n    this.limitMsgLength = attr.limitMsgLength || 1000;//默认限制条数\r\n    this.limitScale = attr.limitScale || 10;//默认删除消息的比例\r\n    this._cutLen = this.limitMsgLength/this.limitScale;//默认限制条数\r\n    this.bInit = false;\r\n    this.listeners = {\r\n        onMsgNotify: this.notifyMsg,\r\n        jsonpCallback: jsonpCallback, //IE9以下的jsonp回调函数\r\n        onGroupInfoChangeNotify: null,\r\n        groupSystemNotifys: this.groupSystemNotifys()\r\n    };\r\n    imServer.init(this.listeners).done(function(res) {\r\n        if (~~res.ErrorCode === 0) {\r\n            cb(true);\r\n            // self.bInit = true;\r\n            self.applyGround();\r\n        }\r\n    });\r\n    return this;\r\n}\r\nfunction notifyMsg (notifyInfo) {\r\n    var _this = chat;\r\n    // 监听漫游消息\r\n        var vId = _this.videoId;\r\n        if (notifyInfo.length === 0) return;\r\n        for (var i in notifyInfo) {\r\n            var val = notifyInfo[i];\r\n            if (val.msg) {\r\n                val = val.msg;\r\n            }\r\n            if (val.isSend === false) {\r\n                var syncMsgText = val.elems[0].content.data;\r\n                var MsgJson = $.parseJSON(syncMsgText);\r\n                if (MsgJson.videoId == vId) {\r\n                    //翻译\r\n                    if (MsgJson.msgType === 3) {\r\n                        pushChatItem('translator',MsgJson);\r\n                        window.flashApi.notifying(MsgJson);\r\n                    }\r\n                    //聊天\r\n                    if (MsgJson.msgType === 0) {\r\n                        //监听\r\n                        pushChatItem('normal',MsgJson);\r\n                    }\r\n                    //运营消息\r\n                    if (MsgJson.msgType === 4) {\r\n                        //监听\r\n                        // _this.view.trigger('events:syncMsgCm', MsgJson);\r\n                    }\r\n                    //提前翻译消息\r\n                    if (MsgJson.msgType === 5) {\r\n                        //监听\r\n                        if(MsgJson.c==0){//保证发重复消息只保留第一条\r\n                            pushChatItem('preTranslator',MsgJson);\r\n                        }\r\n                    }\r\n                } else if (MsgJson.videoId === -1) {\r\n                    if (MsgJson.msgType === 3) {\r\n                        window.flashApi.notifying(MsgJson);\r\n                    }\r\n                }\r\n            } else {\r\n                var syncMsgText = val.elems[0].content.data;\r\n                var MsgJson = $.parseJSON(syncMsgText);\r\n                if (MsgJson.videoId == vId) {\r\n                    //翻译\r\n                    if (MsgJson.msgType === 3) {\r\n                        window.flashApi.notifying(MsgJson);\r\n                    }\r\n                    //翻译\r\n                    if (MsgJson.msgType === 5) {\r\n                        if(MsgJson.c==0){//保证发重复消息只保留第一条\r\n                            pushChatItem('preSTranslator',MsgJson);\r\n                        }\r\n                        window.flashApi.notifying(MsgJson);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n}\r\nfunction applyGround () {\r\n    var timer = null;\r\n    var self = this;\r\n    timer = setInterval(function() {\r\n        if (imServer.canJoin) {\r\n            for (var i = 0; i < self.chatroomIds.length; i++) {\r\n                imServer.applyJoinGroup(self.chatroomIds[i], function(res) {\r\n                    var timer2 = setInterval(function () {\r\n                        if(imServer.NextMsgSeq!=-1){\r\n                            getSyncGroupMsgs();\r\n\r\n                            clearInterval(timer2);\r\n                        }\r\n                    },1000);\r\n                });\r\n            }\r\n            clearInterval(timer);\r\n        }\r\n    },300);\r\n}\r\nvar bHistoryOne = true;\r\nvar countHistory = 0;\r\nfunction getSyncGroupMsgs() {\r\n    imServer.getSyncGroupMsgs(0,function (msgs) {\r\n        if(!chat.msgCon['historyList']){\r\n            chat.msgCon['historyList'] = [];\r\n        }\r\n        if(countHistory>=200)return;\r\n        countHistory+=msgs.length;\r\n        $.each(msgs,function (index,msg) {\r\n            var HistoryTxt = msg.elems[0].content.data;\r\n            var MsgJson = $.parseJSON(HistoryTxt);\r\n            chat.msgCon['historyList'].splice(index,0,MsgJson);\r\n        });\r\n        if(bHistoryOne){\r\n            chat.view.trigger('events:initHistory');\r\n            bHistoryOne = false;\r\n        }else{\r\n            chat.view.trigger('events:loadHistory');\r\n        }\r\n    });\r\n}\r\nfunction groupSystemNotifys () {\r\n    function callback(notifyInfo) {\r\n        console.log(notifyInfo);\r\n    }\r\n    return {\r\n        \"1\": callback, //申请加群请求（只有管理员会收到）\r\n        \"2\": callback, //申请加群被同意（只有申请人能够收到）\r\n        \"3\": callback, //申请加群被拒绝（只有申请人能够收到）\r\n        \"4\": callback, //被管理员踢出群(只有被踢者接收到)\r\n        \"5\": callback, //群被解散(全员接收)\r\n        \"6\": callback, //创建群(创建者接收)\r\n        \"7\": callback, //邀请加群(被邀请者接收)\r\n        \"8\": callback, //主动退群(主动退出者接收)\r\n        \"9\": callback, //设置管理员(被设置者接收)\r\n        \"10\": callback, //取消管理员(被取消者接收)\r\n        \"11\": callback, //群已被回收(全员接收)\r\n        \"255\": callback //用户自定义通知(默认全员接收,暂不支持)\r\n    };\r\n}\r\n//发送普通消息\r\nfunction sendMsg(txt) {\r\n    var msg = {\r\n        videoId : this.videoId,\r\n        smallAvatar : this.userMsg.get('headImg'),\r\n        nickName : this.userMsg.get('userName'),\r\n        msgType : 0,\r\n        content : txt,\r\n        time : new Date().getTime()\r\n    };\r\n    pushChatItem('normal',msg);\r\n    for (var i = 0; i < this.chatroomIds.length; i++) {\r\n        imServer.sendMessage({\r\n            groupId : this.chatroomIds[i],\r\n            msg : msg\r\n        }).done(function (res) {\r\n            console.log(res,'发送成功');\r\n        })\r\n    }\r\n}\r\n//发送翻译消息\r\nfunction sendTMsg(txt) {\r\n    var msg = {\r\n        videoId : this.videoId,\r\n        msgType : 3,\r\n        content : txt,\r\n        time : new Date().getTime()\r\n    };\r\n    pushChatItem('translator',msg);\r\n    for (var i = 0; i < this.chatroomIds.length; i++) {\r\n        msg.c = i;\r\n        imServer.sendMsg({\r\n            groupId : this.chatroomIds[i],\r\n            msg : msg\r\n        }).done(function (res) {\r\n            console.log(res);\r\n        })\r\n    }\r\n}\r\n//发送提前消息\r\nfunction sendPTMsg(txt) {\r\n    var msg = {\r\n        videoId : this.videoId,\r\n        msgType : 5,\r\n        content : txt,\r\n        time : new Date().getTime()\r\n    };\r\n    // pushChatItem('preTranslator',msg);\r\n    for (var i = 0; i < this.chatroomIds.length; i++) {\r\n        msg.c = i;\r\n        imServer.sendMsg({\r\n            groupId : this.chatroomIds[i],\r\n            msg : msg\r\n        }).done(function (res) {\r\n            console.log(res);\r\n        })\r\n    }\r\n}\r\n//保存消息到消息容器，并且发布对应的监听消息的事件\r\n//type : 消息的类型\r\n//msg : 未包装的消息体\r\nfunction pushChatItem(type,msg) {\r\n    if(chat.msgCon[type]==undefined){\r\n        chat.msgCon[type] = [];\r\n    }\r\n    var chatItems = chat.msgCon[type];\r\n    if(chat.isLimitMsgLength){\r\n        if(chatItems.length>chat.limitMsgLength){\r\n            for (var i = 0; i < chat._cutLen; i++) {\r\n                chatItems.shift();\r\n            }\r\n        }\r\n    }\r\n    chatItems.push(msg);\r\n    chat.view.trigger('events:'+type);\r\n}\r\nvar chat = {\r\n    init : init,//初始化属性\r\n    applyGround : applyGround,//加入组\r\n    notifyMsg : notifyMsg,//监听漫游消息\r\n    groupSystemNotifys : groupSystemNotifys,//监听系统消息\r\n    sendMsg : sendMsg, //发送普通消息\r\n    sendTMsg : sendTMsg, //发送红包消息\r\n    sendPTMsg : sendPTMsg, //发送红包消息\r\n    getSyncGroupMsgs : getSyncGroupMsgs, //获取漫游消息\r\n};\r\nmodule.exports = chat;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/webIM/dealChat.js\n ** module id = 130\n ** module chunks = 4 6 8\n **/","module.exports = \"<li class=\\\"commentMsg clearfix\\\"  data-time=\\\"{{time}}\\\">\\r\\n\\t<img src=\\\"{{smallAvatar}}\\\" alt=\\\"\\\" class=\\\"com_avator\\\">\\r\\n\\t<div class=\\\"con\\\">\\r\\n\\t\\t<h4 class=\\\"name\\\">{{nickName}}</h4>\\r\\n\\t\\t<p>{{content}}</p>\\r\\n\\t</div>\\r\\n</li>\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/living/template/chat.html\n ** module id = 131\n ** module chunks = 4\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar Model = Backbone.Model.extend({});\r\nvar user = require('user');\r\nvar alertify = require('alertify');\r\nvar UserPayModel = require('../PayModel/userPay.js');\r\nvar SuggestModel = require('../PayModel/paySuggest.js');\r\nvar FListModel = require('../PayModel/fList.js');\r\nvar PayFModel = require('../PayModel/PayF.js');\r\nvar dealModel = require('modelBefore').dealParamsJsonP;\r\nvar loginBox = require('loginBox');\r\nvar View = BaseView.extend({\r\n    el: '.payDialog',\r\n    events: {\r\n        'click .ment span': 'choosePayWay',\r\n        'click .buy': 'gotoPay',\r\n        'click .closeWin': 'closePay',\r\n        'click .dealPay .btn': 'dealPay',\r\n        'click .payBtn': 'showPayWayWin',\r\n        'click .payMent .close': 'hidePayWayWin',\r\n        'click .cdkey_list_btn': 'showCdWin',\r\n        'click .cdkey_box .close': 'hideCdWin',\r\n        'click .packageChoose li ': 'chooseGood',\r\n        'click .nav_cdkey .singleBtn': 'showSingle',\r\n        'click .nav_cdkey .packageBtn': 'showPackage',\r\n        'click .canUse': 'chooseCdkey',\r\n        'click .cdkey_btn': 'testCdKey'\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n        this.downloadTipsTpl = require('./template/download.html');\r\n        this.fCdKeyItemTpl = require('./template/fCdKeyItem.html');\r\n        this.payinfoTpl = require('./template/payinfo.html');\r\n        this.erwm_bs64 = require('../../../images/pay/er.png');\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        this.userPayModel = new UserPayModel();\r\n        this.suggestModel = new SuggestModel();\r\n        this.payFModel = new PayFModel();\r\n        this.fListModel = new FListModel();\r\n        this.PayWay = 'weixin';\r\n        this.videoName = '';\r\n        this.listenTo(this.suggestModel, 'change', this.render);\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    },\r\n    //渲染支付信息，初始化属性\r\n    render: function() {\r\n        this.videoId = this.suggestModel.get('data').videoId;\r\n        var html = this.compileHTML(this.payinfoTpl, this.suggestModel.get('data'));\r\n        this.$el.html(html);\r\n        this.$el.show();\r\n        this.$payInfo = this.$el.find('.pay_info');\r\n        this.$buyBtn = this.$el.find('.buy');\r\n        this.dealPayId = -1;\r\n        this.bScroll_single = false;\r\n        this.bScroll_package = false;\r\n        this.tabCdkeyList = 0;\r\n    },\r\n    //选择支付方式\r\n    choosePayWay: function(e) {\r\n        var $this = $(e.currentTarget);\r\n        this.PayWay = $.trim($this.attr('class'));\r\n        $this.addClass('selected').siblings('span').removeClass('selected');\r\n    },\r\n    //跳转到支付窗口，打开判断支付结果弹窗\r\n    gotoPay: function(e) {\r\n        var $this = $(e.currentTarget);\r\n        var self = this;\r\n        setTimeout(function() {\r\n            $('.payMent').hide();\r\n            $('.pay_confirm').show();\r\n        }, 1000);\r\n        this.dealPayId = $this.attr('data-goodsid');\r\n        if (this.PayWay == 'weixin') {\r\n            window.open('http://pay.yinyuetai.com/virtual/do-buy?goodsId=' + $this.attr('data-goodsid') + '&count=1&WIDdefaultbank=tenPay');\r\n        } else if (this.PayWay == 'alipay') {\r\n            window.open('http://pay.yinyuetai.com/virtual/do-buy?goodsId=' + $this.attr('data-goodsid') + '&count=1');\r\n        }\r\n    },\r\n    //关闭整个窗口\r\n    closePay: function() {\r\n        this.$el.hide();\r\n        // window.location.reload();\r\n        window.location.href = './';\r\n    },\r\n    //校验支付结果\r\n    dealPay: function(e) {\r\n        var self = this;\r\n        var promise = dealModel(this.userPayModel,{videoId: this.videoId},true);\r\n        promise.done(function(data) {\r\n            if (data.msg == 'SUCCESS') {\r\n                // data.data.success = true;\r\n                if (data.data.success == true) {\r\n                    var html = self.compileHTML(self.downloadTipsTpl,{name:self.videoName,erwm:self.erwm_bs64});\r\n                    self.$el.html(html).show();\r\n                    self.$el.on('click', '.closeErm', function() {\r\n                        window.location.href = './';\r\n                    });\r\n                } else {\r\n                    alertify.error('支付失败，请重新支付');\r\n                    setTimeout(function() {\r\n                        window.location.reload();\r\n                        self.$el.hide();\r\n                    }, 2000);\r\n                    return false;\r\n                }\r\n            } else {\r\n                alertify.error('支付失败，请重新支付');\r\n                setTimeout(function() {\r\n                    window.location.reload();\r\n                    self.$el.hide();\r\n                }, 2000);\r\n            }\r\n        });\r\n    },\r\n    //显示支付方式窗口\r\n    showPayWayWin: function() {\r\n        $('.pay_info').hide();\r\n        $('.payMent').show();\r\n    },\r\n    //隐藏支付方式窗口\r\n    hidePayWayWin: function() {\r\n        $('.pay_info').show();\r\n        $('.payMent').hide();\r\n    },\r\n    //显示我的单集兑换码列表\r\n    showSingle: function(e) {\r\n        var $this = $(e.currentTarget);\r\n        $this.addClass('on').siblings().removeClass('on');\r\n        $('.package_list').hide();\r\n        $('.single_list').show();\r\n    },\r\n    //显示我的打包兑换码列表\r\n    showPackage: function(e) {\r\n        var $this = $(e.currentTarget);\r\n        $this.addClass('on').siblings().removeClass('on');\r\n        $('.package_list').show();\r\n        $('.single_list').hide();\r\n    },\r\n    //选择兑换码\r\n    chooseCdkey: function(e) {\r\n        var $this = $(e.currentTarget);\r\n        if ($this.hasClass('disabled')) return;\r\n        var _input = $this.siblings('.cdkey_c');\r\n        $('.cdkey_txt').val(_input.val());\r\n        $('.cdkey_box').hide();\r\n        $('.pay_info').show();\r\n    },\r\n    //显示我的兑换码列表并且拉取收条信息\r\n    showCdWin: function() {\r\n        this.fetchCdKey(this.videoId, 'VIDEO', 0, 20, function(res) {\r\n            if (res.msg == \"SUCCESS\") {\r\n                if (res.data.length > 0) {\r\n                    $('.single_list').html(juicer(CdKeyLi, res));\r\n                } else {\r\n                    $('.noMore_cdkey').show();\r\n                }\r\n            }\r\n        });\r\n        this.fetchCdKey(this.videoId, 'FOLDER', 0, 20, function(res) {\r\n            if (res.msg == \"SUCCESS\") {\r\n                if (res.data.length > 0) {\r\n                    $('.package_list').html(juicer(CdKeyLi, res));\r\n                } else {\r\n                    $('.noMore_cdkey').show();\r\n                }\r\n            }\r\n        });\r\n        $('.pay_info').hide();\r\n        $('.cdkey_box').show();\r\n    },\r\n    //隐藏我的兑换码列表\r\n    hideCdWin: function() {\r\n        $('.pay_info').show();\r\n        $('.cdkey_box').hide();\r\n    },\r\n    //选择支付商品\r\n    chooseGood: function(e) {\r\n        var $this = $(e.currentTarget);\r\n        $this.addClass('on').siblings().removeClass('on');\r\n        this.$buyBtn.attr('data-goodsid', $this.attr('data-goodsid'));\r\n    },\r\n    //校验电子券\r\n    testCdKey: function() {\r\n        var code = $('.cdkey_txt').val();\r\n        if (code === '') {\r\n            alertify.error('兑换码不能为空！');\r\n            return;\r\n        }\r\n        var self = this;\r\n        var promise = dealModel(this.payFModel,{code: code,videoId: this.videoId},true);\r\n        promise.done( function(data) {\r\n            if (data.msg == 'SUCCESS') {\r\n                // data.data.success = true;\r\n                if (data.data.success == true) {\r\n                    var html = self.compileHTML(self.downloadTipsTpl,{name:self.videoName,erwm:self.erwm_bs64});\r\n                    self.$el.html(html).show();\r\n                    self.$el.on('click', '.closeErm', function() {\r\n                        window.location.href = './';\r\n                    });\r\n                    // setTimeout(function() {\r\n                    //     window.location.reload();\r\n                    // }, 3000);\r\n                } else {\r\n                    alertify.error(data.data.message);\r\n                    return false;\r\n                }\r\n            } else {\r\n                alertify.error(data.msg);\r\n            }\r\n        });\r\n    },\r\n    judgeRight: function(rq_db) {\r\n        var self = this;\r\n        var videoId = rq_db.videoId;\r\n        var videoName = rq_db.videoName;\r\n        this.videoName = videoName;\r\n        var promise = dealModel(this.userPayModel, {\r\n            videoId: rq_db.videoId\r\n        }, true);\r\n        promise.done(function(data) {\r\n            var success = data.data.success;\r\n            // success = true;\r\n            if (!success) {\r\n                self.fetchModel(videoId);\r\n                self.userPayModel.clear();\r\n            } else {\r\n                // alertify.success('您已购买过此视频请去APP进行观看！') //后期可能需要做一个引导页\r\n                var html = self.compileHTML(self.downloadTipsTpl, {\r\n                    name: videoName,\r\n                    erwm: self.erwm_bs64\r\n                });\r\n                self.$el.html(html).show();\r\n                self.$el.on('click', '.closeErm', function() {\r\n                    window.location.href = './';\r\n                });\r\n            }\r\n        });\r\n    },\r\n    fetchModel: function(videoId) {\r\n        var promise = dealModel(this.suggestModel, {\r\n            videoId: videoId,\r\n            source: 'PC'\r\n        }, true);\r\n        promise.done(function(result) {\r\n            if (result.data.goodsId == '0') {\r\n                alertify.error('支付失败，请重新支付');\r\n                return;\r\n            }\r\n        });\r\n    },\r\n    fetchCdKey : function (id, t, o, s, okCb, faillCb) {\r\n        var promise = dealModel(this.fListModel,{\r\n            videoId: id,\r\n            type: t,\r\n            offset: o,\r\n            size: s\r\n        },true);\r\n        promise.done(function(res) {\r\n            okCb(res);\r\n        });\r\n        promise.fail(function() {\r\n            faillCb && faillCb();\r\n        });\r\n        // Server.f_list({\r\n        //     videoId: id,\r\n        //     type: t,\r\n        //     offset: o,\r\n        //     size: s\r\n        // }, function(res) {\r\n        //     okCb(res);\r\n        // }, function() {\r\n        //     faillCb && faillCb();\r\n        // });\r\n    },\r\n});\r\n// new View();\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/pay/pay.view.js\n ** module id = 132\n ** module chunks = 4\n **/","/**\r\n * @time {时间}\r\n * @author {编写者}\r\n * @info {实现的功能}\r\n */\r\n\r\n'use strict';\r\n\r\nvar $ = require('jquery');\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\nvar storage = base.storage;\r\nvar UserModel = require('UserModel');\r\nvar user = UserModel.sharedInstanceUserModel();\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/video/user_pay.json',\r\n    beforeEmit: function() {\r\n        // 如果需要开启对请求数据的本地缓存，可将下列两行注释去掉\r\n        // this.storageCache = true; //开启本地缓存\r\n        // this.expiration = 1; //设置缓存过期时间（1表示60*60*1000 一小时）\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n    },\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceIMModel = function() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/PayModel/userPay.js\n ** module id = 133\n ** module chunks = 4\n **/","/**\r\n * @time {时间}\r\n * @author {编写者}\r\n * @info {实现的功能}\r\n */\r\n\r\n'use strict';\r\n\r\nvar $ = require('jquery');\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\nvar storage = base.storage;\r\nvar UserModel = require('UserModel');\r\nvar user = UserModel.sharedInstanceUserModel();\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/video/pay_suggest.json',\r\n    beforeEmit: function() {\r\n        // 如果需要开启对请求数据的本地缓存，可将下列两行注释去掉\r\n        // this.storageCache = true; //开启本地缓存\r\n        // this.expiration = 1; //设置缓存过期时间（1表示60*60*1000 一小时）\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n    },\r\n    formatter:function(response){\r\n        console.log(response);\r\n        if(response.data.expensivePayPack==null){\r\n            response.data.expensivePayPack = {};\r\n            response.data.expensivePayPack.packageImage = 'http://img4.yytcdn.com/user/photo/160822/2841251/-M-4723db6600a93d95386b00886dbba2f6_800x0.png';\r\n          //formatter方法可以格式化数据\r\n        }\r\n        return response;\r\n    }\r\n\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceIMModel = function() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/PayModel/paySuggest.js\n ** module id = 134\n ** module chunks = 4\n **/","/**\r\n * @time {时间}\r\n * @author {编写者}\r\n * @info {实现的功能}\r\n */\r\n\r\n'use strict';\r\n\r\nvar $ = require('jquery');\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\nvar storage = base.storage;\r\nvar UserModel = require('UserModel');\r\nvar user = UserModel.sharedInstanceUserModel();\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/exchange/f_list.json',\r\n    beforeEmit: function() {\r\n        // 如果需要开启对请求数据的本地缓存，可将下列两行注释去掉\r\n        // this.storageCache = true; //开启本地缓存\r\n        // this.expiration = 1; //设置缓存过期时间（1表示60*60*1000 一小时）\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n    },\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceIMModel = function() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/PayModel/fList.js\n ** module id = 135\n ** module chunks = 4\n **/","/**\r\n * @time {时间}\r\n * @author {编写者}\r\n * @info {实现的功能}\r\n */\r\n\r\n'use strict';\r\n\r\nvar $ = require('jquery');\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\nvar storage = base.storage;\r\nvar UserModel = require('UserModel');\r\nvar user = UserModel.sharedInstanceUserModel();\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/exchange/pay_f.json',\r\n    beforeEmit: function() {\r\n        // 如果需要开启对请求数据的本地缓存，可将下列两行注释去掉\r\n        // this.storageCache = true; //开启本地缓存\r\n        // this.expiration = 1; //设置缓存过期时间（1表示60*60*1000 一小时）\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n    },\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceIMModel = function() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/PayModel/PayF.js\n ** module id = 136\n ** module chunks = 4\n **/","module.exports = \"<div class=\\\"payDowload\\\">\\r\\n    <i class=\\\"close closeErm\\\"></i>\\r\\n    <h4>恭喜您已获得{{name}}的观看资格</h4>\\r\\n    <p>为保护艺人权益，本次直播仅限APP观看\\r\\n        <br/>请扫二维码安装APP体验流畅高清的直播吧</p>\\r\\n    <img src=\\\"{{erwm}}\\\" alt=\\\"\\\">\\r\\n</div>\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/pay/template/download.html\n ** module id = 137\n ** module chunks = 4\n **/","module.exports = \"{{each data as item}}\\r\\n<li class=\\\"cdkey\\\">\\r\\n    {{if item.fList[0].used==true}}\\r\\n    <input type=\\\"text\\\" value=\\\"{{item.fList[0].fCode}}\\\" readonly=\\\"readonly\\\" class=\\\"cdkey_c\\\"><span class=\\\"canUse disabled\\\">已使用</span> {{else}}\\r\\n    <input type=\\\"text\\\" value=\\\"{{item.fList[0].fCode}}\\\" readonly=\\\"readonly\\\" class=\\\"cdkey_c\\\"><span class=\\\"canUse\\\">使用</span> {{/if}}\\r\\n</li>\\r\\n{{/each}}\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/pay/template/fCdKeyItem.html\n ** module id = 138\n ** module chunks = 4\n **/","module.exports = \"<div class=\\\"pay pay_info\\\"><i class=\\\"close closeWin\\\"></i>\\r\\n    <div class=\\\"payImg\\\"><img src=\\\"{{expensivePayPack.packageImage}}\\\"></div>\\r\\n    <div class=\\\"pay_btnBox\\\">\\r\\n        <p>你未获得此视频的观看资格</p>\\r\\n        <p>请购买相应资格</p>\\r\\n        <div class=\\\"payBtn\\\">立即购买</div>\\r\\n    </div>\\r\\n    <div class=\\\"cdKey_box\\\">\\r\\n        <p class=\\\"title\\\">已有兑换码的用户请在下方输入兑换码：</p>\\r\\n        <input placeholder=\\\"请输入兑换码\\\" type=\\\"text\\\" class=\\\"cdkey_txt\\\" max-length=\\\"30\\\">\\r\\n        <div class=\\\"cdkey_list_btn\\\" data-videoId=\\\"{{videoId}}\\\">我的兑换码</div>\\r\\n        <div class=\\\"cdkey_btn\\\">使用</div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"payMent\\\">\\r\\n    <div class=\\\"close\\\"></div>\\r\\n    <div class=\\\"pay_title\\\">请选择购买内容</div>\\r\\n    <ul class=\\\"packageChoose\\\">\\r\\n        {{if type== 'PACKAGE_WITHOUT_VIDEO'}}\\r\\n        <li class=\\\"packLi on\\\" data-goodsid=\\\"{{expensivePayPack.packageGoodsId}}\\\">{{expensivePayPack.packageName}}<span class=\\\"price\\\">￥<i>{{expensivePayPack.packagePrice}}</i></span></li>\\r\\n        {{else if type=='VIDEO_SINGLE'}}\\r\\n        <li class=\\\"packLi on\\\" data-goodsid=\\\"{{videoGoodsId}}\\\">{{videoName}}<span class=\\\"price\\\">￥<i>{{videoPrice}}</i></span></li>\\r\\n        {{else if type=='PACKAGE_WITH_VIDEO'}}\\r\\n        <li class=\\\"packLi on\\\" data-goodsid=\\\"{{videoGoodsId}}\\\">{{videoName}}<span class=\\\"price\\\">￥<i>{{videoPrice}}</i></span></li>\\r\\n        <li class=\\\"packLi\\\" data-goodsid=\\\"{{expensivePayPack.packageGoodsId}}\\\">{{expensivePayPack.packageName}}<span class=\\\"price\\\">￥<i>{{expensivePayPack.packagePrice}}</i></span></li>\\r\\n        {{/if}}\\r\\n    </ul>\\r\\n    <p>付款方式：</p>\\r\\n    <p class=\\\"ment\\\"><span class=\\\"weixin selected\\\"><i></i></span><span class=\\\"alipay\\\"><i></i></span></p>\\r\\n    <p class=\\\"goBuy\\\">\\r\\n        {{if videoGoodsId != 0}}\\r\\n        <div data-goodsid=\\\"{{videoGoodsId}}\\\" class=\\\"buy\\\">立即购买</div>\\r\\n        {{else}}\\r\\n        <div data-goodsid=\\\"{{expensivePayPack.packageGoodsId}}\\\" class=\\\"buy\\\">立即购买</div>\\r\\n        {{/if}}\\r\\n    </p>\\r\\n</div>\\r\\n<div class=\\\"cdkey_box\\\" data-videoId=\\\"{{videoId}}\\\">\\r\\n    <div class=\\\"close\\\"></div>\\r\\n    <div class=\\\"title\\\">我的兑换码</div>\\r\\n    <ul class=\\\"nav_cdkey clearfix\\\">\\r\\n        <li class=\\\"singleBtn on\\\">单集</li>\\r\\n        <li class=\\\"packageBtn\\\">礼包</li>\\r\\n    </ul>\\r\\n    <div class=\\\"cdkey_con\\\">\\r\\n        <ul class=\\\"single_list on\\\">\\r\\n        </ul>\\r\\n        <ul class=\\\"package_list\\\"></ul>\\r\\n    </div>\\r\\n    <div class=\\\"noMore_cdkey\\\">您还没有对应的兑换码</div>\\r\\n</div>\\r\\n<div class=\\\"pay_confirm\\\">\\r\\n    <i class=\\\"close closeWin\\\"></i>\\r\\n    <p>请您在新打开的页面中完成支付，支付完成后，根据结果选择相应的操作。</p>\\r\\n    <div class=\\\"dealPay\\\">\\r\\n        <div class=\\\"btn\\\">重新支付</div>\\r\\n        <div class=\\\"current btn\\\">支付成功</div>\\r\\n    </div>\\r\\n</div>\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/pay/template/payinfo.html\n ** module id = 139\n ** module chunks = 4\n **/","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOcAAADnAQMAAADfOtNjAAAABlBMVEX///8AAABVwtN+AAABPElEQVRYhe2XMZaDMAxExaOg5AgchaPB0ThKjkCZwo+JRrY3yVt3u83wPEVs/NUIKWNh1tXV9R+aQT1tAYZk82ON54cy5WZ8+s/GIFv3eqhLV1xjzhc4nXrQHSgXi+VGdC8V1KcWPblgz7G7NTpWimbf4HEpZMNVpGjVcthl02ltKdEZh9EwvIJIQZG0adZEC4ygwy0epzalb8SxL/DWHNL00ZOaNOfr3h63VQwWwpSb0pMDIl8zcQqOexOp+wZwbPZhH5L0nS8rGOPsuydF6XZxs4YTMu3xa6IQpLx4vYwHTZ31vGJO16U1CGVGMlOndUYC79/IHunbN+QoNyMpar6/p1wx+vM9aHTCMtXegLpKIb+dUJcuHGed+m01Nt6GFDUrz/lfhlbHStHqGz6Sp/zl0XIVIdrV1fU3vQAQv6g5IR3bhQAAAABJRU5ErkJggg==\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/images/pay/er.png\n ** module id = 140\n ** module chunks = 4\n **/","module.exports = \"<div class=\\\"videoMsg\\\">\\r\\n\\t<div class=\\\"videoMsg_con clearfix\\\">\\r\\n\\t\\t<div class=\\\"channel_avator\\\">\\r\\n\\t\\t\\t<img src=\\\"{{channel.profileImg}}\\\" alt=\\\"\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"channel_detail\\\">\\r\\n\\t\\t\\t<div class=\\\"video_name clearfix\\\">\\r\\n\\t\\t\\t\\t<h3>{{videoName}}</h3>\\r\\n\\t\\t\\t\\t{{if videoType===\\\"LIVE\\\"}}\\r\\n\\t\\t\\t\\t<img src=\\\"{{liveLog}}\\\" alt=\\\"\\\" class=\\\"liveLog\\\">\\r\\n\\t\\t\\t\\t{{/if}}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"channel_name\\\">{{channel.channelName}}</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t{{ if channel.subscribed==true }}\\r\\n\\t\\t<div class=\\\"meet disabled\\\">已订阅</div>\\r\\n\\t{{else}}\\r\\n\\t\\t<div class=\\\"meet meetable\\\">订阅频道</div>\\r\\n\\t{{/if}}\\r\\n\\t<div class=\\\"supportBox\\\">\\r\\n\\t\\t<span class=\\\"usersCount\\\">{{visitCount}}</span>\\r\\n\\t\\t<span class=\\\"lovesCount\\\">{{likeCount}}</span>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"loveBtn\\\">\\r\\n\\t\\t<div class=\\\"power\\\"></div>\\r\\n\\t\\t<div class=\\\"shadow\\\"></div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/living/template/videoDetail.html\n ** module id = 141\n ** module chunks = 4\n **/","module.exports = \"<div class=\\\"payDowload\\\">\\r\\n    <i class=\\\"close closeErm\\\"></i>\\r\\n    <h4>恭喜您已获得{{name}}的观看资格</h4>\\r\\n    <p>为保护艺人权益，本次直播仅限APP观看\\r\\n        <br/>请扫二维码安装APP体验流畅高清的直播吧</p>\\r\\n    <img src=\\\"{{erwm}}\\\" alt=\\\"\\\">\\r\\n</div>\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/living/template/downloadTips.html\n ** module id = 142\n ** module chunks = 4\n **/","module.exports = \"<div class=\\\"tipsWin\\\">\\r\\n    <div class=\\\"close\\\"></div>\\r\\n    <p>看成员的单人机位<br> 锁定你的最爱！<br> 快去StarTV APP<br> showcase视频成员视角中<br> 为他赠送道具,<br>达标即可解锁成员单人机位!</p>\\r\\n</div>\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/living/template/tipsMultiCamera.html\n ** module id = 143\n ** module chunks = 4\n **/","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAXCAYAAACmnHcKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAyQjUzQzBCMEMzODExRTZBRDkwOTkzMTU3QUZBQUIyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAyQjUzQzBDMEMzODExRTZBRDkwOTkzMTU3QUZBQUIyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDJCNTNDMDkwQzM4MTFFNkFEOTA5OTMxNTdBRkFBQjIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDJCNTNDMEEwQzM4MTFFNkFEOTA5OTMxNTdBRkFBQjIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7nOTLLAAAH9ElEQVR42sxX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\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/images/living/live-ico2.png\n ** module id = 144\n ** module chunks = 4 6 8\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar HistoryModel = require('../../models/living/history.model.js');\r\nvar dealModel = require('modelBefore').dealParamsJsonP;\r\nvar url = require('url');\r\nvar View = BaseView.extend({\r\n    el: '.live_history',\r\n    events: {\r\n        'mouseover': 'showBtns',\r\n        'mouseout': 'hideBtns',\r\n        'click .btn': 'tabHistory',\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        var urlHASH = url.parseSearch(location.search);\r\n        this.channelId = urlHASH.channelId;\r\n        this.historyModel = new HistoryModel();\r\n        this._con = this.$el.find('.programlist');\r\n        this.h_len = 0;\r\n        this.h_index = 0;\r\n        this.h_width = -1;\r\n        this.$lBtn = this.$el.find('.lBtn');\r\n        this.$rBtn = this.$el.find('.rBtn');\r\n        this.$btns = this.$el.find('.btn');\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n        this.historyItem = require('./template/history.html');\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        var self = this;\r\n        var promise = dealModel(this.historyModel, {\r\n            videoType: 2,\r\n            channelId: this.channelId\r\n        });\r\n        promise.done(function(res) {\r\n            if (res.msg === 'SUCCESS') {\r\n                if(res.data.length>0){\r\n                    self.renderHistoryList(res);\r\n                    self.$el.show();\r\n                }\r\n            }\r\n        });\r\n    },\r\n    renderHistoryList: function(res) {\r\n        var html = this.compileHTML(this.historyItem, res);\r\n        this._con.html(html);\r\n        var Items = this._con.children();\r\n        this.h_len = Items.length;\r\n        if (this.h_len > 3) {\r\n            this.$rBtn.show();\r\n        }\r\n        this.h_width = Items.eq(0).outerWidth() + parseInt(Items.eq(0).css('marginRight'));\r\n        this._con.css({\r\n            width: this.h_len * this.h_width\r\n        });\r\n    },\r\n    tabHistory: function(e) {\r\n        var $this = $(e.currentTarget);\r\n        if ($this.hasClass('lBtn')) {\r\n            this.h_index--;\r\n            if (this.h_index <= 0){\r\n                this.h_index = 0;\r\n                $this.hide();\r\n                return;\r\n            }\r\n            this.$rBtn.show();\r\n        } else {\r\n            this.h_index++;\r\n            if (this.h_index == this.h_len - 3) $this.hide();\r\n            this.$lBtn.show();\r\n        }\r\n        this._con.stop().animate({\r\n            left: -this.h_index * this.h_width\r\n        }, 300);\r\n    },\r\n    showBtns: function() {\r\n        if (this.h_len > 3) {\r\n            if (this.h_index !== 0) {\r\n                this.$lBtn.show();\r\n            }\r\n            if (this.h_index != this.h_len - 3) {\r\n                this.$rBtn.show();\r\n            }\r\n        }\r\n        this.$btns.stop().animate({\r\n            opacity: 1\r\n        }, 300);\r\n    },\r\n    hideBtns: function() {\r\n        this.$btns.stop().animate({\r\n            opacity: 0\r\n        }, 300);\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/living/history.view.js\n ** module id = 145\n ** module chunks = 4\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/video/list_bychannel.json',\r\n    beforeEmit: function beforeEmit() {\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n    },\r\n    formatter: function(response) {\r\n        //formatter方法可以格式化数据\r\n        if (response.data.length > 0) {\r\n            for (var i = 0; i < response.data.length; i++) {\r\n\r\n                response.data[i].T_playtime = sec2time(response.data[i].playtime);\r\n                response.data[i].T_onAirStartTime = dateToYMD(response.data[i].onAirStartTime);\r\n            }\r\n        }\r\n        return response;\r\n    }\r\n});\r\n\r\nfunction toD(n) {\r\n    return n >= 10 ? '' + n : '0' + n;\r\n}\r\n\r\nfunction dateToYMD(timestamp) {\r\n    var date = new Date(),\r\n        Y, M, D, h, s;\r\n    date.setTime(timestamp);\r\n    Y = date.getFullYear();\r\n    M = date.getMonth() + 1;\r\n    D = date.getDate();\r\n    h = date.getHours();\r\n    s = date.getSeconds();\r\n    return Y + '年' + toD(M) + '月' + toD(D) + '日 ' + toD(h) + ':' + toD(s);\r\n}\r\n\r\nfunction sec2time(sec) {\r\n    if (sec == 'undefined') {\r\n        return '00:00';\r\n    }\r\n    var h = parseInt(sec / 3600);\r\n    var m = parseInt((sec - h * 3600) / 60);\r\n    var s = parseInt(sec - h * 3600 - m * 60);\r\n    return h > 0 ? h + ':' + toD(m) + ':' + toD(s) : toD(m) + ':' + toD(s);\r\n}\r\nvar shared = null;\r\nModel.sharedInstanceModel = function sharedInstanceModel() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\n\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/models/living/history.model.js\n ** module id = 146\n ** module chunks = 4\n **/","module.exports = \"{{each data as info}}\\r\\n<li class=\\\"program\\\">\\r\\n\\t<a href=\\\"living.html?videoId={{info.videoId}}&channelId={{info.channel.channelId}}\\\"><div class=\\\"viedoBox\\\">\\r\\n\\t\\t<img src=\\\"{{info.posterPic}}\\\" alt=\\\"\\\">\\r\\n\\t\\t<div class=\\\"shadow\\\"></div>\\r\\n\\t\\t<div class=\\\"play_ico\\\"></div>\\r\\n\\t\\t{{if info.T_playtime!==\\\"00:00\\\"}}\\r\\n            <span class=\\\"viedo_time\\\">{{info.T_playtime}}</span>\\r\\n        {{/if}}\\r\\n\\t</div>\\r\\n\\t<div class=\\\"program_msg\\\">\\r\\n\\t\\t<a href=\\\"\\\" class=\\\"title\\\">{{info.videoName}}</a>\\r\\n\\t\\t<div class=\\\"program_time\\\">{{info.T_onAirStartTime}}</div>\\r\\n\\t\\t<div class=\\\"program_support clearfix\\\">\\r\\n\\t\\t\\t<span class=\\\"program_visit\\\">{{info.visitCount}}</span>\\r\\n\\t\\t\\t<span class=\\\"program_love\\\">{{info.likeCount}}</span>\\r\\n\\t\\t</div>\\r\\n\\t</div></a>\\r\\n</li>\\r\\n{{/each}}\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/living/template/history.html\n ** module id = 147\n ** module chunks = 4\n **/"],"sourceRoot":""}