{"version":3,"sources":["webpack:///./app/src/translator.js","webpack:///./app/src/module/tools/url.js?f017**","webpack:///./app/src/module/util/alertify.js?d9f5***","webpack:///./app/src/module/tools/modelBefore.js?1a15**","webpack:///./app/src/module/util/FlashApi.js?3aa0","webpack:///./app/src/module/webIM/IMServer.js?4c88","webpack:///./app/src/module/IMModel/index.js?9f39","webpack:///./app/src/module/webIM/dealChat.js?8e84","webpack:///./app/images/living/live-ico2.png?1e8a","webpack:///./app/stylesheets/translator.scss","webpack:///./app/src/views/translator/main.view.js","webpack:///./app/src/views/translator/rtmpdetail.view.js","webpack:///./app/src/models/translator/rtmpDetail.model.js","webpack:///./app/src/views/translator/chat.view.js","webpack:///./app/src/views/translator/template/preItem.html","webpack:///./app/src/views/translator/template/videoDetail.html"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;ACTD;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ,UAAU;AAClB;AACA;AACA;AACA,wDAAuD,oBAAoB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACxBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,2BAA0B;AAC1B,+BAA8B;AAC9B,6BAA4B;AAC5B,+BAA8B;AAC9B,4BAA2B;AAC3B;AACA;AACA;;AAEA;;;;;;;;ACnLA;AACA;AACA;AACA;AACA,gCAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB,MAAM,WAAW,OAAO,uBAAuB,GAAG;AACvE,qBAAoB,IAAI;AACxB,qBAAoB,OAAO;AAC3B,qBAAoB,WAAW;AAC/B,qBAAoB,QAAQ;AAC5B,qBAAoB,UAAU;AAC9B,qBAAoB,MAAM;AAC1B,qBAAoB,MAAM,WAAW,OAAO,UAAU,GAAG,6CAA6C,IAAI,sBAAsB,OAAO,oBAAoB,WAAW,YAAY,QAAQ,WAAW,MAAM,cAAc,UAAU;AACnO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,OAAO;AACrC;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ,kCAAkC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,cAAc;AAC7D;AACA;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAwD;;AAExD;AACA;AACA;AACA;AACA,kBAAiB;AACjB,2DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,SAAS;AACrB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,aAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,SAAS;AACrB,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA;AACA;;;;;;;;ACtPA;AACA,WAAU;AACV,aAAY;AACZ,WAAU;AACV;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,qCAAoC;AACpC,gCAA+B;AAC/B;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,2BAA0B,iBAAiB;AAC3C;AACA;AACA,MAAK;AACL;AACA;AACA,2BAA0B,iBAAiB;AAC3C;AACA,MAAK;AACL;AACA;AACA,iBAAgB,SAAS;AACzB,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC,iCAAgC;AAChC,sBAAqB;AACrB,6CAA4C;AAC5C,iCAAgC;AAChC,2DAA0D;AAC1D,uDAAsD;AACtD,6CAA4C;AAC5C,wDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,6BAA6B;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,6BAA6B;AAChD;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,6BAA6B;AAChD;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,6BAA6B;AAChD;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACjQA,kCAAiC,o2H;;;;;;;ACAjC,0C;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,gDAA+C;AAC/C;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA,MAAK;;AAEL,MAAK;;AAEL,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;;AAED;;;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B,kCAAiC;AACjC;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA,cAAa;AACb;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,EAAC;AACD;;;;;;;;ACrLA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACzBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,+DAA8D,oBAAoB;AAClF;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL,EAAC;;AAED;;;;;;;;ACxIA,qBAAoB,yBAAyB,mCAAmC,cAAc,gBAAgB,OAAO,+CAA+C,cAAc,qBAAqB,OAAO,K;;;;;;;ACA9M,mJAAkJ,oBAAoB,+HAA+H,WAAW,mBAAmB,yBAAyB,yBAAyB,SAAS,4CAA4C,KAAK,wDAAwD,qBAAqB,+C","file":"translator.js","sourcesContent":["/**\r\n * Created by caoxifeng on 16/4/11.\r\n */\r\nvar $ = require('jquery');\r\nrequire('../stylesheets/translator.scss');\r\nvar MainView = require('./views/translator/main.view');\r\n$(function () {\r\n    // 入口视图\r\n    var mainView = new MainView();\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/translator.js\n ** module id = 0\n ** module chunks = 6\n **/","module.exports = {\r\n\t/**\r\n\t * [parseSearch 将search参数转换为obj]\r\n\t * @param  {[type]} query [description]\r\n\t * @return {[type]}       [description]\r\n\t */\r\n\tparseSearch:function(query){\r\n\t\tvar _query = {};\r\n\t\tvar seg = query.replace(/^\\?/, '').split('&'),\r\n\t\t\tleng = seg.length,\r\n\t\t\ti = 0,\r\n\t\t\tvalue,\r\n\t\t\ttarget;\r\n\t\tfor (; i < leng; i++) {\r\n\t\t\tif (!seg[i]) continue;\r\n\t\t\ttarget = seg[i].split('=');\r\n\t\t\tvalue = target[1];\r\n\t\t\tif ((/^\\[/.test(value) && /\\]$/.test(value)) || (/^{/.test(value) || /\\}$/.test(value))) {\r\n\t\t\t\tvalue = JSON.parse(value);\r\n\t\t\t};\r\n\t\t\t_query[target[0]] = value;\r\n\t\t}\r\n\t\treturn _query;\r\n\t}\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/tools/url.js\n ** module id = 83\n ** module chunks = 1 4 5 6 8\n **/","/**\r\n *如果使用zepto，fadeIn,fadeOut,innerHeight等函数不被支持\r\n */\r\n\r\nvar prober = require(\"prober\");\r\nvar _ = require('underscore');\r\n\r\nvar isIE = prober.browser.name == \"ie\",\r\n    isIE6 = isIE && prober.browser.version < \"7\";\r\n\r\nfunction Alertify() {\r\n    this.iframe = $(\"<iframe></iframe>\").addClass(\"alertify-wrapper-iframe\");\r\n    this.el = $(\"<div/>\").addClass(\"alertify-wrapper clearfix\");\r\n    this.ctn = $(\"<div/>\").addClass(\"alertify-wrapper-ctn\");\r\n    this.ctnInner = $(\"<div/>\").addClass(\"alertify-wrapper-ctn-inner\");\r\n    this.ctnInnerContWrapper = $(\"<div/>\");\r\n    this.contElStr = \"<i></i>\";\r\n    this.body = $(\"body\");\r\n    this.init();\r\n}\r\n\r\nAlertify.prototype = {\r\n    constructor: Alertify,\r\n    init: function() {\r\n        this.runningTime = 400;\r\n        this.stayTime = 1000;\r\n        this.timeId = null;\r\n        this.ctn.appendTo(this.el);\r\n        this.ctnInner.appendTo(this.ctn);\r\n        if (isIE) {\r\n            this.iframe.appendTo(this.ctnInner);\r\n        }\r\n        this.ctnInnerContWrapper.appendTo(this.ctnInner);\r\n        this.el.appendTo(this.body);\r\n    },\r\n    showInfo: function(css, mess, callback, delay) {\r\n        var self = this;\r\n        var stayTime = delay ? delay : self.stayTime;\r\n\r\n        if (typeof mess !== \"undefined\" && $.trim(mess) !== \"\") {\r\n            clearTimeout(self.timeId);\r\n            if (this.running) {\r\n                try {\r\n                    this.el.stop().hide();\r\n                } catch (e) {}\r\n                this.ctnInnerContWrapper.removeClass();\r\n                clearTimeout(this.timeId);\r\n                typeof self.callback === \"function\" && self.callback();\r\n            }\r\n            this.callback = callback;\r\n            //标示alertify是否为显示状态\r\n            this.running = true;\r\n\r\n            this.ctnInnerContWrapper.addClass(css).html(this.contElStr + mess);\r\n\r\n            this.setPosition();\r\n\r\n            try {\r\n                this.el.fadeIn(this.runningTime, function() {\r\n                    if (_.indexOf(Alertify.manualType, self.currentType) === -1) {\r\n                        self.timeId = setTimeout(function() {\r\n                            self.hideInfo();\r\n                        }, stayTime);\r\n                    }\r\n                });\r\n            } catch (e) {\r\n                this.el.css({\r\n                    \"opacity\": 1,\r\n                    \"display\": \"block\"\r\n                });\r\n                self.timeId = setTimeout(function() {\r\n                    self.hideInfo();\r\n                }, stayTime);\r\n            }\r\n\r\n        }\r\n    },\r\n    hideInfo: function() {\r\n        var self = this;\r\n        try {\r\n            this.el.fadeOut(this.runningTime, function() {\r\n                typeof self.callback === \"function\" && self.callback();\r\n                self.ctnInnerContWrapper.removeClass();\r\n                self.running = false;\r\n            });\r\n        } catch (e) {\r\n            this.el.css({\r\n                \"opacity\": 0,\r\n                \"display\": \"none\"\r\n            });\r\n            typeof self.callback === \"function\" && self.callback();\r\n            self.ctnInnerContWrapper.removeClass();\r\n            self.running = false;\r\n        }\r\n\r\n    },\r\n    setPosition: function() {\r\n        var clientHeight = document.documentElement.clientHeight;\r\n        try {\r\n            var alertifyHeight = this.el.innerHeight();\r\n        } catch (e) {\r\n            var alertifyHeight = this.el.height();\r\n        }\r\n\r\n        var alertifyTop = (clientHeight - alertifyHeight) / 2;\r\n\r\n        this.iframe.css(\"height\", alertifyHeight + \"px\");\r\n\r\n        if (isIE6) {\r\n            var stylesInIE = {\r\n                position: \"absolute\",\r\n                top: alertifyTop + $(window).scrollTop() + \"px\"\r\n            };\r\n            this.el.css(stylesInIE);\r\n        } else {\r\n            this.el.css(\"top\", alertifyTop + \"px\");\r\n        }\r\n    },\r\n    hide: function(time, callback) {\r\n        var time = typeof time === \"number\" ? time : this.runningTime,\r\n            self = this;\r\n        if (!this.running) {\r\n            return;\r\n        }\r\n\r\n        if (this.el.fadeOut) {\r\n            this.el.fadeOut(time, function() {\r\n                typeof callback === \"function\" && callback();\r\n                self.ctnInnerContWrapper.removeClass();\r\n                self.running = false;\r\n            });\r\n        } else {\r\n            this.el.hide();\r\n            self.ctnInnerContWrapper.removeClass();\r\n            self.running = false;\r\n        }\r\n    }\r\n};\r\n\r\n//alertify控件支持的类型，{如需要新增类型，直接在此属性加入即可}\r\nAlertify.automaticType = [\"log\", \"error\", \"success\"];\r\nAlertify.manualType = [\"loading\"];\r\n\r\nvar alertify = new Alertify(),\r\n    exportsObj = {\r\n        hide: function(time, callback) {\r\n            var time = time,\r\n                callback = callback;\r\n            if (arguments.length === 1 && typeof arguments[0] === \"function\") {\r\n                callback = time;\r\n                time = null;\r\n            }\r\n            alertify.hide(time, callback);\r\n        }\r\n    };\r\n\r\n_.each(Alertify.automaticType.concat(Alertify.manualType), function(type, index) {\r\n    exportsObj[type] = function() {\r\n        var message = arguments[0];\r\n        if (type === \"loading\") {\r\n            message || (message = \"加载中，请稍后...\");\r\n        }\r\n        alertify.currentType = type;\r\n        alertify.showInfo(\"alertify-\" + type, message, arguments[1], arguments[2]);\r\n    }\r\n});\r\n\r\n/**\r\n * interface 对外的接口\r\n * @return {\r\n *      log: function() {},         常态输出\r\n *      loading: function() {},     loading状态\r\n *      error: function() {},       错误输出\r\n *      success: function() {}      成功输出\r\n *      hide: function() {}         关闭提示组件,可传入回调\r\n * }\r\n * 每个方法都接受二个参数message和callback回调,callback不是必须的。(hide接受的是time和callback参数,可直接单独传入callback)\r\n */\r\n\r\nmodule.exports = exportsObj;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/util/alertify.js\n ** module id = 90\n ** module chunks = 1 3 4 5 6 8\n **/","var user = require('user');\r\nmodule.exports = {\r\n    dealParamsJsonP: function(model, params, useToken) {\r\n        var _params = params || {};\r\n        _params.deviceinfo = '{\"aid\":\"30001001\"}';\r\n        if (!!useToken && user.isLogined()) {\r\n            _params.access_token = 'web-' + user.getToken();\r\n        }\r\n        var promise = model.executeJSONP(_params);\r\n        return promise;\r\n    }\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/tools/modelBefore.js\n ** module id = 117\n ** module chunks = 3 4 5 6 7 8\n **/","/**\r\n * @time 2016年3月18日\r\n * @author icepy\r\n * @info 封装Flash接口\r\n */\r\n\r\n'use strict';\r\n// exports.FlashAPI = function () {\r\nvar flashTemp =\r\n    '<object width=\"{width}\" height=\"{height}\"  align=\"middle\" id=\"{id}\" type=\"application/x-shockwave-flash\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\">' +\r\n    '<param value=\"{src}\" name=\"movie\">' +\r\n    '<param value=\"{always}\" name=\"allowscriptaccess\">' +\r\n    '<param value=\"{fullscreen}\" name=\"allowfullscreen\">' +\r\n    '<param value=\"{quality}\" name=\"quality\">' +\r\n    '<param value=\"{flashvars}\" name=\"flashvars\">' +\r\n    '<param value=\"{wmode}\" name=\"wmode\" />' +\r\n    '<embed width=\"{width}\" height=\"{height}\"  name=\"{id}\" type=\"application/x-shockwave-flash\" src=\"{src}\" allowscriptaccess=\"{always}\" allowfullscreen=\"{fullscreen}\" quality=\"{quality}\"  wmode=\"{wmode}\" flashvars=\"{flashvars}\" />' +\r\n    '</object>';\r\nvar win = window;\r\nvar origin = win.location.origin;\r\nvar isWindows = win.navigator.appName.indexOf(\"Microsoft\") != -1;\r\nvar uid = 999;\r\nwin.YYTPCFlashReadyState = false;\r\n/**\r\n    {\r\n        \"props\":{\r\n            构建页面所依赖的数据源\r\n        },\r\n        \"methods\":{\r\n\r\n        },\r\n        el\r\n    }\r\n */\r\nvar getSwfDOM = function(id) {\r\n    var swf, embed, el = document.getElementById(id) || null;\r\n    if (el && el.nodeName.toUpperCase() == 'OBJECT') {\r\n        if (typeof el.SetVariable != 'undefined') {\r\n            swf = el;\r\n        } else {\r\n            embed = el.getElementsByTagName('embed')[0];\r\n            if (embed) {\r\n                swf = embed;\r\n            }\r\n        }\r\n    }\r\n    return swf;\r\n};\r\nvar render = function(tpl, data) {\r\n    if (data) {\r\n        return tpl.replace(/\\{(.*?)\\}/ig, function() {\r\n            return data[arguments[1]] || \"\";\r\n        });\r\n    }\r\n    return tpl;\r\n};\r\nvar FlashAPI = function(options) {\r\n    this.$el = typeof options.el === 'string' ? document.getElementById(options.el) : options.el;\r\n    this._options = options;\r\n    this._props = options.props || {};\r\n    this.$attrs = {\r\n        'id': 'YYTFlash' + (uid++), //配置id\r\n        'src': this._props.src || origin + '/flash/RTMPInplayer.swf?t=20160407.6', //引入swf文件\r\n        'width': this._props.width || 808,\r\n        'height': this._props.height || 428,\r\n        'wmode': this._props.wmode || 'transparent', //控制显示模型\r\n        'flashvar': this._props.flashvar || '', //初始化参数\r\n        'always': this._props.always || 'always', //控制是否交互\r\n        'fullscreen': this._props.fullscreen || true, //控制是否全屏\r\n        'quality': this._props.quality || 'high'\r\n    };\r\n    this._html = render(flashTemp, this.$attrs);\r\n    this._methods = options.methods || {};\r\n    this._ready = false;\r\n    this._init();\r\n};\r\nFlashAPI.prototype._init = function() {\r\n    this.$el.innerHTML = this._html;\r\n    this.$swf = getSwfDOM(this.$attrs.id);\r\n    window.$swf = this.$swf;\r\n};\r\nFlashAPI.prototype.onReady = function(callback) {\r\n    var self = this;\r\n    if (win.YYTPCFlashReadyState || this._ready) {\r\n        callback.call(this);\r\n    } else {\r\n        this.$timer = setInterval(function() {\r\n            if (win.YYTPCFlashReadyState) {\r\n                self._ready = true;\r\n                win.YYTPCFlashReadyState = false;\r\n                clearInterval(self.$timer);\r\n                self.$timer = null;\r\n                callback.call(self);\r\n            }\r\n        }, 0)\r\n    };\r\n};\r\nFlashAPI.prototype.init = function(data, boo) {\r\n    this.$swf.initData(data, boo);\r\n};\r\nFlashAPI.prototype.isReady = function() {\r\n    return this._ready;\r\n};\r\nFlashAPI.prototype.addUrl = function(url, name) {\r\n    this.$swf.setvedioUrl(url, name);\r\n};\r\nFlashAPI.prototype.setName = function(arr) {\r\n    this.$swf.set_name(arr);\r\n    //[{left:boo,url:avatorUrl,name:'sam'}]\r\n};\r\nFlashAPI.prototype.bubble = function(index, txt) {\r\n    this.$swf.set_say(index, txt);\r\n    //索引值从0开始,与set_name对应\r\n};\r\nFlashAPI.prototype.width = function(value) {\r\n    if (typeof value === 'string') {\r\n        value = ~~value;\r\n    };\r\n    this.$swf.setPlayerWidth(value);\r\n};\r\nFlashAPI.prototype.height = function(value) {\r\n    if (typeof value === 'string') {\r\n        value = ~~value;\r\n    };\r\n    this.$swf.setPlayerHeight(value);\r\n};\r\nFlashAPI.prototype.notifying = function(obj) {\r\n    this.$swf.setOneMessageInchat(JSON.stringify(obj));\r\n};\r\nFlashAPI.prototype.clear = function() {\r\n    this.$swf.cleanAllMessage();\r\n};\r\nFlashAPI.prototype.like = function() {\r\n    this.$swf.clickHurt();\r\n}\r\n\r\nvar shared = null;\r\nFlashAPI.sharedInstanceFlashAPI = function(options) {\r\n    if (!shared) {\r\n        shared = new FlashAPI(options)\r\n    }\r\n    return shared;\r\n};\r\nwin.YYTPCFlashOnReady = function() {\r\n    //flash init success\r\n    win.YYTPCFlashReadyState = true;\r\n};\r\nmodule.exports = FlashAPI;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/util/FlashApi.js\n ** module id = 126\n ** module chunks = 4 6 8\n **/","/*\r\n *author liminshen 2016/08/04\r\n *腾讯云\r\n *功能 1.初始化im 2.发送普通消息 3.发送红包消息 4.加入群组 5.退出群组 6.获取群组列表 7.获取漫游消息列表\r\n */\r\n'use strict';\r\nvar base = require('base-extend-backbone');\r\nvar IMModel = require('IMModel');\r\nvar imModel = IMModel.sharedInstanceIMModel();\r\nvar store = base.storage;\r\nvar webim = window.webim;\r\nvar _ = require('underscore');\r\nvar $ = require('jquery');\r\n\r\nvar imServer = {\r\n    groupIdList: [],\r\n    setting: {\r\n        listeners: {\r\n            onMsgNotify: null,\r\n            onGroupInfoChangeNotify: null,\r\n            groupSystemNotifys: null\r\n        }\r\n    },\r\n    NextMsgSeq : -1,\r\n    canJoin : false,//是否允许加入群，当所有以前的群退出后变成true\r\n};\r\n\r\nimServer.init = function(listeners) {\r\n    var self = this;\r\n    var defer = $.Deferred();\r\n    var promise = imModel.fetchIMUserSig();\r\n    promise.then(function(imSig) {\r\n        var loginInfo = {\r\n            sdkAppID: imSig.imAppid, // 用户所属应用id\r\n            appIDAt3rd: imSig.imAppid, // 用户所属应用id\r\n            accountType: imSig.imAccountType, // 用户所属应用帐号类型\r\n            identifier: imSig.imIdentifier, // 当前用户ID\r\n            userSig: imSig.userSig // 当前用户身份凭证\r\n        };\r\n        self.im = loginInfo;\r\n        if (imSig && listeners) {\r\n            // 腾讯IM初始化\r\n            // webim.init(loginInfo, listeners, null);\r\n            webim.login(loginInfo, listeners, {isLogOn:false}, function(res) {\r\n                self.getJoinedGroupListHigh();\r\n                defer.resolve(res);\r\n            }, function(err) {\r\n                console.log(err);\r\n                defer.reject();\r\n            });\r\n        } else {\r\n            defer.reject();\r\n        }\r\n    }, function(err) {\r\n        console.log(err);\r\n        defer.reject();\r\n    });\r\n    return defer.promise();\r\n};\r\n/**\r\n * 发送普通消息\r\n *\r\n */\r\nimServer.sendMessage = function(attrs) {\r\n    var defer = $.Deferred();\r\n    var currentSession = webim.MsgStore.sessByTypeId('GROUP', attrs.groupId);\r\n    var random = Math.floor(Math.random() * 10000);\r\n    var sendMsg;\r\n    var msg;\r\n    if (!currentSession) {\r\n        // var currentSession = new webim.Session('GROUP', attrs.groupId, attrs.groupId, '', random);\r\n        currentSession = new webim.Session('GROUP', attrs.groupId, attrs.groupId, '', random);\r\n    }\r\n    if (currentSession) {\r\n        sendMsg = new webim.Msg(currentSession, true);\r\n        msg = new webim.Msg.Elem('TIMCustomElem', {\r\n            data: JSON.stringify(attrs.msg)\r\n        });\r\n        sendMsg.elems.push(msg);\r\n        sendMsg.fromAccount = this.im.imIdentifier;\r\n        webim.sendMsg(sendMsg, function(resp) {\r\n            defer.resolve(resp);\r\n        }, function(err) {\r\n            defer.reject(err);\r\n        });\r\n    }\r\n    return defer.promise();\r\n};\r\n/**\r\n * 红包消息\r\n *  attrs.subType\r\n *  attrs.msg.fromAccount\r\n */\r\nimServer.sendMsg = function(attrs) {\r\n    var defer = $.Deferred();\r\n    var currentSession = webim.MsgStore.sessByTypeId('GROUP', attrs.groupId);\r\n    var random = Math.round(Math.random() * 4294967296); // 消息随机数，用于去重\r\n\r\n    if (!currentSession) {\r\n        currentSession = new webim.Session(\r\n            webim.SESSION_TYPE.GROUP, attrs.groupId, attrs.groupId, '', random);\r\n    }\r\n    var seq = -1; // 消息序列，-1表示sdk自动生成，用于去重\r\n    var msgTime = Math.round(new Date().getTime() / 1000); // 消息时间戳\r\n    var subType = attrs.subType || webim.GROUP_MSG_SUB_TYPE.REDPACKET;\r\n    var msg = new webim.Msg(\r\n        currentSession,\r\n        true, seq, random, msgTime, attrs.msg.fromAccount, subType, '');\r\n    var textObj = new webim.Msg.Elem('TIMCustomElem', {\r\n        data: JSON.stringify(attrs.msg)\r\n    });\r\n    msg.fromAccount = this.im.imIdentifier;\r\n    msg.elems.push(textObj);\r\n    webim.sendMsg(msg, function(resp) {\r\n        defer.resolve(resp);\r\n    }, function(err) {\r\n        defer.reject(err);\r\n    });\r\n    return defer.promise();\r\n};\r\n/*\r\n *退出群组\r\n */\r\nimServer.quitGroup = function(chatroomId, cb) {\r\n    var self = this;\r\n    webim.quitGroup({\r\n        'GroupId': chatroomId\r\n    }, function(res) {\r\n        cb && cb(res)\r\n    }, function(res) {\r\n        cb && cb(res)\r\n    });\r\n};\r\n/**\r\n * 加入群组\r\n * @param  {[type]}   chatroomId 房间号\r\n * @param  {Function} cb         申请结果回到函数\r\n * @return {[type]}              [description]\r\n */\r\nimServer.applyJoinGroup = function(chatroomId, cb) {\r\n    var self = this;\r\n    this.chatroomId = chatroomId;\r\n    function callback(res) {\r\n        self.getGroupInfo(function (res) {\r\n            self.NextMsgSeq = res.GroupInfo[0].NextMsgSeq;\r\n        });\r\n        cb && cb(res);\r\n    }\r\n    webim.applyJoinGroup({\r\n        GroupId: chatroomId\r\n    }, callback, callback);\r\n};\r\n/**\r\n * 获取群组列表\r\n * @param  {Function}   cbOk\r\n * @return [Function]   cbFail\r\n */\r\nimServer.getGroupInfo = function(cbOk, cbFail) {\r\n    var opts = {\r\n        'GroupIdList': [\r\n            this.chatroomId\r\n        ],\r\n        'GroupBaseInfoFilter': [\r\n            'Type',\r\n            'Name',\r\n            'Introduction',\r\n            'Notification',\r\n            'FaceUrl',\r\n            'CreateTime',\r\n            'Owner_Account',\r\n            'LastInfoTime',\r\n            'LastMsgTime',\r\n            'NextMsgSeq',\r\n            'MemberNum',\r\n            'MaxMemberNum',\r\n            'ApplyJoinOption'\r\n        ],\r\n        'MemberInfoFilter': [\r\n            'Account',\r\n            'Role',\r\n            'JoinTime',\r\n            'LastSendMsgTime',\r\n            'ShutUpUntil'\r\n        ]\r\n    };\r\n    webim.getGroupInfo(opts, cbOk, cbFail);\r\n};\r\n/**\r\n * 获取群组历史消息\r\n * @param  {[type]} cbOk   [description]\r\n * @param  {[type]} cbFail [description]\r\n * @return {[type]}        [description]\r\n */\r\nimServer.getSyncGroupMsgs = function(ReqMsgSeq,cbOk) {\r\n    var self = this;\r\n    var ReqMsgSeq = this.NextMsgSeq-1-ReqMsgSeq;\r\n    var opts = {\r\n        'GroupId': self.chatroomId,\r\n        'ReqMsgSeq': ReqMsgSeq,\r\n        'ReqMsgNumber': 20\r\n    };\r\n    if (opts.ReqMsgSeq === null || opts.ReqMsgSeq === undefined || opts.ReqMsgSeq <0) {\r\n        console.log('群消息序列号非法');\r\n        return;\r\n    }\r\n    webim.syncGroupMsgs(opts,function(res) {\r\n        res.NextMsgSeq = self.NextMsgSeq - 20;\r\n        self.NextMsgSeq = res.NextMsgSeq;\r\n        if(self.NextMsgSeq<=0){\r\n            self.NextMsgSeq = 0;\r\n        }\r\n        cbOk&&cbOk(res);\r\n    });\r\n};\r\n/**\r\n *\r\n * @param  {[type]}   inputMsg 输入的消息字符串\r\n * @param  {Function} done     成功回调函数,包含结果，消息对象\r\n * @param  {[type]}   fail     失败回调函数,包含错误信息\r\n * @return {[type]}            [description]\r\n */\r\nimServer.getJoinedGroupListHigh = function() {\r\n    var self = this;\r\n    var option = {\r\n        'Member_Account': self.im.identifier,\r\n        'Limit': 20,\r\n        'Offset': 0,\r\n    };\r\n    function callback(res) {\r\n        self.groupIdList = res.GroupIdList;\r\n        if(self.groupIdList.length==0){\r\n            self.canJoin = true;\r\n        }\r\n        for (var i = 0; i < self.groupIdList.length; i++) {\r\n            (function (index) {\r\n                self.quitGroup(self.groupIdList[index].GroupId,function () {\r\n                    if(index==self.groupIdList.length-1){\r\n                        self.canJoin = true;\r\n                    }\r\n                });\r\n            })(i)\r\n\r\n        }\r\n    }\r\n    webim.getJoinedGroupListHigh(option, callback, callback);\r\n};\r\nmodule.exports = imServer;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/webIM/IMServer.js\n ** module id = 128\n ** module chunks = 4 6 8\n **/","/**\r\n * @time {时间}\r\n * @author {编写者}\r\n * @info {实现的功能}\r\n */\r\n\r\n'use strict';\r\n\r\nvar $ = require('jquery');\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\nvar storage = base.storage;\r\nvar UserModel = require('UserModel');\r\nvar user = UserModel.sharedInstanceUserModel();\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/user/sig_get.json',\r\n    beforeEmit: function() {\r\n        // 如果需要开启对请求数据的本地缓存，可将下列两行注释去掉\r\n        // this.storageCache = true; //开启本地缓存\r\n        // this.expiration = 1; //设置缓存过期时间（1表示60*60*1000 一小时）\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n        this.notTokenURL = this.url;\r\n        this.imData = null;\r\n    },\r\n    /**\r\n     * [isAnchor 判断是否为主播]\r\n     * @return {Boolean} [description]\r\n     */\r\n    isAnchor: function() {\r\n        return !!this.get('data').anchor;\r\n    },\r\n    setTokenUrl: function(token) {\r\n        this.imData = {\r\n            deviceinfo: '{\"aid\":\"30001001\"}',\r\n            access_token: 'web-' + token\r\n        };\r\n    },\r\n    setNoTokenUrl: function() {\r\n        this.imData = {\r\n            deviceinfo: '{\"aid\":\"30001001\"}'\r\n        };\r\n    },\r\n    /**\r\n     * [fetchIMUserSig 获取IM签名]\r\n     * @param  {Function} callback [description]\r\n     * @param  {[type]}   error    [description]\r\n     * @return {[type]}            [description]\r\n     */\r\n    fetchIMUserSig: function() {\r\n        //  先获取本地签名\r\n        var defer = $.Deferred();\r\n        var token;\r\n        var imSig;\r\n        imSig = storage.get('imSig');\r\n        if (imSig) {\r\n            this.set({\r\n                data: imSig\r\n            });\r\n            defer.resolve(imSig);\r\n            return defer.promise();\r\n        }\r\n        token = user.getToken();\r\n        if (token) {\r\n            this.setTokenUrl(token);\r\n        }\r\n        var sigModelPromise = this.executeJSONP(this.imData);\r\n        sigModelPromise.done(function(response) {\r\n            var data = response.data;\r\n            storage.set('imSig', data);\r\n            defer.resolve(data);\r\n        });\r\n        sigModelPromise.fail(function(e) {\r\n            defer.reject(e);\r\n        });\r\n        return defer.promise();\r\n    },\r\n    //  更新缓存\r\n    updateIMUserSig: function() {\r\n        var defer = $.Deferred();\r\n        var token;\r\n        storage.remove('imSig');\r\n        token = user.getToken();\r\n        if (token) {\r\n            this.setTokenUrl(token);\r\n        }\r\n        var sigModelPromise = this.executeJSONP();\r\n        sigModelPromise.done(function(response) {\r\n            var data = response.data;\r\n            storage.set('imSig', data);\r\n            defer.resolve(data);\r\n        });\r\n        sigModelPromise.fail(function(e) {\r\n            defer.reject(e);\r\n        });\r\n        return defer.promise();\r\n    },\r\n    remove: function() {\r\n        storage.remove('imSig');\r\n    }\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceIMModel = function() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/IMModel/index.js\n ** module id = 129\n ** module chunks = 4 6 8\n **/","/*\r\n*   time 2016/08/10\r\n*   author liminshen\r\n*   传入对应的view来实现IM和view的通讯\r\n*   兼容了翻译者加入多群组的聊天室，发送多聊天室功能\r\n*   添加先退所有群后加当前房间的IM群功能,保持性能最优化\r\n*/\r\n/*\r\n*   time 2016/08/13\r\n*   author liminshen\r\n*   添加了消息缓存机制,增加了消息结构的拓展性，和为上传消息内容做一个准备\r\n*   优化事件触发机制，启用订阅发布模式  pushChatItem\r\n*   添加了限制消息长度的设置\r\n*/\r\n'use strict';\r\nvar imServer = require('imServer');\r\n\r\nfunction jsonpCallback(rspData) {\r\n    //设置jsonp返回的\r\n    webim.setJsonpLastRspData(rspData);\r\n}\r\n//初始化信息\r\n//attr需要的属性，初始化成功的回调\r\nfunction init(attr,cb) {\r\n    var self = this;\r\n    this.view = attr.view||null;//传入聊天对应的view\r\n    this.userMsg = attr.userMsg;//用户的信息\r\n    this.msgCon = {};//消息的容器，缓存所有当前的消息\r\n    this.chatroomIds = attr.chatroomIds||[];//房间列表\r\n    this.videoId = attr.videoId;//当前房间的videoId\r\n    this.isLimitMsgLength = attr.isLimitMsgLength || true;//默认限制\r\n    this.limitMsgLength = attr.limitMsgLength || 1000;//默认限制条数\r\n    this.limitScale = attr.limitScale || 10;//默认删除消息的比例\r\n    this._cutLen = this.limitMsgLength/this.limitScale;//默认限制条数\r\n    this.bInit = false;\r\n    this.listeners = {\r\n        onMsgNotify: this.notifyMsg,\r\n        jsonpCallback: jsonpCallback, //IE9以下的jsonp回调函数\r\n        onGroupInfoChangeNotify: null,\r\n        groupSystemNotifys: this.groupSystemNotifys()\r\n    };\r\n    imServer.init(this.listeners).done(function(res) {\r\n        if (~~res.ErrorCode === 0) {\r\n            cb(true);\r\n            // self.bInit = true;\r\n            self.applyGround();\r\n        }\r\n    });\r\n    return this;\r\n}\r\nfunction notifyMsg (notifyInfo) {\r\n    var _this = chat;\r\n    // 监听漫游消息\r\n        var vId = _this.videoId;\r\n        if (notifyInfo.length === 0) return;\r\n        for (var i in notifyInfo) {\r\n            var val = notifyInfo[i];\r\n            if (val.msg) {\r\n                val = val.msg;\r\n            }\r\n            if (val.isSend === false) {\r\n                var syncMsgText = val.elems[0].content.data;\r\n                var MsgJson = $.parseJSON(syncMsgText);\r\n                if (MsgJson.videoId == vId) {\r\n                    //翻译\r\n                    if (MsgJson.msgType === 3) {\r\n                        pushChatItem('translator',MsgJson);\r\n                        window.flashApi.notifying(MsgJson);\r\n                    }\r\n                    //聊天\r\n                    if (MsgJson.msgType === 0) {\r\n                        //监听\r\n                        pushChatItem('normal',MsgJson);\r\n                    }\r\n                    //运营消息\r\n                    if (MsgJson.msgType === 4) {\r\n                        //监听\r\n                        // _this.view.trigger('events:syncMsgCm', MsgJson);\r\n                    }\r\n                    //提前翻译消息\r\n                    if (MsgJson.msgType === 5) {\r\n                        //监听\r\n                        if(MsgJson.c==0){//保证发重复消息只保留第一条\r\n                            pushChatItem('preTranslator',MsgJson);\r\n                        }\r\n                    }\r\n                } else if (MsgJson.videoId === -1) {\r\n                    if (MsgJson.msgType === 3) {\r\n                        window.flashApi.notifying(MsgJson);\r\n                    }\r\n                }\r\n            } else {\r\n                var syncMsgText = val.elems[0].content.data;\r\n                var MsgJson = $.parseJSON(syncMsgText);\r\n                if (MsgJson.videoId == vId) {\r\n                    //翻译\r\n                    if (MsgJson.msgType === 3) {\r\n                        window.flashApi.notifying(MsgJson);\r\n                    }\r\n                    //翻译\r\n                    if (MsgJson.msgType === 5) {\r\n                        if(MsgJson.c==0){//保证发重复消息只保留第一条\r\n                            pushChatItem('preSTranslator',MsgJson);\r\n                        }\r\n                        window.flashApi.notifying(MsgJson);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n}\r\nfunction applyGround () {\r\n    var timer = null;\r\n    var self = this;\r\n    timer = setInterval(function() {\r\n        if (imServer.canJoin) {\r\n            for (var i = 0; i < self.chatroomIds.length; i++) {\r\n                imServer.applyJoinGroup(self.chatroomIds[i], function(res) {\r\n                    var timer2 = setInterval(function () {\r\n                        if(imServer.NextMsgSeq!=-1){\r\n                            getSyncGroupMsgs();\r\n\r\n                            clearInterval(timer2);\r\n                        }\r\n                    },1000);\r\n                });\r\n            }\r\n            clearInterval(timer);\r\n        }\r\n    },300);\r\n}\r\nvar bHistoryOne = true;\r\nvar countHistory = 0;\r\nfunction getSyncGroupMsgs() {\r\n    imServer.getSyncGroupMsgs(0,function (msgs) {\r\n        if(!chat.msgCon['historyList']){\r\n            chat.msgCon['historyList'] = [];\r\n        }\r\n        if(countHistory>=200)return;\r\n        countHistory+=msgs.length;\r\n        $.each(msgs,function (index,msg) {\r\n            var HistoryTxt = msg.elems[0].content.data;\r\n            var MsgJson = $.parseJSON(HistoryTxt);\r\n            chat.msgCon['historyList'].splice(index,0,MsgJson);\r\n        });\r\n        if(bHistoryOne){\r\n            chat.view.trigger('events:initHistory');\r\n            bHistoryOne = false;\r\n        }else{\r\n            chat.view.trigger('events:loadHistory');\r\n        }\r\n    });\r\n}\r\nfunction groupSystemNotifys () {\r\n    function callback(notifyInfo) {\r\n        console.log(notifyInfo);\r\n    }\r\n    return {\r\n        \"1\": callback, //申请加群请求（只有管理员会收到）\r\n        \"2\": callback, //申请加群被同意（只有申请人能够收到）\r\n        \"3\": callback, //申请加群被拒绝（只有申请人能够收到）\r\n        \"4\": callback, //被管理员踢出群(只有被踢者接收到)\r\n        \"5\": callback, //群被解散(全员接收)\r\n        \"6\": callback, //创建群(创建者接收)\r\n        \"7\": callback, //邀请加群(被邀请者接收)\r\n        \"8\": callback, //主动退群(主动退出者接收)\r\n        \"9\": callback, //设置管理员(被设置者接收)\r\n        \"10\": callback, //取消管理员(被取消者接收)\r\n        \"11\": callback, //群已被回收(全员接收)\r\n        \"255\": callback //用户自定义通知(默认全员接收,暂不支持)\r\n    };\r\n}\r\n//发送普通消息\r\nfunction sendMsg(txt) {\r\n    var msg = {\r\n        videoId : this.videoId,\r\n        smallAvatar : this.userMsg.get('headImg'),\r\n        nickName : this.userMsg.get('userName'),\r\n        msgType : 0,\r\n        content : txt,\r\n        time : new Date().getTime()\r\n    };\r\n    pushChatItem('normal',msg);\r\n    for (var i = 0; i < this.chatroomIds.length; i++) {\r\n        imServer.sendMessage({\r\n            groupId : this.chatroomIds[i],\r\n            msg : msg\r\n        }).done(function (res) {\r\n            console.log(res,'发送成功');\r\n        })\r\n    }\r\n}\r\n//发送翻译消息\r\nfunction sendTMsg(txt) {\r\n    var msg = {\r\n        videoId : this.videoId,\r\n        msgType : 3,\r\n        content : txt,\r\n        time : new Date().getTime()\r\n    };\r\n    pushChatItem('translator',msg);\r\n    for (var i = 0; i < this.chatroomIds.length; i++) {\r\n        msg.c = i;\r\n        imServer.sendMsg({\r\n            groupId : this.chatroomIds[i],\r\n            msg : msg\r\n        }).done(function (res) {\r\n            console.log(res);\r\n        })\r\n    }\r\n}\r\n//发送提前消息\r\nfunction sendPTMsg(txt) {\r\n    var msg = {\r\n        videoId : this.videoId,\r\n        msgType : 5,\r\n        content : txt,\r\n        time : new Date().getTime()\r\n    };\r\n    // pushChatItem('preTranslator',msg);\r\n    for (var i = 0; i < this.chatroomIds.length; i++) {\r\n        msg.c = i;\r\n        imServer.sendMsg({\r\n            groupId : this.chatroomIds[i],\r\n            msg : msg\r\n        }).done(function (res) {\r\n            console.log(res);\r\n        })\r\n    }\r\n}\r\n//保存消息到消息容器，并且发布对应的监听消息的事件\r\n//type : 消息的类型\r\n//msg : 未包装的消息体\r\nfunction pushChatItem(type,msg) {\r\n    if(chat.msgCon[type]==undefined){\r\n        chat.msgCon[type] = [];\r\n    }\r\n    var chatItems = chat.msgCon[type];\r\n    if(chat.isLimitMsgLength){\r\n        if(chatItems.length>chat.limitMsgLength){\r\n            for (var i = 0; i < chat._cutLen; i++) {\r\n                chatItems.shift();\r\n            }\r\n        }\r\n    }\r\n    chatItems.push(msg);\r\n    chat.view.trigger('events:'+type);\r\n}\r\nvar chat = {\r\n    init : init,//初始化属性\r\n    applyGround : applyGround,//加入组\r\n    notifyMsg : notifyMsg,//监听漫游消息\r\n    groupSystemNotifys : groupSystemNotifys,//监听系统消息\r\n    sendMsg : sendMsg, //发送普通消息\r\n    sendTMsg : sendTMsg, //发送红包消息\r\n    sendPTMsg : sendPTMsg, //发送红包消息\r\n    getSyncGroupMsgs : getSyncGroupMsgs, //获取漫游消息\r\n};\r\nmodule.exports = chat;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/webIM/dealChat.js\n ** module id = 130\n ** module chunks = 4 6 8\n **/","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAXCAYAAACmnHcKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAyQjUzQzBCMEMzODExRTZBRDkwOTkzMTU3QUZBQUIyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAyQjUzQzBDMEMzODExRTZBRDkwOTkzMTU3QUZBQUIyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDJCNTNDMDkwQzM4MTFFNkFEOTA5OTMxNTdBRkFBQjIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDJCNTNDMEEwQzM4MTFFNkFEOTA5OTMxNTdBRkFBQjIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7nOTLLAAAH9ElEQVR42sxX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\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/images/living/live-ico2.png\n ** module id = 144\n ** module chunks = 4 6 8\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/stylesheets/translator.scss\n ** module id = 158\n ** module chunks = 6 8\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar DetailView = require('./rtmpdetail.view.js');\r\nvar topbar = require('../../module/topbar/topbar.js');\r\nvar gobal = require('gobal');\r\n\r\nvar View = BaseView.extend({\r\n  el: '',\r\n  rawLoader: function () {\r\n    return '';\r\n  },\r\n  context: function (args) {\r\n    console.log(args);\r\n  },\r\n  beforeMount: function () {\r\n    //  初始化一些自定义属性\r\n    var self = this;\r\n    this.topbar = new topbar();\r\n    //校验用户权限 1为翻译者\r\n    gobal.jsonp('/user/opera_role_list.json',{},function (res) {\r\n        if('0'==res.code){\r\n            if(~~res.data.operationRoles[0]===1){\r\n                self.detailView = new DetailView();\r\n            }else{\r\n                alert('非翻译人员，需要权限请联系技术人员');\r\n                window.location.reload();\r\n            }\r\n        }\r\n\r\n    },function () {\r\n\r\n    },true);\r\n\r\n  },\r\n  afterMount: function () {\r\n    //  获取findDOMNode DOM Node\r\n  },\r\n  ready: function () {\r\n    //  初始化\r\n  },\r\n  beforeDestroy: function () {\r\n    //  进入销毁之前,将引用关系设置为null\r\n  },\r\n  destroyed: function () {\r\n    //  销毁之后\r\n  }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/translator/main.view.js\n ** module id = 160\n ** module chunks = 6\n **/","'use strict';\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar RtmpDetailModel = require('../../models/translator/rtmpDetail.model.js');\r\nvar url = require('url');\r\nvar FlashApi = require('FlashApi');\r\nvar alertify = require('alertify');\r\nvar gobal = require('gobal');\r\nvar user = require('user');\r\nvar loginBox = require('loginBox');\r\nvar dealModel = require('modelBefore').dealParamsJsonP;\r\nvar ChatView = require('./chat.view.js');\r\nvar View = BaseView.extend({\r\n    el: '.videoWin',\r\n    events: {\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        var urlHASH = url.parseSearch(location.search);\r\n        this.videoId = urlHASH.videoId;\r\n        this.loginBox = loginBox();\r\n        this._dialog = this.loginBox.dialog;\r\n        this.playState = false; //是否开始播放视频;\r\n        this.bFetchVideo = false; //是否阻止更新更新视频信息;\r\n        this.rtmpDetailModel = new RtmpDetailModel();\r\n        this.chatView = new ChatView();\r\n        this.renderVideo();\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n        this.videoWin = require('./template/videoDetail.html');\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        var self = this;\r\n        this.DetailPromise = dealModel(this.rtmpDetailModel, {\r\n            videoId: this.videoId\r\n        }, true);\r\n        window.flashApi = new FlashApi({\r\n            el: 'flashBox',\r\n            props: {\r\n                src: '../../../flash/RTMPInplayer.swf',\r\n                width: 808,\r\n                height: 454\r\n            }\r\n        });\r\n\r\n        this.DetailPromise.done(function(res) {\r\n            //没有找到资源的情况下\r\n            if (res.code == 10027) {\r\n                alert(res.msg);\r\n                window.location.href = 'http://startv.yinyuetai.com/';\r\n                return;\r\n            }\r\n            if (res.msg === \"SUCCESS\") {\r\n                var rq_db = res.data;\r\n                self.renderVideoMsg(rq_db);\r\n                var status = self._dialog.status();\r\n                self.chatView.trigger('events:setChatroomId',rq_db);\r\n                if (!user.isLogined()) {\r\n                    if (status == 'hide') {\r\n                        self._dialog.trigger('show');\r\n                    } else {\r\n                        self._dialog.trigger('hide');\r\n                    }\r\n                    return false;\r\n                }\r\n                self.longPolling();\r\n            } else {\r\n                throw new Error(res.msg)\r\n            }\r\n        });\r\n    },\r\n    renderVideo: function() {\r\n        var self = this;\r\n        this.listenTo(this.rtmpDetailModel, 'change', function() {\r\n            if (!user.isLogined()) return;\r\n            var rq_db = this.rtmpDetailModel.get('data');\r\n            var rq_status = this.rtmpDetailModel.get('msg');\r\n            if (rq_status !== 'SUCCESS') return;\r\n            if (rq_db.failureType === 'NONE') {\r\n                //有播放的权限\r\n                self.loadVideo();\r\n            } else if (rq_db.failureType === 'NOTLOGIN') {\r\n                //涉及登陆的问题\r\n                this.bFetchVideo = true;\r\n                //由于游客问题~这边不作处理,在全局做限制\r\n            } else if (rq_db.failureType === 'CHARGE') {\r\n                this.bFetchVideo = true;\r\n            } else {\r\n                //需要引导到app\r\n                this.bFetchVideo = true;\r\n                console.log('引导');\r\n            }\r\n        });\r\n    },\r\n    //长轮询视频信息\r\n    longPolling: function() {\r\n        var self = this;\r\n        long();\r\n\r\n        function long() {\r\n            gobal.jsonp('/video/longpolling.json', {\r\n                videoId: self.videoId\r\n            }, function(res) {\r\n                if(20010===~~res.code){\r\n                    alert(res.msg);\r\n                    window.location.href = 'http://login.yinyuetai.com/logout';\r\n                }\r\n                if (res.msg === 'SUCCESS') {\r\n                    var rq_db = res.data;\r\n                    $('.usersCount').html(rq_db.visitCount);\r\n                    $('.lovesCount').html(rq_db.likeCount);\r\n                    $('.com_name i').html(rq_db.bulletCurtain);\r\n                    //判断是否开始\r\n                    if (rq_db.playStart) {\r\n                        if (!self.playState && !self.bFetchVideo) {\r\n                            self.playState = true;\r\n                            var promise = dealModel(self.rtmpDetailModel, {\r\n                                videoId: self.videoId\r\n                            }, true);\r\n                            promise.done(function(res) {\r\n                                console.log(res);\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        setInterval(long, 15000);\r\n    },\r\n    //加载视频到播放器\r\n    loadVideo: function() {\r\n        this.playState = true;\r\n        var videoObj, videoBoo, rq_db, flashApi;\r\n        flashApi = window.flashApi;\r\n        rq_db = this.rtmpDetailModel.get('data');\r\n        if (rq_db.videoType === 'LIVE') {\r\n            videoObj = rq_db.liveStream;\r\n            // videoObj.key = rq_db.channel.channelId+'-'+urlHASH.videoId+'-'+rq_db.videoType;\r\n            $('.flash_shadow').hide();\r\n            videoBoo = true;\r\n            flashApi.onReady(function() {\r\n                try {\r\n                    flashApi.init(videoObj, videoBoo);\r\n                } catch (e) {\r\n\r\n                }\r\n            });\r\n        } else {\r\n            videoObj = rq_db.vodStream;\r\n            videoBoo = false;\r\n            flashApi.onReady(function() {\r\n                try {\r\n                    $('.flash_shadow').hide();\r\n                    flashApi.init(videoObj, videoBoo);\r\n                } catch (e) {\r\n\r\n                }\r\n            });\r\n        }\r\n    },\r\n    renderVideoMsg: function(rq_db) {\r\n        rq_db.liveLog = require('../../../images/living/live-ico2.png');\r\n        var html = this.compileHTML(this.videoWin, rq_db);\r\n        this.$el.append(html);\r\n    },\r\n\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    }\r\n});\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/translator/rtmpdetail.view.js\n ** module id = 161\n ** module chunks = 6\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/video/detail_byrtmp.json',\r\n    beforeEmit: function beforeEmit() {\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n    }\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceModel = function sharedInstanceModel() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\n\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/models/translator/rtmpDetail.model.js\n ** module id = 162\n ** module chunks = 6 8\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar imServer = require('imServer');\r\nvar chat = require('../../module/webIM/dealChat');\r\nvar user = require('user');\r\nvar alertify = require('alertify');\r\nvar Backbone = window.Backbone;\r\nvar ChatModel = Backbone.Model.extend({});\r\nvar chatModel = new ChatModel();\r\nvar View = BaseView.extend({\r\n    el: '.common_con',\r\n    model: chatModel,\r\n    events: {\r\n        'keydown .win': 'clockSendMsg',\r\n        'input .win': 'countMsg',\r\n        'click .button': 'clickSendMsg',\r\n        'click .preListCon .item': 'clickPreSend'\r\n    },\r\n    rawLoader: function () {\r\n        return '';\r\n    },\r\n    context: function (args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function () {\r\n        //  初始化一些自定义属性\r\n        this.chatroomIds = [];\r\n        this.bInit = false;\r\n        this._txt = this.$el.find('.win');\r\n        this._name = $('.articleName');\r\n        this._countNow = this.$el.find('.countInput .now');\r\n        this.commentList = this.$el.find('.commentList');\r\n        this._con = this.$el.find('.comment_con');\r\n    },\r\n    afterMount: function () {\r\n        //  获取findDOMNode DOM Node\r\n        this.preChatItemTpl = require('./template/preItem.html');\r\n    },\r\n    ready: function () {\r\n        //  初始化\r\n        var self = this;\r\n        this.onEvents();\r\n        this.listenTo(chatModel, 'change', this.renderChat)\r\n    },\r\n    onEvents: function () {\r\n        var self = this;\r\n        this.on('events:setChatroomId', function (attr, isTranslator) {\r\n            var chatroomId = attr.chatroomId;\r\n            this.videoId = attr.videoId;\r\n            if (/\\]/i.test(chatroomId)) {\r\n                this.chatroomIds = eval(chatroomId);\r\n            } else {\r\n                this.chatroomIds.push(chatroomId);\r\n            }\r\n            this.isTranslator = isTranslator || false;\r\n            chat.init({\r\n                chatroomIds: this.chatroomIds,\r\n                videoId: this.videoId,\r\n                view: this,\r\n                userMsg: user\r\n            }, function (res) {\r\n                self.bInit = res;\r\n            })\r\n            var timer = setInterval(function () {\r\n                if (self.bInit) {\r\n                    // self.applyGround();\r\n                    clearInterval(timer);\r\n                }\r\n            }, 1000);\r\n        });\r\n        this.on('events:syncMsg', function () {\r\n            this.syncMsg();\r\n        });\r\n        this.on('events:preTranslator', function () {\r\n            this.preTranslator();\r\n        });\r\n    },\r\n    beforeDestroy: function () {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function () {\r\n        //  销毁之后\r\n    },\r\n    syncMsg: function () {\r\n        chatModel.set(chat.chatItems);\r\n    },\r\n    preTranslator: function () {\r\n        chatModel.clear();\r\n        chatModel.set(chat.msgCon);\r\n    },\r\n    clickSendMsg: function () {\r\n        this.sendMsg();\r\n    },\r\n    //回车发送消息\r\n    clockSendMsg: function (e) {\r\n        if (e.keyCode == 13) {\r\n            this.sendMsg();\r\n            return false;\r\n        }\r\n    },\r\n    clickPreSend: function (e) {\r\n        var $this = $(e.currentTarget);\r\n        var txt = $this.find('.con').html();\r\n        chat.sendTMsg(txt);\r\n        // $this.remove();\r\n    },\r\n    renderChat: function () {\r\n        var preTranslator = chatModel.get('preTranslator');\r\n        if (preTranslator != undefined) {\r\n            var html = this.compileHTML(this.preChatItemTpl, {list: preTranslator});\r\n            $('.preListCon .list').html(html);\r\n            $('.preListCon').show();\r\n        }\r\n    },\r\n    sendMsg: function () {\r\n        var self = this;\r\n        var txt = this._txt.val();\r\n        if (txt === '') {\r\n            alertify.error('亲~消息不能为空');\r\n            return;\r\n        }\r\n        if (this._name.val() !== '') {\r\n            txt = this._name.val() + ':' + txt;\r\n        }\r\n        this._txt.val('');\r\n        this._countNow.html(0);\r\n        chat.sendTMsg(txt);\r\n    },\r\n    countMsg: function (e) {\r\n        var $this = $(e.currentTarget);\r\n        this._countNow.html($this.val().length);\r\n    },\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/translator/chat.view.js\n ** module id = 163\n ** module chunks = 6\n **/","module.exports = \"{{each list as item index}}\\r\\n<li class=\\\"item\\\" data-id=\\\"{{item.videoId}}\\\" data-index={{index}}>\\r\\n    <span>点击发送</span><div class=\\\"con\\\">{{item.content}}</div>\\r\\n</li>\\r\\n{{/each}}\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/translator/template/preItem.html\n ** module id = 164\n ** module chunks = 6\n **/","module.exports = \"<div class=\\\"videoMsg\\\">\\r\\n\\t<div class=\\\"videoMsg_con clearfix\\\">\\r\\n\\t\\t<div class=\\\"channel_avator\\\">\\r\\n\\t\\t\\t<img src=\\\"{{channel.profileImg}}\\\" alt=\\\"\\\">\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"channel_detail\\\">\\r\\n\\t\\t\\t<div class=\\\"video_name clearfix\\\">\\r\\n\\t\\t\\t\\t<h3>{{videoName}}</h3>\\r\\n\\t\\t\\t\\t{{if videoType===\\\"LIVE\\\"}}\\r\\n\\t\\t\\t\\t<img src=\\\"{{liveLog}}\\\" alt=\\\"\\\" class=\\\"liveLog\\\">\\r\\n\\t\\t\\t\\t{{/if}}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"channel_name\\\">{{channel.channelName}}</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/translator/template/videoDetail.html\n ** module id = 165\n ** module chunks = 6\n **/"],"sourceRoot":""}