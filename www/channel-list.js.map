{"version":3,"sources":["webpack:///./app/src/channel-list.js","webpack:///./app/stylesheets/channel-list.scss","webpack:///./app/src/views/channelList/main.view.js","webpack:///./app/src/views/channelList/channelItem.view.js","webpack:///./app/src/models/channelList/channelItem.model.js","webpack:///./app/src/views/channelList/template/Item.html"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;ACTD,0C;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;;AAED;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA0B,iBAAiB;AAC3C,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA,kEAAiE,8CAA8C;AAC/G;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC;AACA;AACA;AACA;AACA,UAAS;;AAET,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA,iCAAgC;AAChC;AACA;AACA;AACA;AACA,UAAS;;AAET,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA,EAAC;;AAED;;;;;;;;AClGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,WAAU,YAAY;AACtB;AACA;AACA,cAAa,IAAI,eAAe,IAAI;AACpC,sCAAqC,YAAY;AACjD;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACzBA,qBAAoB,6BAA6B,gDAAgD,gBAAgB,mEAAmE,gBAAgB,6CAA6C,gBAAgB,wFAAwF,gBAAgB,gBAAgB,iBAAiB,qGAAqG,kBAAkB,8EAA8E,iBAAiB,wCAAwC,aAAa,yBAAyB,2BAA2B,4DAA4D,MAAM,uEAAuE,KAAK,yCAAyC,OAAO,K","file":"channel-list.js","sourcesContent":["/**\r\n * Created by caoxifeng on 16/4/11.\r\n */\r\nvar $ = require('jquery');\r\nrequire('../stylesheets/channel-list.scss');\r\nvar MainView = require('./views/channelList/main.view.js');\r\n$(function () {\r\n    // 入口视图\r\n    var mainView = new MainView();\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/channel-list.js\n ** module id = 0\n ** module chunks = 2\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/stylesheets/channel-list.scss\n ** module id = 95\n ** module chunks = 2\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar ChannelItem = require('./channelItem.view.js');\r\nvar topbar = require('../../module/topbar/topbar.js');\r\n\r\nvar View = BaseView.extend({\r\n  el: '',\r\n  rawLoader: function () {\r\n    return '';\r\n  },\r\n  context: function (args) {\r\n  },\r\n  beforeMount: function () {\r\n    //  初始化一些自定义属性\r\n  },\r\n  afterMount: function () {\r\n    //  获取findDOMNode DOM Node\r\n  },\r\n  ready: function () {\r\n    //  初始化\r\n    var channelItem = new ChannelItem();\r\n    new topbar();\r\n  },\r\n  beforeDestroy: function () {\r\n    //  进入销毁之前,将引用关系设置为null\r\n  },\r\n  destroyed: function () {\r\n    //  销毁之后\r\n  }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/channelList/main.view.js\n ** module id = 98\n ** module chunks = 2\n **/","'use strict';\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar gobal = require('../../module/util/gobal.js');\r\nvar Config = require('config');\r\nvar env = Config.env[Config.scheme];\r\nvar ChannelItemModel = require('../../models/channelList/channelItem.model');\r\nvar user = require('../../module/util/user.js');\r\nvar loginBox = require('loginBox');\r\nvar View = BaseView.extend({\r\n    el: '.channel-list',\r\n    events: {\r\n        'click .meetable': 'subscribe',\r\n        'click .disabled': 'unsubscribe'\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        this.loginBox = loginBox();\r\n        this._dialog = this.loginBox.dialog;\r\n        this.channelItemModel = new ChannelItemModel();\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n\r\n        this.channelItemTpl = require('./template/Item.html');\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n\r\n        var promise = this.channelItemModel.executeJSONP({\r\n            order: 'FOLLOW',\r\n            offset: 0,\r\n            size: 20,\r\n            deviceinfo: '{\"aid\":\"30001001\"}',\r\n        });\r\n        var self = this;\r\n        promise.done(function(res) {\r\n            if (res.msg === \"SUCCESS\") {\r\n                self.renderChannelList();\r\n            }\r\n        });\r\n        promise.fail(function(res) {\r\n            console.log(res);\r\n        });\r\n    },\r\n    renderChannelList: function() {\r\n        var channelItem = this.compileHTML(this.channelItemTpl, { channels: this.channelItemModel.get('data') });\r\n        this.$el.append(channelItem);\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    subscribe: function(e) {\r\n        var status = this._dialog.status();\r\n        if (!user.isLogined()) {\r\n            if (status == 'hide') {\r\n                this._dialog.trigger('show');\r\n            } else {\r\n                this._dialog.trigger('hide');\r\n            }\r\n            return false;\r\n        }\r\n        var _program = $(e.currentTarget.parentElement.parentElement.parentElement),\r\n            channelId = _program.attr('data-channelid'),\r\n            $meets = $(e.currentTarget);\r\n        var subscribe_params = { channelId: channelId };\r\n        gobal.jsonp('/channel/subscribe.json',subscribe_params,function(res) {\r\n            if (res.msg === \"SUCCESS\") {\r\n                $meets.removeClass('meetable').addClass('disabled').html('已订阅');\r\n            }\r\n        }, function() {\r\n\r\n        },true);\r\n    },\r\n    unsubscribe: function(e) {\r\n        var _program = $(e.currentTarget.parentElement.parentElement.parentElement),\r\n            channelId = _program.attr('data-channelid'),\r\n            $meets = $(e.currentTarget);\r\n        var subscribe_params = { channelId: channelId };\r\n        gobal.jsonp('/channel/unsubscribe.json',subscribe_params,function(res) {\r\n            if (res.msg === \"SUCCESS\") {\r\n                $meets.removeClass('disabled').addClass('meetable').html('订阅频道');\r\n            }\r\n        }, function() {\r\n\r\n        },true);\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/channelList/channelItem.view.js\n ** module id = 99\n ** module chunks = 2\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\n\r\nvar Model = BaseModel.extend({\r\n  url: '{{url_prefix}}/channel/pc_list.json',\r\n  beforeEmit: function beforeEmit() {\r\n    // 给请求地址替换一下环境变量\r\n    if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n      this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n    }\r\n  }\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceModel = function sharedInstanceModel() {\r\n  if (!shared) {\r\n    shared = new Model();\r\n  }\r\n  return shared;\r\n};\r\n\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/models/channelList/channelItem.model.js\n ** module id = 100\n ** module chunks = 2\n **/","module.exports = \"{{each channels as item index}}\\r\\n<li class=\\\"channel-li\\\" data-channelId=\\\"{{item.channelId}}\\\">\\r\\n  <div class=\\\"channel\\\"><a href=\\\"channel.html?channelId={{item.channelId}}\\\">\\r\\n      <div class=\\\"tit\\\"><img src=\\\"{{item.posterPic}}\\\" alt=\\\"\\\"/></div></a>\\r\\n    <div class=\\\"avator\\\"><a href=\\\"channel.html?channelId={{item.channelId}}\\\"><img src=\\\"{{item.profileImg}}\\\" alt=\\\"\\\"/></a></div>\\r\\n    <div class=\\\"channel-detail\\\">\\r\\n      <div class=\\\"channel_name\\\">{{item.channelName}}</div>\\r\\n      <div class=\\\"clearfix detail\\\"><span class=\\\"channel_play\\\">{{item.videoCount}}</span><span class=\\\"channel_online\\\">{{item.follow}}</span></div>\\r\\n      {{if item.subscribed===true}}\\r\\n      <div class=\\\"meet disabled\\\">已订阅</div>\\r\\n      {{else}}\\r\\n      <div class=\\\"meet testLogin meetable\\\">订阅频道</div>\\r\\n      {{/if}}\\r\\n    </div>\\r\\n  </div>\\r\\n</li>\\r\\n{{/each}}\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/channelList/template/Item.html\n ** module id = 101\n ** module chunks = 2\n **/"],"sourceRoot":""}