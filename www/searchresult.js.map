{"version":3,"sources":["webpack:///./app/src/searchresult.js","webpack:///./app/src/module/tools/url.js?f017*","webpack:///./app/src/module/util/alertify.js?d9f5**","webpack:///./app/src/module/tools/modelBefore.js?1a15*","webpack:///./app/stylesheets/searchresult.scss","webpack:///./app/src/views/searchresult/main.view.js","webpack:///./app/src/views/searchresult/searchResult.view.js","webpack:///./app/src/models/searchresult/search.model.js","webpack:///./app/src/views/searchresult/template/video.html","webpack:///./app/src/views/searchresult/template/channelItem.html"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;ACTD;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ,UAAU;AAClB;AACA;AACA;AACA,wDAAuD,oBAAoB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACxBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,2BAA0B;AAC1B,+BAA8B;AAC9B,6BAA4B;AAC5B,+BAA8B;AAC9B,4BAA2B;AAC3B;AACA;AACA;;AAEA;;;;;;;;ACnLA;AACA;AACA;AACA;AACA,gCAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA,0C;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,EAAC;;AAED;;;;;;;;AC9CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;;AAED;;;;;;;;ACvLA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,4BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC7DA,qBAAoB,2BAA2B,MAAM,wBAAwB,iCAAiC,wBAAwB,6BAA6B,wBAAwB,SAAS,MAAM,iCAAiC,wBAAwB,sBAAsB,wBAAwB,SAAS,KAAK,kFAAkF,wBAAwB,gBAAgB,yBAAyB,gEAAgE,0BAA0B,6BAA6B,uBAAuB,wEAAwE,KAAK,gBAAgB,wBAAwB,yCAAyC,cAAc,aAAa,wBAAwB,wDAAwD,cAAc,qEAAqE,gBAAgB,2IAA2I,+BAA+B,kEAAkE,sCAAsC,6CAA6C,iBAAiB,yBAAyB,KAAK,wCAAwC,MAAM,yCAAyC,cAAc,aAAa,wBAAwB,wDAAwD,cAAc,kEAAkE,gBAAgB,2IAA2I,6BAA6B,kEAAkE,sCAAsC,6CAA6C,iBAAiB,yBAAyB,KAAK,wCAAwC,KAAK,+EAA+E,cAAc,qBAAqB,gBAAgB,8CAA8C,uBAAuB,0GAA0G,iBAAiB,sDAAsD,gBAAgB,sDAAsD,OAAO,K;;;;;;;ACA17E,qBAAoB,0BAA0B,4DAA4D,mBAAmB,wBAAwB,qBAAqB,+HAA+H,mBAAmB,gBAAgB,oBAAoB,0FAA0F,qBAAqB,iFAAiF,oBAAoB,kDAAkD,gBAAgB,mCAAmC,iCAAiC,+DAA+D,MAAM,8DAA8D,KAAK,+BAA+B,OAAO,K","file":"searchresult.js","sourcesContent":["/**\r\n * Created by caoxifeng on 16/4/11.\r\n */\r\nvar $ = require('jquery');\r\nrequire('../stylesheets/searchresult.scss');\r\nvar MainView = require('./views/searchresult/main.view');\r\n$(function () {\r\n    // 入口视图\r\n    new MainView();\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/searchresult.js\n ** module id = 0\n ** module chunks = 5\n **/","module.exports = {\r\n\t/**\r\n\t * [parseSearch 将search参数转换为obj]\r\n\t * @param  {[type]} query [description]\r\n\t * @return {[type]}       [description]\r\n\t */\r\n\tparseSearch:function(query){\r\n\t\tvar _query = {};\r\n\t\tvar seg = query.replace(/^\\?/, '').split('&'),\r\n\t\t\tleng = seg.length,\r\n\t\t\ti = 0,\r\n\t\t\tvalue,\r\n\t\t\ttarget;\r\n\t\tfor (; i < leng; i++) {\r\n\t\t\tif (!seg[i]) continue;\r\n\t\t\ttarget = seg[i].split('=');\r\n\t\t\tvalue = target[1];\r\n\t\t\tif ((/^\\[/.test(value) && /\\]$/.test(value)) || (/^{/.test(value) || /\\}$/.test(value))) {\r\n\t\t\t\tvalue = JSON.parse(value);\r\n\t\t\t};\r\n\t\t\t_query[target[0]] = value;\r\n\t\t}\r\n\t\treturn _query;\r\n\t}\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/tools/url.js\n ** module id = 83\n ** module chunks = 1 4 5 6 8\n **/","/**\r\n *如果使用zepto，fadeIn,fadeOut,innerHeight等函数不被支持\r\n */\r\n\r\nvar prober = require(\"prober\");\r\nvar _ = require('underscore');\r\n\r\nvar isIE = prober.browser.name == \"ie\",\r\n    isIE6 = isIE && prober.browser.version < \"7\";\r\n\r\nfunction Alertify() {\r\n    this.iframe = $(\"<iframe></iframe>\").addClass(\"alertify-wrapper-iframe\");\r\n    this.el = $(\"<div/>\").addClass(\"alertify-wrapper clearfix\");\r\n    this.ctn = $(\"<div/>\").addClass(\"alertify-wrapper-ctn\");\r\n    this.ctnInner = $(\"<div/>\").addClass(\"alertify-wrapper-ctn-inner\");\r\n    this.ctnInnerContWrapper = $(\"<div/>\");\r\n    this.contElStr = \"<i></i>\";\r\n    this.body = $(\"body\");\r\n    this.init();\r\n}\r\n\r\nAlertify.prototype = {\r\n    constructor: Alertify,\r\n    init: function() {\r\n        this.runningTime = 400;\r\n        this.stayTime = 1000;\r\n        this.timeId = null;\r\n        this.ctn.appendTo(this.el);\r\n        this.ctnInner.appendTo(this.ctn);\r\n        if (isIE) {\r\n            this.iframe.appendTo(this.ctnInner);\r\n        }\r\n        this.ctnInnerContWrapper.appendTo(this.ctnInner);\r\n        this.el.appendTo(this.body);\r\n    },\r\n    showInfo: function(css, mess, callback, delay) {\r\n        var self = this;\r\n        var stayTime = delay ? delay : self.stayTime;\r\n\r\n        if (typeof mess !== \"undefined\" && $.trim(mess) !== \"\") {\r\n            clearTimeout(self.timeId);\r\n            if (this.running) {\r\n                try {\r\n                    this.el.stop().hide();\r\n                } catch (e) {}\r\n                this.ctnInnerContWrapper.removeClass();\r\n                clearTimeout(this.timeId);\r\n                typeof self.callback === \"function\" && self.callback();\r\n            }\r\n            this.callback = callback;\r\n            //标示alertify是否为显示状态\r\n            this.running = true;\r\n\r\n            this.ctnInnerContWrapper.addClass(css).html(this.contElStr + mess);\r\n\r\n            this.setPosition();\r\n\r\n            try {\r\n                this.el.fadeIn(this.runningTime, function() {\r\n                    if (_.indexOf(Alertify.manualType, self.currentType) === -1) {\r\n                        self.timeId = setTimeout(function() {\r\n                            self.hideInfo();\r\n                        }, stayTime);\r\n                    }\r\n                });\r\n            } catch (e) {\r\n                this.el.css({\r\n                    \"opacity\": 1,\r\n                    \"display\": \"block\"\r\n                });\r\n                self.timeId = setTimeout(function() {\r\n                    self.hideInfo();\r\n                }, stayTime);\r\n            }\r\n\r\n        }\r\n    },\r\n    hideInfo: function() {\r\n        var self = this;\r\n        try {\r\n            this.el.fadeOut(this.runningTime, function() {\r\n                typeof self.callback === \"function\" && self.callback();\r\n                self.ctnInnerContWrapper.removeClass();\r\n                self.running = false;\r\n            });\r\n        } catch (e) {\r\n            this.el.css({\r\n                \"opacity\": 0,\r\n                \"display\": \"none\"\r\n            });\r\n            typeof self.callback === \"function\" && self.callback();\r\n            self.ctnInnerContWrapper.removeClass();\r\n            self.running = false;\r\n        }\r\n\r\n    },\r\n    setPosition: function() {\r\n        var clientHeight = document.documentElement.clientHeight;\r\n        try {\r\n            var alertifyHeight = this.el.innerHeight();\r\n        } catch (e) {\r\n            var alertifyHeight = this.el.height();\r\n        }\r\n\r\n        var alertifyTop = (clientHeight - alertifyHeight) / 2;\r\n\r\n        this.iframe.css(\"height\", alertifyHeight + \"px\");\r\n\r\n        if (isIE6) {\r\n            var stylesInIE = {\r\n                position: \"absolute\",\r\n                top: alertifyTop + $(window).scrollTop() + \"px\"\r\n            };\r\n            this.el.css(stylesInIE);\r\n        } else {\r\n            this.el.css(\"top\", alertifyTop + \"px\");\r\n        }\r\n    },\r\n    hide: function(time, callback) {\r\n        var time = typeof time === \"number\" ? time : this.runningTime,\r\n            self = this;\r\n        if (!this.running) {\r\n            return;\r\n        }\r\n\r\n        if (this.el.fadeOut) {\r\n            this.el.fadeOut(time, function() {\r\n                typeof callback === \"function\" && callback();\r\n                self.ctnInnerContWrapper.removeClass();\r\n                self.running = false;\r\n            });\r\n        } else {\r\n            this.el.hide();\r\n            self.ctnInnerContWrapper.removeClass();\r\n            self.running = false;\r\n        }\r\n    }\r\n};\r\n\r\n//alertify控件支持的类型，{如需要新增类型，直接在此属性加入即可}\r\nAlertify.automaticType = [\"log\", \"error\", \"success\"];\r\nAlertify.manualType = [\"loading\"];\r\n\r\nvar alertify = new Alertify(),\r\n    exportsObj = {\r\n        hide: function(time, callback) {\r\n            var time = time,\r\n                callback = callback;\r\n            if (arguments.length === 1 && typeof arguments[0] === \"function\") {\r\n                callback = time;\r\n                time = null;\r\n            }\r\n            alertify.hide(time, callback);\r\n        }\r\n    };\r\n\r\n_.each(Alertify.automaticType.concat(Alertify.manualType), function(type, index) {\r\n    exportsObj[type] = function() {\r\n        var message = arguments[0];\r\n        if (type === \"loading\") {\r\n            message || (message = \"加载中，请稍后...\");\r\n        }\r\n        alertify.currentType = type;\r\n        alertify.showInfo(\"alertify-\" + type, message, arguments[1], arguments[2]);\r\n    }\r\n});\r\n\r\n/**\r\n * interface 对外的接口\r\n * @return {\r\n *      log: function() {},         常态输出\r\n *      loading: function() {},     loading状态\r\n *      error: function() {},       错误输出\r\n *      success: function() {}      成功输出\r\n *      hide: function() {}         关闭提示组件,可传入回调\r\n * }\r\n * 每个方法都接受二个参数message和callback回调,callback不是必须的。(hide接受的是time和callback参数,可直接单独传入callback)\r\n */\r\n\r\nmodule.exports = exportsObj;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/util/alertify.js\n ** module id = 90\n ** module chunks = 1 3 4 5 6 8\n **/","var user = require('user');\r\nmodule.exports = {\r\n    dealParamsJsonP: function(model, params, useToken) {\r\n        var _params = params || {};\r\n        _params.deviceinfo = '{\"aid\":\"30001001\"}';\r\n        if (!!useToken && user.isLogined()) {\r\n            _params.access_token = 'web-' + user.getToken();\r\n        }\r\n        var promise = model.executeJSONP(_params);\r\n        return promise;\r\n    }\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/tools/modelBefore.js\n ** module id = 117\n ** module chunks = 3 4 5 6 7 8\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/stylesheets/searchresult.scss\n ** module id = 148\n ** module chunks = 5\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar topbar = require('../../module/topbar/topbar.js');\r\nvar ResultView = require('./searchResult.view.js');\r\n\r\nvar View = BaseView.extend({\r\n    el: '',\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        this.topbar = new topbar();\r\n        this.resultView = new ResultView();\r\n        this.ready();\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        var self = this;\r\n\r\n        function load() {\r\n            var $windowScrollTop = $(window).scrollTop();\r\n            var $windowHeight = $(window).height();\r\n            var $documentHeight = $(document).height();\r\n            if (($windowScrollTop + $windowHeight) == $documentHeight) {\r\n                self.resultView.trigger('events:scroll_fetch');\r\n            }\r\n        }\r\n        $(window).on('scroll', load);\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/searchresult/main.view.js\n ** module id = 153\n ** module chunks = 5\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\nvar SearchResultModel = require('../../models/searchresult/search.model.js');\r\nvar dealModel = require('modelBefore').dealParamsJsonP;\r\nvar gobal = require('gobal');\r\nvar alertify = require('alertify');\r\nvar url = require('url');\r\nvar user = require('user');\r\nvar loginBox = require('loginBox');\r\nvar urlHASH = url.parseSearch(location.search);\r\nvar View = BaseView.extend({\r\n    el: '.container',\r\n    events: {\r\n        'click .meetable': 'subscribe', //channelId\r\n        'click .disabled': 'unsubscribe', //channelId\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        var self = this;\r\n        this.channelList = [];\r\n        this.searchResultModel = new SearchResultModel();\r\n        this.loginBox = loginBox();\r\n        this.bScorll = true;\r\n        setTimeout(function() {\r\n            self.bScorll = false;\r\n        }, 2000)\r\n        this._dialog = this.loginBox.dialog;\r\n        this.programlist = this.$el.find('.programlist');\r\n        this.channeList = this.$el.find('.channeList');\r\n        this.channelBox = this.$el.find('.channelBox');\r\n        this.noMore = this.$el.find('.noMore');\r\n        this.listenTo(this.searchResultModel, 'change', this.rendPage)\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n        this.videoItem = require('./template/video.html');\r\n        this.channelItem = require('./template/channelItem.html');\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        this.oneFetch = true;\r\n        this.scroll_count = 0;\r\n        this.fetchModel(this.scroll_count);\r\n        this.on('events:scroll_fetch', function() {\r\n            if (this.bScorll) return;\r\n            this.scroll_count++;\r\n            this.fetchModel(this.scroll_count);\r\n        });\r\n    },\r\n    rendPage: function() {\r\n        var rq_db = this.searchResultModel.get('data');\r\n        var videos = this.searchResultModel.get('data').videos;\r\n        var channels = this.searchResultModel.get('data').channels;\r\n        var len = this.channelList.length;\r\n\r\n        if (videos.length == 0 && channels.length == 0) {\r\n            this.bScorll = true;\r\n        }\r\n        if (videos.length > 0) {\r\n            this.oneFetch = false;\r\n            this.renderVideo(rq_db);\r\n        } else if (this.oneFetch) {\r\n            this.oneFetch = false;\r\n            this.programlist.hide();\r\n            this.noMore.show();\r\n        }\r\n        if (channels.length > 0) {\r\n            if (len > 0) {\r\n                if (this.channelList[len - 1].channelId != channels[0].channelId) {\r\n                    $.merge(this.channelList, channels);\r\n                }\r\n            } else {\r\n                $.merge(this.channelList, channels);\r\n            }\r\n            this.renderChannel();\r\n            this.channelBox.show();\r\n        }\r\n    },\r\n    subscribe: function(e) {\r\n        var self = this;\r\n        var $this = $(e.currentTarget);\r\n        var _parent = $this.parents('.channel');\r\n        var status = this._dialog.status();\r\n        if (!user.isLogined()) {\r\n            if (status == 'hide') {\r\n                this._dialog.trigger('show');\r\n            } else {\r\n                this._dialog.trigger('hide');\r\n            }\r\n            return false;\r\n        }\r\n        var subscribe_params = {\r\n            channelId: _parent.attr('data-channelid')\r\n        };\r\n        gobal.jsonp('/channel/subscribe.json', subscribe_params, function(res) {\r\n            if (res.msg === \"SUCCESS\") {\r\n                alertify.success('订阅成功');\r\n                $this.removeClass('meetable').addClass('disabled').html('已订阅');\r\n            }\r\n            console.log(\"success\");\r\n        }, this.error, true);\r\n    },\r\n    unsubscribe: function(e) {\r\n        var self = this;\r\n        var $this = $(e.currentTarget);\r\n        var _parent = $this.parents('.channel');\r\n        var subscribe_params = {\r\n            channelId: _parent.attr('data-channelid')\r\n        };\r\n        gobal.jsonp('/channel/unsubscribe.json', subscribe_params, function(res) {\r\n            console.log(res);\r\n            if (res.msg === \"SUCCESS\") {\r\n                alertify.error('取消订阅成功');\r\n                $this.removeClass('disabled').addClass('meetable').html('订阅频道');\r\n            }\r\n        }, this.error, true);\r\n    },\r\n    renderChannel: function() {\r\n        var html = this.compileHTML(this.channelItem, {\r\n            channels: this.channelList\r\n        });\r\n        this.channeList.html(html);\r\n        var $channel_con = $('.channel_con'),\r\n            $channeList = $channel_con.find('.channeList'),\r\n            $lBtn = $channel_con.find('.lBtn'),\r\n            $rBtn = $channel_con.find('.rBtn');\r\n        var maxlen = $channeList.find('li').length;\r\n        var now = 0;\r\n        var maxLeftIndex = maxlen - 3;\r\n        $channeList.css({\r\n            width: 400 * maxlen\r\n        });\r\n        if (maxlen > 3) {\r\n            $rBtn.show();\r\n        }\r\n        $rBtn.click(function() {\r\n            now++;\r\n            $lBtn.show();\r\n            $channeList.stop().animate({\r\n                left: -now * 400\r\n            });\r\n            if (now == maxLeftIndex) {\r\n                $rBtn.hide();\r\n            }\r\n        });\r\n        $lBtn.click(function() {\r\n            now--;\r\n            $rBtn.show();\r\n            $channeList.stop().animate({\r\n                left: -now * 400\r\n            });\r\n            if (now == 0) {\r\n                $lBtn.hide();\r\n            }\r\n        });\r\n    },\r\n    renderVideo: function(rq_db) {\r\n        var html = this.compileHTML(this.videoItem, rq_db);\r\n        this.programlist.append(html);\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    },\r\n    fetchModel: function(o) {\r\n        var promise = dealModel(this.searchResultModel, {\r\n            offset: o * 9,\r\n            size: 9,\r\n            keyword: urlHASH.keyword\r\n        }, true);\r\n    }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/searchresult/searchResult.view.js\n ** module id = 154\n ** module chunks = 5\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/search/all.json',\r\n    beforeEmit: function beforeEmit() {\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n    },\r\n    formatter: function(response) {\r\n        //formatter方法可以格式化数据\r\n        var list = response.data.videos;\r\n        if (list.length > 0) {\r\n            for (var i = 0; i < list.length; i++) {\r\n                list[i].T_playtime = sec2time(list[i].playtime);\r\n                list[i].T_onAirStartTime = dateToYMD(list[i].onAirStartTime);\r\n            }\r\n        }\r\n        return response;\r\n    }\r\n\r\n});\r\nfunction toD(n) {\r\n    return n >= 10 ? '' + n : '0' + n;\r\n}\r\n\r\nfunction dateToYMD(timestamp) {\r\n    var date = new Date(),\r\n        Y, M, D, h, s;\r\n    date.setTime(timestamp);\r\n    Y = date.getFullYear();\r\n    M = date.getMonth() + 1;\r\n    D = date.getDate();\r\n    h = date.getHours();\r\n    s = date.getSeconds();\r\n    return Y + '年' + toD(M) + '月' + toD(D) + '日 ' + toD(h) + ':' + toD(s);\r\n}\r\n\r\nfunction sec2time(sec) {\r\n    if (sec == 'undefined') {\r\n        return '00:00';\r\n    }\r\n    var h = parseInt(sec / 3600);\r\n    var m = parseInt((sec - h * 3600) / 60);\r\n    var s = parseInt(sec - h * 3600 - m * 60);\r\n    return h > 0 ? h + ':' + toD(m) + ':' + toD(s) : toD(m) + ':' + toD(s);\r\n}\r\nvar shared = null;\r\nModel.sharedInstanceModel = function sharedInstanceModel() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\n\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/models/searchresult/search.model.js\n ** module id = 155\n ** module chunks = 5\n **/","module.exports = \"{{each videos as info index}}\\r\\n{{if info.charge == true}}\\r\\n<li class=\\\"program channel{{info.channel.channelId}} charge\\\" data-channelid=\\\"{{info.channel.channelId}}\\\">\\r\\n{{else}}\\r\\n<li class=\\\"program channel{{info.channel.channelId}}\\\" data-channelid=\\\"{{info.channel.channelId}}\\\">\\r\\n{{/if}}\\r\\n    <h3 class=\\\"program-top\\\">\\r\\n        <a href=\\\"/channel.html?channelId={{info.channel.channelId}}\\\"><img src=\\\"{{info.channel.profileImg}}\\\" alt=\\\"\\\" class=\\\"avator\\\">\\r\\n        <span class=\\\"name\\\">{{info.channel.channelName}}</span></a>\\r\\n            {{if info.mysub == true}}\\r\\n            <div class=\\\"meet disabled\\\">已订阅</div>\\r\\n            {{/if}}\\r\\n    </h3> {{if info.charge == true}}\\r\\n    <a href=\\\"/living.html?videoId={{info.videoId}}&channelId={{info.channel.channelId}}\\\">\\r\\n        <div class=\\\"viedoBox\\\" data-videoid=\\\"{{info.videoId}}\\\">\\r\\n            <i class=\\\"fee\\\"></i>\\r\\n            <img src=\\\"{{info.posterPic}}\\\" alt=\\\"\\\" class=\\\"videoImg\\\">\\r\\n            <div class=\\\"shadow\\\"></div>\\r\\n            <div class=\\\"play_ico\\\"></div>\\r\\n            {{if info.videoType == \\\"LIVE\\\"}}\\r\\n            <span class=\\\"live-ico\\\"></span>\\r\\n            {{else if info.T_playtime != \\\"00:00\\\"}}\\r\\n            <span class=\\\"viedo_time\\\">{{info.T_playtime}}</span>\\r\\n            {{/if}}\\r\\n        </div>\\r\\n    </a>\\r\\n    {{else}}\\r\\n    <a href=\\\"/living.html?videoId={{info.videoId}}&channelId={{info.channel.channelId}}\\\">\\r\\n        <div class=\\\"viedoBox\\\" data-videoid=\\\"{{info.videoId}}\\\">\\r\\n            <i class=\\\"\\\"></i>\\r\\n            <img src=\\\"{{info.posterPic}}\\\" alt=\\\"\\\" class=\\\"videoImg\\\">\\r\\n            <div class=\\\"shadow\\\"></div>\\r\\n            <div class=\\\"play_ico\\\"></div>\\r\\n            {{if info.videoType==\\\"LIVE\\\"}}\\r\\n            <span class=\\\"live-ico\\\"></span>\\r\\n            {{else if info.T_playtime != \\\"00:00\\\"}}\\r\\n            <span class=\\\"viedo_time\\\">{{info.T_playtime}}</span>\\r\\n            {{/if}}\\r\\n        </div>\\r\\n    </a>\\r\\n    {{/if}}\\r\\n    <div class=\\\"program_msg\\\">\\r\\n        <a href=\\\"living.html?videoId={{info.videoId}}\\\" class=\\\"title\\\">{{info.videoName}}</a>\\r\\n        <div class=\\\"program_time\\\">{{info.T_onAirStartTime}}</div>\\r\\n        <div class=\\\"program_support clearfix\\\">\\r\\n            <span class=\\\"program_visit\\\">{{info.visitCount}}</span>\\r\\n            <span class=\\\"program_love\\\">{{info.likeCount}}</span>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n{{/each}}\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/searchresult/template/video.html\n ** module id = 156\n ** module chunks = 5\n **/","module.exports = \"{{each channels as channel}}\\r\\n\\t<li>\\r\\n\\t\\t<div class=\\\"channel\\\" data-channelId=\\\"{{channel.channelId}}\\\" data-channelType=\\\"{{channel.channelType}}\\\">\\r\\n\\t\\t\\t<div class=\\\"channel_avator\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"imgBox\\\">\\r\\n\\t\\t\\t\\t\\t<a href=\\\"/channel.html?channelId={{channel.channelId}}\\\"><img src=\\\"{{channel.profileImg}}\\\" alt=\\\"\\\"></a>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"channel_name\\\">{{channel.channelName}}</div>\\r\\n\\t\\t\\t<div class=\\\"clearfix\\\">\\r\\n\\t\\t\\t<span class=\\\"channel_play\\\">{{channel.videoCount}}</span>\\r\\n\\t\\t\\t<span class=\\\"channel_online\\\">{{channel.follow}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t{{if channel.subscribed === false}}\\r\\n\\t\\t\\t\\t<div class=\\\"meet meetable\\\">订阅频道</div>\\r\\n\\t\\t\\t{{else}}\\r\\n\\t\\t\\t\\t<div class=\\\"meet disabled\\\">已订阅</div>\\r\\n\\t\\t\\t{{/if}}\\r\\n\\t\\t</div>\\r\\n\\t</li>\\r\\n{{/each}}\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/searchresult/template/channelItem.html\n ** module id = 157\n ** module chunks = 5\n **/"],"sourceRoot":""}