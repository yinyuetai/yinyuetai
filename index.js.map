{"version":3,"sources":["webpack:///./app/src/index.js","webpack:///./app/src/views/index/template/video.html?9432","webpack:///./app/src/module/util/alertify.js?d9f5","webpack:///./app/stylesheets/index.scss","webpack:///./app/src/views/index/main.view.js","webpack:///./app/src/views/index/banner.view.js","webpack:///./app/src/models/index/banner.model.js","webpack:///./app/src/views/index/template/banner.html","webpack:///./app/src/views/index/template/banner_btn.html","webpack:///./app/src/views/index/video.view.js","webpack:///./app/src/models/index/video.model.js","webpack:///./app/src/module/tools/modelBefore.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;ACTD,qBAAoB,2BAA2B,MAAM,wBAAwB,iCAAiC,wBAAwB,6BAA6B,wBAAwB,SAAS,MAAM,iCAAiC,wBAAwB,sBAAsB,wBAAwB,SAAS,KAAK,kFAAkF,wBAAwB,gBAAgB,yBAAyB,gEAAgE,0BAA0B,6BAA6B,uBAAuB,wEAAwE,KAAK,gBAAgB,wBAAwB,yCAAyC,cAAc,aAAa,wBAAwB,wDAAwD,cAAc,qEAAqE,gBAAgB,2IAA2I,+BAA+B,kEAAkE,sCAAsC,6CAA6C,iBAAiB,yBAAyB,KAAK,wCAAwC,MAAM,yCAAyC,cAAc,aAAa,wBAAwB,wDAAwD,cAAc,kEAAkE,gBAAgB,2IAA2I,6BAA6B,kEAAkE,sCAAsC,6CAA6C,iBAAiB,yBAAyB,KAAK,wCAAwC,KAAK,+EAA+E,cAAc,qBAAqB,gBAAgB,8CAA8C,uBAAuB,0GAA0G,iBAAiB,sDAAsD,gBAAgB,sDAAsD,OAAO,K;;;;;;;ACA17E;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,2BAA0B;AAC1B,+BAA8B;AAC9B,6BAA4B;AAC5B,+BAA8B;AAC9B,4BAA2B;AAC3B;AACA;AACA;;AAEA;;;;;;;;ACnLA,0C;;;;;;;ACAA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;;ACpHA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,2BAA0B,iBAAiB;AAC3C;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA,EAAC;;AAED;;;;;;;;ACpJA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,WAAU,YAAY;AACtB;AACA;AACA,cAAa,IAAI,eAAe,IAAI;AACpC,sCAAqC,YAAY;AACjD;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACzBA,qBAAoB,yBAAyB,UAAU,eAAe,wCAAwC,2BAA2B,iCAAiC,MAAM,2BAA2B,YAAY,aAAa,uBAAuB,iCAAiC,8BAA8B,0BAA0B,UAAU,iCAAiC,KAAK,2BAA2B,YAAY,mDAAmD,MAAM,wBAAwB,2BAA2B,iCAAiC,MAAM,2BAA2B,YAAY,aAAa,uBAAuB,iCAAiC,8BAA8B,0BAA0B,UAAU,iCAAiC,KAAK,2BAA2B,YAAY,qDAAqD,KAAK,MAAM,OAAO,K;;;;;;;ACAh4B,qBAAoB,yBAAyB,UAAU,qBAAqB,sDAAsD,MAAM,cAAc,gBAAgB,oDAAoD,MAAM,uCAAuC,KAAK,UAAU,KAAK,MAAM,OAAO,K;;;;;;;ACAxS;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;;;;;;;AC9LA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAY,YAAY;AACxB;AACA;AACA,kBAAiB,IAAI,eAAe,IAAI;AACxC,4CAA2C,YAAY;AACvD;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACzBA;AACA;AACA;AACA;AACA,gCAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["/**\r\n * Created by caoxifeng on 16/4/11.\r\n */\r\nvar $ = require('jquery');\r\nrequire('../stylesheets/index.scss');\r\nvar MainView = require('./views/index/main.view');\r\n$(function () {\r\n    // 入口视图\r\n    var mainView = new MainView();\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/index.js\n ** module id = 0\n ** module chunks = 3\n **/","module.exports = \"{{each videos as info index}}\\r\\n{{if info.charge == true}}\\r\\n<li class=\\\"program channel{{info.channel.channelId}} charge\\\" data-channelid=\\\"{{info.channel.channelId}}\\\">\\r\\n{{else}}\\r\\n<li class=\\\"program channel{{info.channel.channelId}}\\\" data-channelid=\\\"{{info.channel.channelId}}\\\">\\r\\n{{/if}}\\r\\n    <h3 class=\\\"program-top\\\">\\r\\n        <a href=\\\"/channel.html?channelId={{info.channel.channelId}}\\\"><img src=\\\"{{info.channel.profileImg}}\\\" alt=\\\"\\\" class=\\\"avator\\\">\\r\\n        <span class=\\\"name\\\">{{info.channel.channelName}}</span></a>\\r\\n            {{if info.mysub == true}}\\r\\n            <div class=\\\"meet disabled\\\">已订阅</div>\\r\\n            {{/if}}\\r\\n    </h3> {{if info.charge == true}}\\r\\n    <a href=\\\"/living.html?videoId={{info.videoId}}&channelId={{info.channel.channelId}}\\\">\\r\\n        <div class=\\\"viedoBox\\\" data-videoid=\\\"{{info.videoId}}\\\">\\r\\n            <i class=\\\"fee\\\"></i>\\r\\n            <img src=\\\"{{info.posterPic}}\\\" alt=\\\"\\\" class=\\\"videoImg\\\">\\r\\n            <div class=\\\"shadow\\\"></div>\\r\\n            <div class=\\\"play_ico\\\"></div>\\r\\n            {{if info.videoType == \\\"LIVE\\\"}}\\r\\n            <span class=\\\"live-ico\\\"></span>\\r\\n            {{else if info.T_playtime != \\\"00:00\\\"}}\\r\\n            <span class=\\\"viedo_time\\\">{{info.T_playtime}}</span>\\r\\n            {{/if}}\\r\\n        </div>\\r\\n    </a>\\r\\n    {{else}}\\r\\n    <a href=\\\"/living.html?videoId={{info.videoId}}&channelId={{info.channel.channelId}}\\\">\\r\\n        <div class=\\\"viedoBox\\\" data-videoid=\\\"{{info.videoId}}\\\">\\r\\n            <i class=\\\"\\\"></i>\\r\\n            <img src=\\\"{{info.posterPic}}\\\" alt=\\\"\\\" class=\\\"videoImg\\\">\\r\\n            <div class=\\\"shadow\\\"></div>\\r\\n            <div class=\\\"play_ico\\\"></div>\\r\\n            {{if info.videoType==\\\"LIVE\\\"}}\\r\\n            <span class=\\\"live-ico\\\"></span>\\r\\n            {{else if info.T_playtime != \\\"00:00\\\"}}\\r\\n            <span class=\\\"viedo_time\\\">{{info.T_playtime}}</span>\\r\\n            {{/if}}\\r\\n        </div>\\r\\n    </a>\\r\\n    {{/if}}\\r\\n    <div class=\\\"program_msg\\\">\\r\\n        <a href=\\\"living.html?videoId={{info.videoId}}\\\" class=\\\"title\\\">{{info.videoName}}</a>\\r\\n        <div class=\\\"program_time\\\">{{info.T_onAirStartTime}}</div>\\r\\n        <div class=\\\"program_support clearfix\\\">\\r\\n            <span class=\\\"program_visit\\\">{{info.visitCount}}</span>\\r\\n            <span class=\\\"program_love\\\">{{info.likeCount}}</span>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n{{/each}}\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/index/template/video.html\n ** module id = 84\n ** module chunks = 1 3\n **/","/**\r\n *如果使用zepto，fadeIn,fadeOut,innerHeight等函数不被支持\r\n */\r\n\r\nvar prober = require(\"prober\");\r\nvar _ = require('underscore');\r\n\r\nvar isIE = prober.browser.name == \"ie\",\r\n    isIE6 = isIE && prober.browser.version < \"7\";\r\n\r\nfunction Alertify() {\r\n    this.iframe = $(\"<iframe></iframe>\").addClass(\"alertify-wrapper-iframe\");\r\n    this.el = $(\"<div/>\").addClass(\"alertify-wrapper clearfix\");\r\n    this.ctn = $(\"<div/>\").addClass(\"alertify-wrapper-ctn\");\r\n    this.ctnInner = $(\"<div/>\").addClass(\"alertify-wrapper-ctn-inner\");\r\n    this.ctnInnerContWrapper = $(\"<div/>\");\r\n    this.contElStr = \"<i></i>\";\r\n    this.body = $(\"body\");\r\n    this.init();\r\n}\r\n\r\nAlertify.prototype = {\r\n    constructor: Alertify,\r\n    init: function() {\r\n        this.runningTime = 400;\r\n        this.stayTime = 1000;\r\n        this.timeId = null;\r\n        this.ctn.appendTo(this.el);\r\n        this.ctnInner.appendTo(this.ctn);\r\n        if (isIE) {\r\n            this.iframe.appendTo(this.ctnInner);\r\n        }\r\n        this.ctnInnerContWrapper.appendTo(this.ctnInner);\r\n        this.el.appendTo(this.body);\r\n    },\r\n    showInfo: function(css, mess, callback, delay) {\r\n        var self = this;\r\n        var stayTime = delay ? delay : self.stayTime;\r\n\r\n        if (typeof mess !== \"undefined\" && $.trim(mess) !== \"\") {\r\n            clearTimeout(self.timeId);\r\n            if (this.running) {\r\n                try {\r\n                    this.el.stop().hide();\r\n                } catch (e) {}\r\n                this.ctnInnerContWrapper.removeClass();\r\n                clearTimeout(this.timeId);\r\n                typeof self.callback === \"function\" && self.callback();\r\n            }\r\n            this.callback = callback;\r\n            //标示alertify是否为显示状态\r\n            this.running = true;\r\n\r\n            this.ctnInnerContWrapper.addClass(css).html(this.contElStr + mess);\r\n\r\n            this.setPosition();\r\n\r\n            try {\r\n                this.el.fadeIn(this.runningTime, function() {\r\n                    if (_.indexOf(Alertify.manualType, self.currentType) === -1) {\r\n                        self.timeId = setTimeout(function() {\r\n                            self.hideInfo();\r\n                        }, stayTime);\r\n                    }\r\n                });\r\n            } catch (e) {\r\n                this.el.css({\r\n                    \"opacity\": 1,\r\n                    \"display\": \"block\"\r\n                });\r\n                self.timeId = setTimeout(function() {\r\n                    self.hideInfo();\r\n                }, stayTime);\r\n            }\r\n\r\n        }\r\n    },\r\n    hideInfo: function() {\r\n        var self = this;\r\n        try {\r\n            this.el.fadeOut(this.runningTime, function() {\r\n                typeof self.callback === \"function\" && self.callback();\r\n                self.ctnInnerContWrapper.removeClass();\r\n                self.running = false;\r\n            });\r\n        } catch (e) {\r\n            this.el.css({\r\n                \"opacity\": 0,\r\n                \"display\": \"none\"\r\n            });\r\n            typeof self.callback === \"function\" && self.callback();\r\n            self.ctnInnerContWrapper.removeClass();\r\n            self.running = false;\r\n        }\r\n\r\n    },\r\n    setPosition: function() {\r\n        var clientHeight = document.documentElement.clientHeight;\r\n        try {\r\n            var alertifyHeight = this.el.innerHeight();\r\n        } catch (e) {\r\n            var alertifyHeight = this.el.height();\r\n        }\r\n\r\n        var alertifyTop = (clientHeight - alertifyHeight) / 2;\r\n\r\n        this.iframe.css(\"height\", alertifyHeight + \"px\");\r\n\r\n        if (isIE6) {\r\n            var stylesInIE = {\r\n                position: \"absolute\",\r\n                top: alertifyTop + $(window).scrollTop() + \"px\"\r\n            };\r\n            this.el.css(stylesInIE);\r\n        } else {\r\n            this.el.css(\"top\", alertifyTop + \"px\");\r\n        }\r\n    },\r\n    hide: function(time, callback) {\r\n        var time = typeof time === \"number\" ? time : this.runningTime,\r\n            self = this;\r\n        if (!this.running) {\r\n            return;\r\n        }\r\n\r\n        if (this.el.fadeOut) {\r\n            this.el.fadeOut(time, function() {\r\n                typeof callback === \"function\" && callback();\r\n                self.ctnInnerContWrapper.removeClass();\r\n                self.running = false;\r\n            });\r\n        } else {\r\n            this.el.hide();\r\n            self.ctnInnerContWrapper.removeClass();\r\n            self.running = false;\r\n        }\r\n    }\r\n};\r\n\r\n//alertify控件支持的类型，{如需要新增类型，直接在此属性加入即可}\r\nAlertify.automaticType = [\"log\", \"error\", \"success\"];\r\nAlertify.manualType = [\"loading\"];\r\n\r\nvar alertify = new Alertify(),\r\n    exportsObj = {\r\n        hide: function(time, callback) {\r\n            var time = time,\r\n                callback = callback;\r\n            if (arguments.length === 1 && typeof arguments[0] === \"function\") {\r\n                callback = time;\r\n                time = null;\r\n            }\r\n            alertify.hide(time, callback);\r\n        }\r\n    };\r\n\r\n_.each(Alertify.automaticType.concat(Alertify.manualType), function(type, index) {\r\n    exportsObj[type] = function() {\r\n        var message = arguments[0];\r\n        if (type === \"loading\") {\r\n            message || (message = \"加载中，请稍后...\");\r\n        }\r\n        alertify.currentType = type;\r\n        alertify.showInfo(\"alertify-\" + type, message, arguments[1], arguments[2]);\r\n    }\r\n});\r\n\r\n/**\r\n * interface 对外的接口\r\n * @return {\r\n *      log: function() {},         常态输出\r\n *      loading: function() {},     loading状态\r\n *      error: function() {},       错误输出\r\n *      success: function() {}      成功输出\r\n *      hide: function() {}         关闭提示组件,可传入回调\r\n * }\r\n * 每个方法都接受二个参数message和callback回调,callback不是必须的。(hide接受的是time和callback参数,可直接单独传入callback)\r\n */\r\n\r\nmodule.exports = exportsObj;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/util/alertify.js\n ** module id = 90\n ** module chunks = 1 3 4 5 6 8\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/stylesheets/index.scss\n ** module id = 102\n ** module chunks = 3\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\n\r\nvar BannerView = require('./banner.view.js');\r\nvar VideoView = require('./video.view.js');\r\nvar alertify = require('alertify');\r\nvar user = require('../../module/util/user.js');\r\nvar topbar = require('../../module/topbar/topbar.js');\r\nvar loginBox = require('loginBox');\r\nvar View = BaseView.extend({\r\n    el: '.container',\r\n    events: {\r\n        'click .newest': 'tab_newest',\r\n        'click .hostest': 'tab_hostest',\r\n        'click .mysub': 'tab_mysub',\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        this.condition = {\r\n            videoTotal: 0,\r\n            pageNum: 0,\r\n            listType: 1,\r\n            PageNow: 1\r\n        }\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n        this.loginBox = loginBox();\r\n        this._dialog = this.loginBox.dialog;\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        this.scrollIndex = 0;\r\n        this.bannerView = new BannerView();\r\n        this.videoView = new VideoView();\r\n        this.topbar = new topbar();\r\n        this.scrollLoad();\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    },\r\n    scrollLoad: function() {\r\n        var self = this;\r\n        // 滚动监听函数进行下拉加载更多操作\r\n        function load() {\r\n            if (self.bScorll) return;\r\n            var $windowScrollTop = $(window).scrollTop();\r\n            var $windowHeight = $(window).height();\r\n            var $documentHeight = $(document).height();\r\n            if (($windowScrollTop + $windowHeight) > $documentHeight - 200) {\r\n                self.scrollIndex++;\r\n                // 调用viewView里面的注册事件\r\n                self.videoView.trigger('events:scoll_fetch', self.scrollIndex)\r\n            }\r\n        }\r\n        var delayLoad =  _.throttle(load,300);\r\n        // 监听滚动条目\r\n        $(window).on('scroll', delayLoad);\r\n    },\r\n    tab_newest: function(e) {\r\n        var $this = $(e.currentTarget);\r\n        if ($this.hasClass('on')) return;\r\n        this.scrollIndex = 0;\r\n        $(window).scrollTop(0);\r\n        $('.noMore').hide();\r\n        $('.bannerBox,.common_con h2').show();\r\n        $('.appDownloadAd').show();\r\n        $this.addClass('on').siblings('li').removeClass('on');\r\n        $('.programlist').html('');\r\n        this.videoView.trigger('events:tab_fetch', 1);\r\n    },\r\n    tab_hostest: function(e) {\r\n        var $this = $(e.currentTarget);\r\n        if ($this.hasClass('on')) return;\r\n        this.scrollIndex = 0;\r\n        $(window).scrollTop(0);\r\n        $('.noMore').hide();\r\n        $('.bannerBox,.common_con h2').hide();\r\n        $('.appDownloadAd').hide();\r\n        $this.addClass('on').siblings('li').removeClass('on');\r\n        $('.programlist').html('');\r\n        this.videoView.trigger('events:tab_fetch', 2);\r\n    },\r\n    tab_mysub: function(e) {\r\n        var _this = this;\r\n        var status = this._dialog.status();\r\n        var $this = $(e.currentTarget);\r\n        if ($this.hasClass('on')) return;\r\n        if (!user.isLogined()) {\r\n            if (status == 'hide') {\r\n                this._dialog.trigger('show');\r\n            } else {\r\n                this._dialog.trigger('hide');\r\n            }\r\n            return false;\r\n        }\r\n        this.scrollIndex = 0;\r\n        $(window).scrollTop(0);\r\n        $('.bannerBox,.common_con h2').hide();\r\n        $('.appDownloadAd').hide();\r\n        $this.addClass('on').siblings('li').removeClass('on');\r\n        $('.programlist').html('');\r\n        this.videoView.trigger('events:tab_fetch', 3);\r\n    }\r\n});\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/index/main.view.js\n ** module id = 110\n ** module chunks = 3\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\n\r\n// 如果判断登陆就引入userModel的模块\r\n\r\nvar BannelModel = require('../../models/index/banner.model');\r\n\r\nvar View = BaseView.extend({\r\n    el: '.bannerBox',\r\n    events: {\r\n        'click .lBtn': 'preBanner',\r\n        'click .rBtn': 'nextBanner',\r\n        'click .bannerBtnBox li': 'btnTab'\r\n    },\r\n    _attr: function() {\r\n        this.bannerIndex = 0;\r\n        this.maxlen = -1;\r\n        this.zIndex = 3;\r\n        this.$banners = null;\r\n        this.$liBtns = null;\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        this._attr();\r\n        this.deviceinfo = {\r\n            deviceinfo: '{\"aid\":\"30001001\"}',\r\n            access_token: ''\r\n        }\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n        this.bannerTpl = require('./template/banner.html');\r\n        this.bannerBtnTpl = require('./template/banner_btn.html');\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        this.bannerModel = new BannelModel();\r\n        var promise = this.bannerModel.executeJSONP(this.deviceinfo);\r\n        var self = this;\r\n        promise.done(function(response) {\r\n            if (response.msg == \"SUCCESS\") {\r\n                self.renderBanner();\r\n            }\r\n        });\r\n        promise.fail(function(xhr) {\r\n            if (xhr) {\r\n                // 这里可以引入一个弹框的效果 进行提示\r\n                console.log('error');\r\n            }\r\n        });\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    },\r\n    renderBanner: function() {\r\n        var self = this;\r\n        var $father = $(this.el);\r\n        var $bannerBox = $father.find('.bannerlist');\r\n        var $bannerBtnBox = $father.find('.bannerBtnBox ol');\r\n        var htmlBanner = this.compileHTML(this.bannerTpl, this.bannerModel.get('data'));\r\n        var htmlBannerBtn = this.compileHTML(this.bannerBtnTpl, this.bannerModel.get('data'));\r\n        $bannerBox.append(htmlBanner);\r\n        $bannerBtnBox.append(htmlBannerBtn);\r\n        this.$banners = $bannerBox.find('li');\r\n        this.maxlen = this.$banners.length;\r\n        this.$liBtns = $bannerBtnBox.find('li');\r\n        if (this.bannerModel.get('data').recs.length > 1) {\r\n            $('.bannerBtnBox').show();\r\n            $('.lBtn').show();\r\n            $('.rBtn').show();\r\n        };\r\n        setTimeout(function() {\r\n            self.bannerTab();\r\n        }, 6000);\r\n    },\r\n    preBanner: function() {\r\n        var bannerIndex = this.bannerIndex;\r\n        this.$banners.eq(bannerIndex).stop().animate({\r\n            opacity: 0,\r\n            zIndex: 0\r\n        }, 1000);\r\n        this.$liBtns.eq(bannerIndex).removeClass('on');\r\n        bannerIndex--;\r\n        if (bannerIndex < 0) bannerIndex += this.maxlen;\r\n        bannerIndex %= this.maxlen;\r\n        this.$liBtns.eq(bannerIndex).addClass('on');\r\n        this.$banners.eq(bannerIndex).stop().animate({\r\n            opacity: 1,\r\n            zIndex: 2\r\n        }, 1000);\r\n        this.bannerIndex = bannerIndex;\r\n    },\r\n    nextBanner: function() {\r\n        var bannerIndex = this.bannerIndex;\r\n        this.$banners.eq(bannerIndex).stop().animate({\r\n            opacity: 0,\r\n            zIndex: 0\r\n        }, 1000);\r\n        this.$liBtns.eq(bannerIndex).removeClass('on');\r\n        bannerIndex++;\r\n        bannerIndex %= this.maxlen;\r\n        this.$liBtns.eq(bannerIndex).addClass('on');\r\n        this.$banners.eq(bannerIndex).stop().animate({\r\n            opacity: 1,\r\n            zIndex: 2\r\n        }, 1000);\r\n        this.bannerIndex = bannerIndex;\r\n    },\r\n    btnTab: function(e) {\r\n        var i = $(e.currentTarget).index();\r\n        this.bannerIndex = i;\r\n        this.$banners.eq(i).stop().animate({\r\n            opacity: 1,\r\n            zIndex: 2\r\n        }, 1000).siblings('').stop().animate({\r\n            opacity: 0\r\n        }, 1000);\r\n        this.$liBtns.eq(i).addClass('on').siblings('li').removeClass('on');\r\n    },\r\n    bannerTab: function() {\r\n        var self = this,\r\n            timer = null,\r\n            $bannerBox = $('.bannerBox');\r\n        timer = setInterval(function() {\r\n            self.nextBanner();\r\n        }, 3000);\r\n        $bannerBox.mouseover(function(event) {\r\n            clearInterval(timer);\r\n        });\r\n        $bannerBox.mouseout(function(event) {\r\n            timer = setInterval(function() {\r\n                self.nextBanner();\r\n            }, 3000);\r\n        });\r\n    }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/index/banner.view.js\n ** module id = 111\n ** module chunks = 3\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\n\r\nvar Model = BaseModel.extend({\r\n  url: '{{url_prefix}}/home/rec_list.json',\r\n  beforeEmit: function beforeEmit() {\r\n    // 给请求地址替换一下环境变量\r\n    if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n      this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n    }\r\n  }\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceModel = function sharedInstanceModel() {\r\n  if (!shared) {\r\n    shared = new Model();\r\n  }\r\n  return shared;\r\n};\r\n\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/models/index/banner.model.js\n ** module id = 112\n ** module chunks = 3\n **/","module.exports = \"{{each recs as item index}}\\r\\n    {{if index == 0}}\\r\\n\\t    <li class=\\\"now\\\">\\r\\n\\t\\t\\t{{if item.type == \\\"VIDEO\\\"}}\\r\\n\\t\\t\\t    <a href=\\\"http://{{host}}/web/living.html?videoId={{item.recId}}&channelid={{item.extras.channelId}}\\\" target=\\\"_blank\\\">\\r\\n\\t\\t\\t{{else if item.type == \\\"WEB\\\"}}\\r\\n\\t\\t\\t    <a href=\\\"{{item.url}}\\\" target=\\\"_blank\\\">\\r\\n\\t\\t\\t{{/if}}\\r\\n\\t\\t\\t    <img src=\\\"{{item.pcPic}}\\\" alt=\\\"\\\">\\r\\n\\t\\t\\t    </a>\\r\\n\\t\\t</li>\\r\\n\\t{{else}}\\r\\n\\t\\t<li>\\r\\n\\t\\t\\t{{if item.type == \\\"VIDEO\\\"}}\\r\\n\\t\\t\\t    <a href=\\\"http://{{host}}/web/living.html?videoId={{item.recId}}&channelid={{item.extras.channelId}}\\\" target=\\\"_blank\\\">\\r\\n\\t\\t\\t{{else if item.type == \\\"WEB\\\"}}\\r\\n\\t\\t\\t    <a href=\\\"{{item.url}}\\\" target=\\\"_blank\\\">\\r\\n\\t\\t\\t{{/if}}\\r\\n\\t\\t\\t    <img src=\\\"{{item.pcPic}}\\\" alt=\\\"\\\">\\r\\n\\t\\t        </a>\\r\\n\\t\\t</li>\\r\\n\\t{{/if}}\\r\\n{{/each}}\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/index/template/banner.html\n ** module id = 113\n ** module chunks = 3\n **/","module.exports = \"{{each recs as item index}}\\r\\n    {{if item.length == 1}}\\r\\n        <li style=\\\"display:none\\\"></li>\\r\\n    {{else}}\\r\\n        {{if index == 0 }}\\r\\n            <li class=\\\"on\\\"></li>\\r\\n        {{else}}\\r\\n            <li></li>\\r\\n        {{/if}}\\r\\n    {{/if}}\\r\\n{{/each}}\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/index/template/banner_btn.html\n ** module id = 114\n ** module chunks = 3\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar BaseView = base.View;\r\n\r\nvar Config = require('config');\r\nvar env = Config.env[Config.scheme];\r\nvar VideoModel = require('../../models/index/video.model');\r\nvar alertify = require('alertify');\r\nvar dealModel = require('modelBefore').dealParamsJsonP;\r\nvar gobal = require('gobal');\r\n\r\n// 定义一些变量\r\nvar bSub = false;\r\nvar bOne = true;\r\nvar bStopFetch = false;\r\n\r\nvar View = BaseView.extend({\r\n    el: '.programlist',\r\n    events: {\r\n        'click .meetable': 'subscribe',\r\n        'click .disabled': 'unsubscribe'\r\n    },\r\n    rawLoader: function() {\r\n        return '';\r\n    },\r\n    context: function(args) {\r\n        console.log(args);\r\n    },\r\n    beforeMount: function() {\r\n        //  初始化一些自定义属性\r\n        this.params = {\r\n            offset: 0,\r\n            sortType: 1,\r\n            size: 9,\r\n        };\r\n        this.reqType = false;\r\n    },\r\n    afterMount: function() {\r\n        //  获取findDOMNode DOM Node\r\n        this.videoTpl = require('./template/video.html');\r\n    },\r\n    ready: function() {\r\n        //  初始化\r\n        this.videoModel = new VideoModel();\r\n        // 注册方法\r\n        this.onEvent();\r\n        // 执行方法\r\n        this.trigger('events:initVideoList');\r\n    },\r\n    beforeDestroy: function() {\r\n        //  进入销毁之前,将引用关系设置为null\r\n    },\r\n    destroyed: function() {\r\n        //  销毁之后\r\n    },\r\n    onEvent: function() {\r\n        var self = this;\r\n        this.on('events:initVideoList', function(data) {\r\n            self.fetchModel();\r\n        });\r\n        this.on('events:tab_fetch', function(listType) {\r\n            bStopFetch = false;\r\n            bOne = true;\r\n            self.params.offset = 0;\r\n            switch (listType) {\r\n                case 1:\r\n                    bSub = false;\r\n                    this.videoModel.url = env.url_prefix + '/video/home_list.json';\r\n                    self.params.sortType = 1;\r\n                    self.reqType = false;\r\n                    break;\r\n                case 2:\r\n                    bSub = false;\r\n                    this.videoModel.url = env.url_prefix + '/video/home_list.json';\r\n                    self.params.sortType = 2;\r\n                    self.reqType = false;\r\n                    break;\r\n                case 3:\r\n                    bSub = true;\r\n                    this.videoModel.url = env.url_prefix + '/video/mysub_list.json';\r\n                    self.params.sortType = null;\r\n                    self.reqType = true;\r\n                    break;\r\n            }\r\n            self.fetchModel();\r\n        });\r\n        this.on('events:scoll_fetch', function(Scroll_count) {\r\n            if (bStopFetch) return;\r\n            bOne = false;\r\n            var offset = Scroll_count * 9;\r\n            self.params.offset = offset;\r\n            self.fetchModel();\r\n        });\r\n    },\r\n    fetchModel: function() {\r\n        dealModel\r\n        var promise = dealModel(this.videoModel,this.params,true);\r\n        var self = this;\r\n        promise.done(function(res) {\r\n            if (res.msg == 'SUCCESS') {\r\n                $.each(res.data.videos, function(index, val) {\r\n                    val.T_playtime = self.sec2time(val.playtime);\r\n                    val.T_onAirStartTime = self.dateToYMD(val.onAirStartTime);\r\n                    if (self.reqType && self.reqType === true) {\r\n                        val.mysub = true;\r\n                    }\r\n                });\r\n                self.renerVideo();\r\n            }\r\n        });\r\n        promise.fail(function(xhr) {\r\n            if (xhr) {\r\n                // 这里可以引入一个弹框的效果 进行提示\r\n                console.log('error');\r\n            }\r\n        });\r\n    },\r\n    renerVideo: function() {\r\n        // 视图添加渲染\r\n        if (this.videoModel.get('data').videos.length === 0) {\r\n            if (bSub && bOne) {\r\n                $('.noMore').show();\r\n            }\r\n            bStopFetch = true;\r\n            return false;\r\n        }\r\n        var html = this.compileHTML(this.videoTpl, this.videoModel.get('data'));\r\n        this.$el.append(html);\r\n    },\r\n    subscribe: function(e) {\r\n        var _program = $(e.currentTarget.parentElement.parentElement),\r\n            channelId = _program.attr('data-channelid'),\r\n            channelClass = '.channel' + channelId + ' .meet',\r\n            $meets = $(channelClass);\r\n        var subscribe_params = {\r\n            channelId: channelId\r\n        };\r\n        gobal.jsonp('/channel/subscribe.json', subscribe_params, function(res) {\r\n            console.log(res);\r\n            if (res.msg === \"SUCCESS\") {\r\n                $meets.removeClass('meetable').addClass('disabled').html('已订阅');\r\n                // alertify.success('订阅成功');\r\n            }\r\n            console.log(\"success\");\r\n        }, this.error, true);\r\n    },\r\n    unsubscribe: function(e) {\r\n        var _program = $(e.currentTarget.parentElement.parentElement),\r\n            channelId = _program.attr('data-channelid'),\r\n            channelClass = '.channel' + channelId + ' .meet',\r\n            $meets = $(channelClass);\r\n        var subscribe_params = {\r\n            channelId: channelId\r\n        };\r\n        gobal.jsonp('/channel/unsubscribe.json', subscribe_params, function(res) {\r\n            if (res.msg === \"SUCCESS\") {\r\n                $meets.removeClass('disabled').addClass('meetable').html('订阅频道');\r\n                // alertify.error('取消订阅成功');\r\n            }\r\n        }, this.error, true);\r\n    },\r\n    toD: function(n) {\r\n        return n >= 10 ? '' + n : '0' + n;\r\n    },\r\n    error: function(res) {\r\n        console.log('errMeg: ' + res);\r\n    },\r\n    sec2time: function(sec) {\r\n        if (sec == 'undefined') {\r\n            return '00:00';\r\n        }\r\n        var h = parseInt(sec / 3600);\r\n        var m = parseInt((sec - h * 3600) / 60);\r\n        var s = parseInt(sec - h * 3600 - m * 60);\r\n        return h > 0 ? h + ':' + this.toD(m) + ':' + this.toD(s) : this.toD(m) + ':' + this.toD(s);\r\n    },\r\n    dateToYMD: function(timestamp) {\r\n        var date = new Date(),\r\n            Y, M, D, h, s;\r\n        date.setTime(timestamp);\r\n        Y = date.getFullYear();\r\n        M = date.getMonth() + 1;\r\n        D = date.getDate();\r\n        h = date.getHours();\r\n        s = date.getSeconds();\r\n        return Y + '年' + this.toD(M) + '月' + this.toD(D) + '日 ' + this.toD(h) + ':' + this.toD(s);\r\n    }\r\n});\r\n\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/views/index/video.view.js\n ** module id = 115\n ** module chunks = 3\n **/","'use strict';\r\n\r\nvar base = require('base-extend-backbone');\r\nvar Config = require('config');\r\nvar BaseModel = base.Model;\r\nvar env = Config.env[Config.scheme];\r\n\r\nvar Model = BaseModel.extend({\r\n    url: '{{url_prefix}}/video/home_list.json',\r\n    beforeEmit: function beforeEmit() {\r\n        // 给请求地址替换一下环境变量\r\n        if (/^\\{{0,2}(url_prefix)\\}{0,2}/.test(this.url)) {\r\n            this.url = this.url.replace('{{url_prefix}}', env.url_prefix);\r\n        }\r\n    }\r\n});\r\n\r\nvar shared = null;\r\nModel.sharedInstanceModel = function sharedInstanceModel() {\r\n    if (!shared) {\r\n        shared = new Model();\r\n    }\r\n    return shared;\r\n};\r\n\r\nmodule.exports = Model;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/models/index/video.model.js\n ** module id = 116\n ** module chunks = 3\n **/","var user = require('user');\r\nmodule.exports = {\r\n    dealParamsJsonP: function(model, params, useToken) {\r\n        var _params = params || {};\r\n        _params.deviceinfo = '{\"aid\":\"30001001\"}';\r\n        if (!!useToken && user.isLogined()) {\r\n            _params.access_token = 'web-' + user.getToken();\r\n        }\r\n        var promise = model.executeJSONP(_params);\r\n        return promise;\r\n    }\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/src/module/tools/modelBefore.js\n ** module id = 117\n ** module chunks = 3 4 5 6 7 8\n **/"],"sourceRoot":""}